<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/08/02 -->
<html lang="en">
<head>
<title>
The documentation for TOS: PowerDOS
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="gemdos_main.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24">GEMDOS</a>
<a name="UDO_nav_lf_HEAD" href="nap_bionet100.html"><img src="udo_lf.gif" alt="NAP BioNet100" title="NAP BioNet100" border="0" width="24" height="24">NAP BioNet100</a>
<a name="UDO_nav_rg_HEAD" href="tekbios.html"><img src="udo_rg.gif" alt="TekBios" title="TekBios" border="0" width="24" height="24">TekBios</a>

<hr>

<h1><a name="PowerDOS">5.21 PowerDOS</a></h1>
<a name="Puserid"></a>
<a name="Ppriority"></a>
<a name="P_getpid"></a>
<a name="P_getppid"></a>
<a name="Pgetpd"></a>
<a name="Pfindpid"></a>
<a name="Pprocinf"></a>
<a name="P_nice"></a>
<a name="Smalloc"></a>
<a name="Massign"></a>
<a name="Fstatus"></a>
<a name="Fsfirstidx"></a>
<a name="Wake_parent"></a>
<a name="Wait"></a>
<a name="Sleep"></a>
<a name="Ioqueue"></a>
<a name="Wait_dt"></a>
<a name="Dev_create"></a>
<a name="Fm_add"></a>
<a name="Drv_add"></a>
<a name="Devinfo"></a>
<a name="Send"></a>
<a name="Sig_intercept"></a>
<a name="Suspend"></a>
<a name="Q_message"></a>
<a name="Semaphore"></a>
<a name="Mem_share"></a>
<a name="Chgvector"></a>
<a name="Chgsysvar"></a>
<a name="Pname"></a>
<a name="Pvector"></a>
<a name="Pattrib"></a>
<a name="Pmaxmem"></a>
<p>PowerDOS is a <a href="gemdos_main.html">GEMDOS</a> extension for preemptive multitasking.
</p>
<p>For more information, see the PowerDOS Programmer's Manual.
</p>
<p>New modes for <a href="gemdos_process.html#Pexec">Pexec</a> provide multitasking and threads support:
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">mode</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0x10</td>
<td valign="top"> Like mode 0, except that the parent continues to operate
concurrently with the newly created child task.
</td></tr>

<tr><td nowrap="nowrap" valign="top">0x16</td>
<td valign="top"> Like mode 6, except that the parent continues to operate
concurrently with the newly created child task.
</td></tr>

<tr><td nowrap="nowrap" valign="top">0x17</td>
<td valign="top"> Execute a code fragment that is within the text segment of the
calling process.
</td></tr>

<tr><td nowrap="nowrap" valign="top">0x18</td>
<td valign="top"> Like mode 0x17, except that it allows a number of INTs to be
placed on the stack of the new task.

</td></tr>
</table>

<p>PowerDOS adds the function <a href="gemdos_file.html#Flock">Flock</a> and the cookie _FLK conforming
to the specification for GEMDOS File Sharing &amp; Record Locking.
</p>
<p>The following list is a synopsis of the PowerDOS routines,
sorted by function numbers:
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">128</td>
<td valign="top"> <b>Puserid</b> Get or set Group.User ID of a process
<br>Syntax: int32_t Puserid(int16_t process_id, int16_t flag, int32_t
new_group_user)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">129</td>
<td valign="top"> <b>Ppriority</b> Set or get the priority of given process
<br>Syntax: int32_t Ppriority(int16_t process_id, int16_t
new_priority)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">130</td>
<td valign="top"> <b>Pgetpid</b> Get current process' process ID
<br>Syntax: int16_t Pgetpid()
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">131</td>
<td valign="top"> <b>Pgetppid</b> Get current process' parent's process ID
<br>Syntax: int32_t Pgetppid()
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">132</td>
<td valign="top"> <b>Pgetpd</b> Return pointer to process descriptor of given
process
<br>Syntax: void *Pgetpd(int16_t process_id)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">133</td>
<td valign="top"> <b>Pfindpid</b> Find the process ID of a process with the
given name
<br>Syntax: int32_t Pfindpid(int8_t *process_name)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">134</td>
<td valign="top"> <b>Pprocinf</b> Return information about process
<br>Syntax: int32_t Pprocinf(int16_t process_id, struct PROCINFO
*buffer)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">135</td>
<td valign="top"> <b>Pnice</b> Change process priority using delta
<br>Syntax: int32_t Pnice(int16_t process_id, int16_t delta)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">136</td>
<td valign="top"> <b>Smalloc</b> Allocate a block of system memory (top down)
<br>Syntax: char *Smalloc(int32_t mem_size)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">137</td>
<td valign="top"> <b>Massign</b> Assign a block of memory owned by calling
process to process of given process ID
<br>Syntax: int32_t Massign(int16_t process_id, int8_t *mem_start)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">139</td>
<td valign="top"> <b>Fstatus</b> Perform various status operations on an open
file
<br>Syntax: int32_t Fstatus(int16_t handle, int16_t sub_function, ...)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">140</td>
<td valign="top"> <b>Fsfirstidx</b> Perform <a href="gemdos_file.html#Fsfirst">Fsfirst</a> function with index into
directory structure
<br>Syntax: int32_t Fsfirstidx(int8_t *pathname, int16_t attributes,
int16_t index)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">141</td>
<td valign="top"> <b>Wake_parent</b> Wake parent process of current process
<br>Syntax: int32_t Wake_parent(int16_t code)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">142</td>
<td valign="top"> <b>Wait</b> Wait for child process to terminate
<br>Syntax: int32_t Wait()
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">143</td>
<td valign="top"> <b>Sleep</b> Sleep (block) for specified time, or indefinately
<br>Syntax: int32_t Sleep(int32_t time)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">144</td>
<td valign="top"> <b>Ioqueue</b> Link to queue of processes waiting for access
I/O
<br>Syntax: int32_t Ioqueue(int16_t process_id, int32_t time)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">145</td>
<td valign="top"> <b>Wait_dt</b> Wait (block) until a specified date/time
<br>Syntax: int32_t Wait_dt(uint32_t date_time)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">146</td>
<td valign="top"> <b>Dev_create</b> Create a new I/O device
<br>Syntax: int32_t Dev_create(int8_t *dev_name, int8_t *fm_name,
int8_t *drv_name, int8_t *path_vars, int8_t *dev_vars, int16_t share)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">147</td>
<td valign="top"> <b>Fm_add</b> Add a new file manager to the system
<br>Syntax: int32_t Fm_add(int8_t *fm_name, int8_t *subroutine_tab,
int8_t *fm_vars, int16_t fm_type)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">148</td>
<td valign="top"> <b>Drv_add</b> Add a new device driver to the system, or
replace an old one
<br>Syntax: int32_t Drv_add(int8_t *drv_name, int8_t *subroutine_tab,
int8_t *drv_vars)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">149</td>
<td valign="top"> <b>Devinfo</b> Return device info for requested device index
<br>Syntax: int32_t Devinfo(int16_t idx, struct dev_info *buffer)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">150</td>
<td valign="top"> <b>Send</b> Send a signal to a process
<br>Syntax: int32_t Send(int16_t process_id, int32_t signal_code)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">151</td>
<td valign="top"> <b>Sig_intercept</b> Install signal intercept routine
<br>Syntax: int32_t Sig_intercept(int16_t (*intercept_rtn)(int32_t,
void*), int32_t *var_ptr)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">152</td>
<td valign="top"> <b>Suspend</b> Suspend a process
<br>Syntax: int32_t Suspend(int16_t process_id)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">153</td>
<td valign="top"> <b>Q_message</b> The Message Queue
<br>Syntax: int16_t Q_message(struct mq_params *mqparams)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">154</td>
<td valign="top"> <b>Semaphore</b> The Semaphore function
<br>Syntax: int16_t Semaphore(struct s_params *sparams)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">155</td>
<td valign="top"> <b>Mem_share</b> Shared memory
<br>Syntax: int16_t Mem_share(struct ms_params *msparams)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">158</td>
<td valign="top"> <b>Chgvector</b> Read or modify a <a href="gemdos_main.html">GEMDOS</a>, <a href="bios_main.html">BIOS</a> or <a href="xbios_main.html">XBIOS</a>
function vector
<br>Syntax: int32_t Chgvector(int16_t trap_num, int16_t vector_num,
int8_t *new_vector)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">159</td>
<td valign="top"> <b>Chgsysvar</b> Read or modify a PowerDOS internal variable
<br>Syntax: int32_t Chgsysvar(int16_t var_num, int16_t flag, int32_t
new_value)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">160</td>
<td valign="top"> <b>Pname</b> Read or modify the name of a process
<br>Syntax: int32_t Pname(int16_t proc_id, int16_t get_set, int8_t
*name)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">161</td>
<td valign="top"> <b>Pvector</b> Read or modify a process' user vector
<br>Syntax: int32_t Pvector(int16_t proc_id, int32_t vector)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">162</td>
<td valign="top"> <b>Pattrib</b> Set or clear bits in a process' attribute byte
<br>Syntax: int32_t Pattrib(int16_t proc_id, unsigned char flag,
unsigned char mask)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">163</td>
<td valign="top"> <b>Pmaxmem</b> Set or get the maximum memory returned for
<a href="gemdos_memory.html#Malloc">Malloc</a>(-1) for a process
<br>Syntax: int32_t Pmaxmem(int16_t proc_id, int16_t flag, int32_t
size)
<br>&nbsp;

</td></tr>
</table>

<p>See also: <a href="gemdos_main.html">GEMDOS</a> &nbsp; <a href="bios_functions.html">BIOS function list</a> &nbsp; <a href="xbios_functions.html">XBIOS function list</a> &nbsp; <a href="bios_cookiejar.html#Cookie_2C_20PDOS">Cookie PDOS</a> &nbsp;
<a href="bios_cookiejar.html#Cookie_2C_20_FLK">Cookie _FLK</a>
</p>
<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="gemdos_main.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24">GEMDOS</a>
<a name="UDO_nav_lf_FOOT" href="nap_bionet100.html"><img src="udo_lf.gif" alt="NAP BioNet100" title="NAP BioNet100" border="0" width="24" height="24">NAP BioNet100</a>
<a name="UDO_nav_rg_FOOT" href="tekbios.html"><img src="udo_rg.gif" alt="TekBios" title="TekBios" border="0" width="24" height="24">TekBios</a>
</body>
</html>
