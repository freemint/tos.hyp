<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/08/02 -->
<html lang="en">
<head>
<title>
The documentation for TOS: Virtual Screen protocol
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="protocols.html"><img src="udo_up.gif" alt="Protocols" title="Protocols" border="0" width="24" height="24">Protocols</a>
<a name="UDO_nav_lf_HEAD" href="proto_view.html"><img src="udo_lf.gif" alt="View protocol" title="View protocol" border="0" width="24" height="24">View protocol</a>
<a name="UDO_nav_rg_HEAD" href="proto_xacc.html"><img src="udo_rg.gif" alt="XAcc" title="XAcc" border="0" width="24" height="24">XAcc</a>

<hr>

<h1><a name="Virtual_20Screen_20protocol">15.12 Virtual Screen protocol</a></h1>
<a name="Protocol_2C_20Virtual_20Screen"></a>
<p>A real problem when using a large-screen emulation is that
dialog and alert boxes often appear outside the visible portion of the
total screen area. Programs such as <i>BigScreen</i> cannot alter
this. A solution to this is offered by the possibility of providing
information about which portion of the screen is visible at any given
time.
</p>
<p>The cookie jar can be used for this, which is intended for just
such purposes. In our case the cookie is called VSCR, which is short
for Virtual Screen. It points to a structure that contains information
about the displayed segment of the total screen image. Applications
can use this information to centre dialog boxes on the actually
visible part of the screen, for instance.
</p>
<p>The structure is defined as follows:
</p>
<a name="VSCR"></a>
<pre>typedef struct
{
  int32_t cookie;   /* Must be 'VSCR'                     */
  int32_t product;  /* Same as XBRA ID of emulator        */
  int16_t version;  /* Version of the VSCR protocol       */
  int16_t x,y,w,h;  /* Visible segment of virtual screen  */
} INFOVSCR;
</pre>
<p><b>A description of the individual components:</b>
<i>cookie</i> must have the value 0x56534352 ('VSCR'). The point of
the whole thing is that a large-screen simulator can set the
information structure to 'invalid', without having to remove the
cookie first. <i>BigScreen</i>, for instance, can be active or
inactive depending on the chosen resolution, and when the <a href="shel.html#Resolution_20change">screen resolution</a> is
changed it uses this mechanism to switch the structure on or off as
redquired.
</p>
<p>A large-screen simulator can enter its own identifier in
<i>product.</i> The four bytes should consist of four printable
characters (ASCII-code between 32 and 126), just as with an XBRA
identifier.
</p>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Program</td>
  <td align="left" valign="top">Identifier</td>
</tr>
<tr>
  <td align="left" valign="top">BigScreen</td>
  <td align="left" valign="top">BIGS</td>
</tr>
<tr>
  <td align="left" valign="top">BlowUP030</td>
  <td align="left" valign="top">BLOW</td>
</tr>
<tr>
  <td align="left" valign="top">LaceScan</td>
  <td align="left" valign="top">LEmu</td>
</tr>
<tr>
  <td align="left" valign="top">NOVA <a href="vdi_main.html">VDI</a></td>
  <td align="left" valign="top">IMNE</td>
</tr>
</table>
</div>

<p>The component <i>version</i> identifies the version of the VSCR
protocol, and is intended to allow at some time in the future to
supplement the structure with new fields. Finally, <i>x, y, w</i> and
<i>h</i> specify the position, width and height of the visible screen
segment.
</p>
<p>The protocol is deliberately constructed in such a way that it
may be used by other simulators as well, and extended if required.
</p>
<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="protocols.html"><img src="udo_up.gif" alt="Protocols" title="Protocols" border="0" width="24" height="24">Protocols</a>
<a name="UDO_nav_lf_FOOT" href="proto_view.html"><img src="udo_lf.gif" alt="View protocol" title="View protocol" border="0" width="24" height="24">View protocol</a>
<a name="UDO_nav_rg_FOOT" href="proto_xacc.html"><img src="udo_rg.gif" alt="XAcc" title="XAcc" border="0" width="24" height="24">XAcc</a>
</body>
</html>
