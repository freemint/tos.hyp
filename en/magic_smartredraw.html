<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/12/20 -->
<html lang="en">
<head>
<title>
The documentation for TOS: Smart redraw in MagiC
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="magic.html"><img src="udo_up.gif" alt="MagiC" title="MagiC" border="0" width="24" height="24">MagiC</a>
<a name="UDO_nav_lf_HEAD" href="magic_shutdown.html"><img src="udo_lf.gif" alt="General remarks about shutdown" title="General remarks about shutdown" border="0" width="24" height="24">General remarks about shutdown</a>
<a name="UDO_nav_rg_HEAD" href="magic_taskmanager.html"><img src="udo_rg.gif" alt="The task-manager of MagiC" title="The task-manager of MagiC" border="0" width="24" height="24">The task-manager of MagiC</a>

<hr>

<h1><a name="Smart_20redraw_20in_20MagiC">11.15 Smart redraw in MagiC</a></h1>
<a name="Smart_20redraw"></a>
<p>MagiC follows the philosophy that speed should not be obtained
by brutal means such as graphics processors etc., but rather by
applying a bit of thought. Above all, this includes only ever doing as
much as necessary. While TOS on changing the current window, or on
closing or moving it, has a predilection of redrawing the
<i>whole</i> window or even quite innocent, non-participating
windows, MagiC effectively avoids doing this. Though this
unattractive TOS behaviour is not documented anywhere,
unfortunately programs and libraries exist (perhaps those from the
book '<i>Vom Anf√§nger zum GEM-Profi</i>'), which use the feature
that TOS always redraws the window when enlarging it.
</p>
<p><b>An example of this:</b> Let us assume that five columns fit
in a window next to each other, which are also displayed. If the user
now reduces the window so that only four columns fit in it, the user
program re- sorts its data and subsequently itself causes a redraw of
the window (since TOS does <i>not</i> redraw a window when it is
reduced). On the other hand if the user enlarges the window to 7
columns wide, the program again re-sorts the data, but in this case
does <i>not</i> cause a redraw of the window. Due to this behaviour,
which should really be described as a failure of TOS to <i>always
completely</i> redraw the window in this case, output will then take
place.
</p>
<p>MagiC now always redraws only the minimum required part of the
window; when enlarging a window, that would be at most two rectangles
at the right and bottom. For the programs that make use of the error
in TOS described above, there will be a <i>discrepancy between the
logical and physical screen contents.</i>
</p>
<p>It would have been far simpler to just forgo distinguishing the
case 'window larger or smaller than before' and always cause a redraw
when re-sorting. As, even in TOS, the operating system always
aggregates redraws, a possibly superfluous redraw <i>never</i> has
any repercussions.
</p>
<p>Incidentally, the described effect arises also when enlarging
the window if the lowest line or rightmost column is displayed.
</p>
<p><b>Here too an example:</b> A 100-line text is displayed in a
window with a height of 20 lines; as the scroll-bar is right at the
bottom, lines 80 to 100 will be displayed in the window. If the window
is now enlarged downwards so that there is room for around 30 lines,
then one could actually only drag out a white area, since there are no
further data below line 100. To avoid this, most programs scroll their
data in this situation, in our example 10 lines upwards. As a result
the program now displays the lines 70 to 100; but as this is based on
a TOS error, it does <i>not</i> cause a redraw, which of course
readily leads to confusion under MagiC.
</p>
<p>Here too a general redraw of the window during re-sorting under
TOS as well would not only be clean but also have no side-effects,
as TOS too avoids unnecessary redraws in this case. In a direct
comparison between 'Smart redraw' and 'TOS redraw', which are to be
seen literally as opposites, the former shows itself to have
appreciably faster, calmer and cleaner screen build-up that can
compete favourably with the <i>Macintosh</i> system and which would
not be possible in this form under TOS even with a blitter and
68040 processor. Therefore it is strongly recommended that you do not
ruin this elegant solution by taking advantage of undocumented
properties of TOS.
</p>
<p><b>If you are using programs that exhibit the faulty behaviour
described above, then you should proceed as follows:</b>
</p>
<ul>
<li> In MagxConf ACC/CPX, deactivate the 'Smart Redraw' switch
</li>
<li> Stimulate the author of the affected program to remedy this
error
</li>
</ul>

<p>See also: <a href="magic_programs.html#Switch_20Smart_20redraw_20on_2Foff">Switch Smart redraw on/off</a> &nbsp; <a href="gem_about.html">GEM</a> &nbsp; <a href="guidelines_styles.html">Style guidelines</a>
</p>
<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="magic.html"><img src="udo_up.gif" alt="MagiC" title="MagiC" border="0" width="24" height="24">MagiC</a>
<a name="UDO_nav_lf_FOOT" href="magic_shutdown.html"><img src="udo_lf.gif" alt="General remarks about shutdown" title="General remarks about shutdown" border="0" width="24" height="24">General remarks about shutdown</a>
<a name="UDO_nav_rg_FOOT" href="magic_taskmanager.html"><img src="udo_rg.gif" alt="The task-manager of MagiC" title="The task-manager of MagiC" border="0" width="24" height="24">The task-manager of MagiC</a>
</body>
</html>
