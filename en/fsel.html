<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/12/20 -->
<html lang="en">
<head>
<title>
The documentation for TOS: File-selector library
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_HEAD" href="appl.html"><img src="udo_lf.gif" alt="Application library" title="Application library" border="0" width="24" height="24">Application library</a>
<a name="UDO_nav_rg_HEAD" href="pdlg.html"><img src="udo_rg.gif" alt="Print dialogs" title="Print dialogs" border="0" width="24" height="24">Print dialogs</a>

<hr>

<h1><a name="File-selector_20library">8.4 File-selector library</a></h1>
<p>The functions of this library make a file-selector available,
which is used for loading and saving files. The following routines are
present for this purpose:
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fsel_boxinput">fsel_boxinput</a></td>
<td valign="top"> Selects filename with file-selector (Boxkite)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fsel_exinput">fsel_exinput</a></td>
<td valign="top"> Selects filename with file-selector (AES 1.4 onwards)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fsel_input">fsel_input</a></td>
<td valign="top"> Selects filename with file-selector
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#x_fsel_input">x_fsel_input</a></td>
<td valign="top"> Selects filename with file-selector (Geneva)

</td></tr>
</table>

<p><b>Note:</b> Unfortunately alternative file systems (keyword:
long filenames) are not supported; as of <a href="magic.html">MagiC</a> 4 however this is taken
over by the functions of the FSLX library.
</p>
<p>See also: <a href="fslx.html">Extended file-selectors</a> &nbsp; <a href="guidelines_styles.html">Style guidelines</a>
</p>
<h3><a name="fsel_boxinput">8.4.1 fsel_boxinput</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File selection extended input« - Select filenames.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 91
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t fsel_boxinput ( int16_t *global, int8_t *fs_einpath,
int8_t *fs_einsel, int16_t *fs_eexbutton, int8_t *elabel,
<a href="fsel.html#FSEL_CALLBACK">FSEL_CALLBACK</a> callback );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call fsel_boxinput makes a file-selector dialog box
available, which can also be passed a title string. It is used in an
extended version of the file-selector BoxKite.
<br>&nbsp;
<br><b>The function can be passed the following parameters:</b>
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_einpath</td>
<td valign="top"> Name of the default access path (absolute) with appended search
mask; after the call it contains the new pathname
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_einsel</td>
<td valign="top"> Name of the default file; after the call it contains the newly
selected filename
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_eexbutton</td>
<td valign="top"> Exit button:
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'Cancel' was selected</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'OK' was selected</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_elabel</td>
<td valign="top"> Title-line
</td></tr>

<tr><td nowrap="nowrap" valign="top">callback</td>
<td valign="top"> Address of a function that is called by BoxKite if a GEM
message is to be passed to the main application.
<br>This includes not just the message <a href="evnt.html#WM_REDRAW">WM_REDRAW</a> but also <a href="evnt.html#WM_MOVED">WM_MOVED</a>,
for instance, as there are some operating system versions that offer
movement of windows lying at the back. Messages that implicitly open new
windows or top existing ones, on the other hand, should be ignorerd or
stored and only processed after return from the file-selector.
<a href="evnt.html#WM_TOPPED">WM_TOPPED</a> messages are not passed through to the message callback.

</td></tr>
</table>

<br><b>Hint:</b> BoxKite as of Version 2.00 also makes the
functions of the <a href="fslx.html">MagiC file-selector</a> available. The presence of this call should be
checked for using <a href="appl.html#UDO__25apgi_7">appl_getinfo</a> (opcode 7).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> It is imperative that the return value of the function (0 =
error) is respected, as a shortage of memory, for instance, may make
it impossible to use a file-selector.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> If BoxKite from Version 1.71 on is installed. This can be checked
for by the presence of the cookie HBFS. But note that this is also
present for versions earlier than Version 1.71.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#File-selector_20library">File-selector library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20fsel_boxinput">Binding</a> &nbsp; <a href="magic_xfs.html">XFS-concept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20fsel_boxinput">8.4.1.1 Bindings for fsel_boxinput</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">
<br>&nbsp;
<a name="FSEL_CALLBACK"></a>
<br>/* <a href="proto_ssp.html#Message">Message</a> handler for updating background windows */
<br>typedef void cdecl (* FSEL_CALLBACK)(int16_t *msg);
<br>&nbsp;
<br>int16_t <a href="#fsel_boxinput">fsel_boxinput</a> ( int16_t *global, int8_t *fs_einpath,
int8_t *fs_einsel, int16_t *fs_eexbutton, int8_t *elabel,
FSEL_CALLBACK callback );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fsel_boxinput">fsel_boxinput</a> ( int16_t *global, int8_t *fs_einpath,
                        int8_t *fs_einsel,
                        int16_t *fs_eexbutton,
                        int8_t *elabel,
                        FSEL_CALLBACK callback )
{
  void *aespb[6], *addrin[6], *addrout[6];
  int <a href="vdi_bindings.html#contrl">contrl</a>[5], <a href="vdi_bindings.html#intin">intin</a>[16], <a href="vdi_bindings.html#intout">intout</a>[7];

  aespb[0] = <a href="vdi_bindings.html#contrl">contrl</a>;
  aespb[1] = global;
  aespb[2] = <a href="vdi_bindings.html#intin">intin</a>;
  aespb[3] = <a href="vdi_bindings.html#intout">intout</a>;
  aespb[4] = addrin;
  aespb[5] = addrout;

  <a href="vdi_bindings.html#contrl">contrl</a>[0] = 91;
  <a href="vdi_bindings.html#contrl">contrl</a>[1] = 0;
  <a href="vdi_bindings.html#contrl">contrl</a>[2] = 2;
  <a href="vdi_bindings.html#contrl">contrl</a>[3] = 4;
  <a href="vdi_bindings.html#contrl">contrl</a>[4] = 0;

   addr_in[0] = fs_einpath;
   addr_in[1] = fs_einsel;
   addr_in[2] = elabel;
   addr_in[3] = callback;

  _crystal((<a href="aes_structures.html#AESPB">AESPB</a> *)aespb);

   *fs_eexbutton = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">91    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">4     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fs_einpath</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">fs_einsel</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">elabel</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+12</td>
  <td align="left" valign="top">addr_in[3]</td>
  <td align="left" valign="top">callback</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fs_eexbutton</td>
</tr>
</table>
</div>


</td></tr>
</table>

<p><b>Note:</b> BoxKite requires information from the 'global'
array of the main application. The supplied GEM bindings of
development systems normally pass this automatically.
</p>
<h3><a name="fsel_exinput">8.4.2 fsel_exinput</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File selection extended input« - Select filenames.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 91
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t fsel_exinput ( int8_t *fs_einpath, int8_t *fs_einsel,
int16_t *fs_eexbutton, int8_t *elabel );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call fsel_exinput makes a system file-selector dialog box
available in which the user may choose a complete <a href="gemdos_main.html">GEMDOS</a> path
specification. It may also be passed a title-string that is to appear
in the file-selector (normally indicating the action the user is about
to take).
<br>&nbsp;
<p><img src="bilder/gif/f_select_en.gif" alt="" title="" border="0" width="352" height="319"></p>
<br><b>The function can be passed the following parameters:</b>
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_einpath</td>
<td valign="top"> Name of the default access path (absolute) with appended search
mask; after the call it contains the new pathname
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_einsel</td>
<td valign="top"> Name of the default file; after the call it contains the newly
selected filename
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_eexbutton</td>
<td valign="top"> Exit button:
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'Cancel' was selected</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'OK' was selected</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_elabel</td>
<td valign="top"> Titelzeile

</td></tr>
</table>

<br><b>Notes:</b> The function should be nested with <a href="wind.html#wind_update">wind_update</a>
(<a href="wind.html#BEG_MCTRL">BEG_MCTRL</a> or <a href="wind.html#END_MCTRL">END_MCTRL</a>) to prevent double-clicks being passed on to
underlying windows.
<br>&nbsp;
<br><i>fs_einpath</i> points to a character buffer at least 128
bytes long (200 bytes if CD-ROMs are to be accessed).
<i>fs_einsel</i> points to a 13-byte buffer (12 for filename
characters plus a terminating NULL). <i>fs_elabel</i> points to a
buffer up to 30 characters long.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> It is imperative that the return value of the function (0 =
error) is respected, as a shortage of memory, for instance, may make
it impossible to use a file-selector.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> This function is available only from AES 1.4 onwards.
<br>&nbsp;
<br>It is also present in FreeGEM. To check for this feature, use
<a href="appl.html#appl_init">appl_init</a> and check that <i>xbuf.arch</i> is non-zero.
<br>&nbsp;
<br>If it is available, it should be used rather than the <a href="#fsel_input">fsel_input</a>
call, as with the latter the user is not reminded what the function is
actually doing.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#File-selector_20library">File-selector library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20fsel_exinput">Binding</a> &nbsp; <a href="#fsel_input">fsel_input</a> &nbsp; <a href="magic_xfs.html">XFS-concept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20fsel_exinput">8.4.2.1 Bindings for fsel_exinput</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fsel_exinput">fsel_exinput</a> ( int8_t *fs_einpath, int8_t *fs_einsel,
int16_t *fs_eexbutton, int8_t *elabel );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fsel_exinput">fsel_exinput</a> (int8_t *fs_einpath, int8_t *fs_einsel,
                      int16_t *fs_eexbutton, int8_t *elabel)
{
   addr_in[0] = fs_einpath;
   addr_in[1] = fs_einsel;
   addr_in[2] = elabel;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (91);

   *fs_eexbutton = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">91    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">3     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fs_einpath</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">fs_einsel</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">elabel</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fs_eexbutton</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fsel_input">8.4.3 fsel_input</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File selection input« - Selects filenames.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 90
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t fsel_input ( int8_t *fs_iinpath, int8_t *fs_iinsel,
int16_t *fs_iexbutton );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call fsel_input makes a file-selector dialog box available:
The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_iinpath</td>
<td valign="top"> Name of the default access path (absolute) with appended search
mask; after the call it contains the new pathname
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_iinsel</td>
<td valign="top"> Name of the default file; after the call it contains the newly
selected filename
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_iexbutton</td>
<td valign="top"> Exit button:
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'Cancel' was selected</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">OK' was selected</td>
</tr>
</table>
</div>


</td></tr>
</table>

<br><b>Notes:</b> The function should be nested with <a href="wind.html#wind_update">wind_update</a>
(<a href="wind.html#BEG_MCTRL">BEG_MCTRL</a> or <a href="wind.html#END_MCTRL">END_MCTRL</a>) to prevent double-clicks being passed on to
underlying windows.
<br>&nbsp;
<br><i>fs_iinpath</i> points to a character buffer at least 128
bytes long (200 bytes if CD-ROMs are to be accessed).
<i>fs_iinsel</i> points to a 13-byte buffer (12 for filename
characters plus a terminating NULL).
<br>&nbsp;
<br>Incidentally, AES versions earlier than 1.4 can only display
a maximum of 100 files; there a 'ping' warns if not all files can be
displayed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> It is imperative that the return value of the function (0 =
error) is respected, as a shortage of memory, for instance, may make
it impossible to use a file-selector.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All AES versions, not present in <a href="gem_about.html#ViewMAX">ViewMAX</a>/3, and will crash
<a href="gem_about.html#ViewMAX">ViewMAX</a>/2.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#File-selector_20library">File-selector library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20fsel_input">Binding</a> &nbsp; <a href="#fsel_exinput">fsel_exinput</a> &nbsp; <a href="magic_xfs.html">XFS-concept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20fsel_input">8.4.3.1 Bindings for fsel_input</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fsel_input">fsel_input</a> ( int8_t *fs_iinpath, int8_t *fs_iinsel,
int16_t *fs_iexbutton );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fsel_input">fsel_input</a> (int8_t *fs_iinpath, int8_t *fs_iinsel,
                    int16_t *fs_iexbutton)
{
   addr_in[0] = fs_iinpath;
   addr_in[1] = fs_iinsel;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (90);

   *fs_iexbutton = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">90    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">2     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fs_iinpath</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">fs_iinsel</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fs_iexbutton</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="x_fsel_input">8.4.4 x_fsel_input</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Extended file selector«
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 28960
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t x_fsel_input( int8_t *inpath, int16_t pathlen, int8_t
*files, int16_t sels, int16_t *exbutton, int8_t *label );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">inpath</td>
<td valign="top"> Pointer to the path (with wildcards) to start selection at
</td></tr>

<tr><td nowrap="nowrap" valign="top">pathlen</td>
<td valign="top"> Maximum length (incl. null) of inpath
</td></tr>

<tr><td nowrap="nowrap" valign="top">files</td>
<td valign="top"> Pointer to the string containing the default filename to be
displayed. Also, holds up to &quot;sels&quot; filenames (each
null-terminated) upon return.
</td></tr>

<tr><td nowrap="nowrap" valign="top">sels</td>
<td valign="top"> Maximum number of items that can be selected upon return from
the call
</td></tr>

<tr><td nowrap="nowrap" valign="top">exbutton</td>
<td valign="top"> Exit button:
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'Cancel' was selected</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'OK' was selected</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">label</td>
<td valign="top"> A label of up to 30 characters, which will appear at the top of
the item selector.

</td></tr>
</table>

<br>This function is similar to <a href="#fsel_exinput">fsel_exinput</a>, but has several
extensions:
<br>&nbsp;
<ul>
<li> The <i>inpath</i> parameter can contain not only the
traditional * and ? wildcards, but can also contain regular
expressions using [] and {}:
<ul>
<li> Any characters contained between square brackets
(&quot;[]&quot;) define a list of acceptable characters to substitute
into that one position. This can either be individual characters, like
&quot;[ABCD]&quot;, a range separated by a hyphen like
&quot;[A-D]&quot;, or a mix of the two, like &quot;[A-DXYZ]&quot;.
</li>
<li> A list of words contained within curly brackets
(&quot;{}&quot;) defines one or more acceptable values. The values
must be separated by commas.
</li>
</ul>

</li>
<li> The <i>pathlen</i> parameter defines the maximum length of
inpath. If the user adds too many extensions or the path otherwise
grows too long, an error alert will appear.
</li>
<li> Upon successful return, files can contain up to sels filenames.
Each name in the list is followed by a NULL character (ASCII 0) and
the last filename is followed by a final NULL. The exception to this
rule is when sels is one, in which case the final NULL is not used;
For all other cases, the area pointed to by files must be at least (13
* sels)+1 bytes long.
</li>
</ul>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> 0 = An error occurred
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The function is only available under Geneva.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#File-selector_20library">File-selector library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20x_fsel_input">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20x_fsel_input">8.4.4.1 Bindings for x_fsel_input</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#x_fsel_input">x_fsel_input</a>( int8_t *inpath, int16_t pathlen, int8_t
*files, int16_t sels, int16_t *exbutton, int8_t *label );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#x_fsel_input">x_fsel_input</a>( int8_t *inpath, int16_t pathlen, int8_t
*files, int16_t sels, int16_t *exbutton, int8_t *label )
{
   int_in[0] = pathlen;
   int_in[1] = sels;

   addr_in[0] = inpath;
   addr_in[1] = files;
   addr_in[2] = label;

   <a href="aes_fundamentals.html#crys_if">crys_if</a>(28960);

   *exbutton = int_out[1];

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">28960 # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">3     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">pathlen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">sels</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">inpath</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">files</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">label</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">exbutton</td>
</tr>
</table>
</div>


</td></tr>
</table>

<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_FOOT" href="appl.html"><img src="udo_lf.gif" alt="Application library" title="Application library" border="0" width="24" height="24">Application library</a>
<a name="UDO_nav_rg_FOOT" href="pdlg.html"><img src="udo_rg.gif" alt="Print dialogs" title="Print dialogs" border="0" width="24" height="24">Print dialogs</a>
</body>
</html>
