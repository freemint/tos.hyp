<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/12/20 -->
<html lang="en">
<head>
<title>
The documentation for TOS: Printer functions
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="xbios_main.html"><img src="udo_up.gif" alt="XBIOS" title="XBIOS" border="0" width="24" height="24">XBIOS</a>
<a name="UDO_nav_lf_HEAD" href="xbios_datetime.html"><img src="udo_lf.gif" alt="Date, Time and Timer" title="Date, Time and Timer" border="0" width="24" height="24">Date, Time and Timer</a>
<a name="UDO_nav_rg_HEAD" href="xbios_dsp56001.html"><img src="udo_rg.gif" alt="DSP programming" title="DSP programming" border="0" width="24" height="24">DSP programming</a>

<hr>

<h1><a name="Printer_20functions">4.10 Printer functions</a></h1>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Prtblk">Prtblk</a></td>
<td valign="top"> Hardcopy function with parameter block.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Scrdmp">Scrdmp</a></td>
<td valign="top"> Prints screen contents.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Setprt">Setprt</a></td>
<td valign="top"> Gets or alters printer settings.

</td></tr>
</table>

<p>See also: <a href="Screen_functions.html">Screen functions</a> &nbsp; <a href="VDI_fundamentals.html#GDOS_20drivers">GDOS drivers</a>
</p>
<h3><a name="Prtblk">4.10.1 Prtblk</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Print screen dump« - Hardcopy print-out
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 36
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t Prtblk( <a href="xbios_structures.html#PBDEF">PBDEF</a> *par );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The XBIOS routine Prtblk prints out a given segment of the
memory. The pointer <i>par</i> serves to describe the structure of
the screen build-up.
<br>&nbsp;
<br>The print process can be terminated with the key combination
Alternate/Help.
<br>&nbsp;
<br><b>Note:</b> Before calling this function the system variable
<a href="bios_sysvars.html#prt_cnt">prt_cnt</a> should be set to 1 to make anything at all happen. After
return of the function the variable should be set back to -1.
<br>&nbsp;
<br><b>Warning:</b> As of <a href="magic.html">MagiC</a> 3, this function is only present as
a dummy routine; possibly the desired functionality may be restored by
an external program.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns 0 if the printout was successful,
otherwise a non-zero value.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All TOS versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Printer_20functions">Printer functions</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Prtblk">Binding</a> &nbsp; <a href="magic_programs.html#HARDCOPY">HARDCOPY</a> &nbsp; <a href="magic.html">MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Prtblk">4.10.1.1 Bindings for Prtblk</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> #include &lt;tos.h&gt;
<br>&nbsp;
<br>int16_t <a href="#Prtblk">Prtblk</a>( <a href="xbios_structures.html#PBDEF">PBDEF</a> *par );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       par          ; Offset 2
move.w    #36,-(sp)    ; Offset 0
trap      #14          ; Call <a href="xbios_main.html">XBIOS</a>
addq.l    #6,sp        ; Correct stack
</pre>

</td></tr>
</table>

<h3><a name="Scrdmp">4.10.2 Scrdmp</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Screen dump« - Print out the screen contents.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 20
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> void Scrdmp( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The XBIOS routine Scrdmp prints out the contents of the screen
as hardcopy.
<br>&nbsp;
<br>The print process can be terminated with the key combination
Alternate/Help.
<br>&nbsp;
<br><b>Note:</b> The function jumps via the <a href="bios_sysvars.html#scr_dump">scr_dump</a> system vector,
and unfortunately does not work with all available printers.
<br>&nbsp;
<br><b>Warning:</b> As of <a href="magic.html">MagiC</a> 3, this function is only present as
a dummy routine; possibly the desired functionality may be restored by
an external program.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function does not return a result.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All TOS versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Printer_20functions">Printer functions</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Scrdmp">Binding</a> &nbsp; <a href="magic_programs.html#HARDCOPY">HARDCOPY</a> &nbsp; <a href="magic.html">MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Scrdmp">4.10.2.1 Bindings for Scrdmp</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> #include &lt;tos.h&gt;
<br>&nbsp;
<br>void <a href="#Scrdmp">Scrdmp</a>( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    #20,-(sp)    ; Offset 0
trap      #14          ; Call <a href="xbios_main.html">XBIOS</a>
addq.l    #2,sp        ; Correct stack
</pre>

</td></tr>
</table>

<h3><a name="Setprt">4.10.3 Setprt</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Setprinter« - Initialize the printer.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 33
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t Setprt( int16_t config );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The XBIOS routine Setprt sets or reads the current settings of
the printer. The following bits can be specified in the parameter
<i>config</i>:
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="center" valign="top">Bit</td>
  <td align="left" valign="top">Meaning</td>
</tr>
<tr>
  <td align="center" valign="top">0</td>
  <td align="left" valign="top">Dot-matrix or daisywheel printer</td>
</tr>
<tr>
  <td align="center" valign="top">1</td>
  <td align="left" valign="top">Monochrome or colour</td>
</tr>
<tr>
  <td align="center" valign="top">2</td>
  <td align="left" valign="top">Epson, or Atari printer</td>
</tr>
<tr>
  <td align="center" valign="top">3</td>
  <td align="left" valign="top">NLQ or Draft print.</td>
</tr>
<tr>
  <td align="center" valign="top">4</td>
  <td align="left" valign="top">Centronics or RS-232 port.</td>
</tr>
<tr>
  <td align="center" valign="top">5</td>
  <td align="left" valign="top">Continuous paper or single sheet.</td>
</tr>
</table>
</div>

<br>With <i>config</i> = -1 the current configuration will be
returned. All further bits are reserved for future use.
<br>&nbsp;
<br><b>Note:</b> Unfortunately, the settings made by this function
will be ignored by almost all parts of the operating system. So in
one's own programs one ought to evaluate at least the choice of port
as well as the type of paper.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns the old configuration.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All TOS versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Printer_20functions">Printer functions</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Setprt">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Setprt">4.10.3.1 Bindings for Setprt</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> #include &lt;tos.h&gt;
<br>&nbsp;
<br>int16_t <a href="#Setprt">Setprt</a>( int16_t config );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    config,-(sp)  ; Offset 2
move.w    #33,-(sp)     ; Offset 0
trap      #14           ; Call <a href="xbios_main.html">XBIOS</a>
addq.l    #4,sp         ; Correct stack
</pre>

</td></tr>
</table>

<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="xbios_main.html"><img src="udo_up.gif" alt="XBIOS" title="XBIOS" border="0" width="24" height="24">XBIOS</a>
<a name="UDO_nav_lf_FOOT" href="xbios_datetime.html"><img src="udo_lf.gif" alt="Date, Time and Timer" title="Date, Time and Timer" border="0" width="24" height="24">Date, Time and Timer</a>
<a name="UDO_nav_rg_FOOT" href="xbios_dsp56001.html"><img src="udo_rg.gif" alt="DSP programming" title="DSP programming" border="0" width="24" height="24">DSP programming</a>
</body>
</html>
