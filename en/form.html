<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/12/20 -->
<html lang="en">
<head>
<title>
The documentation for TOS: Form library
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_HEAD" href="fslx.html"><img src="udo_lf.gif" alt="Extended file-selectors" title="Extended file-selectors" border="0" width="24" height="24">Extended file-selectors</a>
<a name="UDO_nav_rg_HEAD" href="geneva_function.html"><img src="udo_rg.gif" alt="Geneva library" title="Geneva library" border="0" width="24" height="24">Geneva library</a>

<hr>

<h1><a name="Form_20library">8.11 Form library</a></h1>
<p>This library contains useful functions for handling dialog and
alert boxes of all kinds. The following routines are available for
this purpose:
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_alert">form_alert</a></td>
<td valign="top"> Displays standardized alert box
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_button">form_button</a></td>
<td valign="top"> Simulates a mouse-click
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_center">form_center</a></td>
<td valign="top"> Centres an object
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_dial">form_dial</a></td>
<td valign="top"> Reserves and releases screen memory
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_do">form_do</a></td>
<td valign="top"> Processes a dialog
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_error">form_error</a></td>
<td valign="top"> Outputs operating system error alert
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_keybd">form_keybd</a></td>
<td valign="top"> Processes keyboard input
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_popup">form_popup</a></td>
<td valign="top"> Manages a popup-menu
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_wbutton">form_wbutton</a></td>
<td valign="top"> Simulates a mouse-click (in window)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_wkeybd">form_wkeybd</a></td>
<td valign="top"> Processes keyboard input (in window)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_xdial">form_xdial</a></td>
<td valign="top"> Reserves/releases screen memory (Flydials)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_xdo">form_xdo</a></td>
<td valign="top"> Extended dialog handling
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#form_xerr">form_xerr</a></td>
<td valign="top"> Outputs operating system error alert (<a href="magic.html">MagiC</a>)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#xfrm_popup">xfrm_popup</a></td>
<td valign="top"> Manages a popup-menu (extended version)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#x_form_center">x_form_center</a></td>
<td valign="top"> Centres an object (Geneva)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#x_form_error">x_form_error</a></td>
<td valign="top"> Outputs operating system error alert (Geneva)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#x_form_filename">x_form_filename</a></td>
<td valign="top"> Convert to/from a standard <a href="gemdos_main.html">GEMDOS</a> filename in editable field in
a dialog.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#x_form_mouse">x_form_mouse</a></td>
<td valign="top"> Handle mouse clicks in a dialog, including editable cursor
movement.

</td></tr>
</table>

<p><b>Note:</b> Some of these functions are only present under
MagiC, and offer additional convenience (e.g. <i>movable</i> dialog
boxes).
</p>
<p>See also: <a href="guidelines_styles.html#Dialog_20boxes">Dialog boxes</a> &nbsp; <a href="guidelines_styles.html">Style guidelines</a> &nbsp; Scrollable input
fields
</p>
<h3><a name="form_alert">8.11.1 form_alert</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form alert box« - Display an alert box.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 52
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_alert ( int16_t fo_adefbttn, CONST int8_t
*fo_astring );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_alert displays a standardized alert box on the
screen and returns the index of the button with which the alert box
was exited. During this the AES saves the background and restores
it after the alert box is closed.
<br>&nbsp;
<br>The parameter <i>fo_adefbttn</i> determines the index of the
default exit button of the alert box. The following apply:
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Value</td>
  <td align="left" valign="top">Meaning</td>
</tr>
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">No default button</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">First button</td>
</tr>
<tr>
  <td align="left" valign="top">2</td>
  <td align="left" valign="top">Second button</td>
</tr>
<tr>
  <td align="left" valign="top">3</td>
  <td align="left" valign="top">Third button</td>
</tr>
</table>
</div>

<br>The parameter <i>fo_astring</i> is a pointer to the formatted
string that determines the appearance of the alert box. The format is
'[n][lines][buttons]' where <i>n</i> is the index number of the icon
to be included:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">n Meaning</td>
<td valign="top"> Icon
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0 No icon</td>
<td valign="top"> &nbsp;
<br>
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 Exclamation mark</td>
<td valign="top">
<p><img src="bilder/gif/rufen.gif" alt="" title="" border="0" width="39" height="38"></p>
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 Question mark</td>
<td valign="top">
<p><img src="bilder/gif/frage.gif" alt="" title="" border="0" width="40" height="38"></p>
</td></tr>

<tr><td nowrap="nowrap" valign="top">3 Stop sign</td>
<td valign="top">
<p><img src="bilder/gif/stop.gif" alt="" title="" border="0" width="40" height="38"></p>
</td></tr>

<tr><td nowrap="nowrap" valign="top">4 Info icon, as of AES 4.10</td>
<td valign="top">
<p><img src="bilder/gif/info.gif" alt="" title="" border="0" width="35" height="34"></p>
</td></tr>

<tr><td nowrap="nowrap" valign="top">5 Diskette icon, as of AES 4.10</td>
<td valign="top">
<p><img src="bilder/gif/disk.gif" alt="" title="" border="0" width="37" height="34"></p>
</td></tr>

<tr><td nowrap="nowrap" valign="top">6 Bomb, XaAES</td>
<td valign="top">
<p><img src="bilder/gif/alert_bomb.gif" alt="" title="" border="0" width="32" height="32"></p>
</td></tr>

<tr><td nowrap="nowrap" valign="top">7 System, XaAES</td>
<td valign="top">
<p><img src="bilder/gif/alert_system.gif" alt="" title="" border="0" width="32" height="32"></p>

</td></tr>
</table>

<br><b>Note:</b> The available icons should not be used in an
arbitrary manner, but should suit the situation in each case, i.e.:
<br>&nbsp;
<ul>
<li><p> The <b>exclamation mark</b> should be used for any kind of
message that the user should just confirm briefly.
<br>&nbsp;
</p></li>
<li><p> The <b>question mark</b> serves for all queries that should be
answered before an action takes place (e.g. the deletion of a file).
<br>&nbsp;
</p></li>
<li><p> The <b>stop sign</b> should be employed for serious problems
which it is imperative that the user knows about.
<br>&nbsp;
</p></li>
</ul>

<br>The component <i>lines</i> describes the individual text lines
that are to appear in the alert box. There can be up to five text
lines, each with a maximum of 30 characters, which are separated from
each other by a '|' character.
<br>&nbsp;
<br>The component <i>buttons</i> describes the texts for up to
three buttons with up to 10 characters each, which are separated by a
'|' character from each other.
<br>&nbsp;
<br><b>Note:</b> All AES versions below 1.06 have problems
formatting alert strings padded with spaces; to make alerts look right
with all AES versions, do not pad any line or button with spaces,
apart from adding one space to the longest text line of an alert (to
prevent the last character touching the right border in some AES
versions).
<br>&nbsp;
<dl class="UDO_env_description">
<dt><b><a href="magic.html">MagiC</a>:</b></dt>
<dd>
<p> Due to the compatibility to GEM/3, alert boxes here can
contain up to 40 characters per text line and 20 characters per
button. In addition, all alert boxes may be operated completely via
the keyboard, with the function key [F1] servicing the left, [F2] the
centre and [F3] the right button.
<br>&nbsp;
</p>

</dd>
<dt><b><a href="gem_about.html#ViewMAX">ViewMAX</a>/2</b></dt>
<dd>
<p> and later parse the 'default button' parameter as two bytes;
the low byte is the default button and the high byte is the Cancel
button (ESC is a shortcut for it). This style of parameter will crash
earlier GEM versions.
<br>&nbsp;
</p>

</dd>
<dt><b>Under Geneva</b>,</dt>
<dd>
<p> the alert string can contain left bracket ('[') characters
within the text of the buttons. These denote the keyboard equivalents
to be used for the buttons. For example, this defines an alert with
the equivalents [Alternate][H] and [Alternate][Y]:
<br>&nbsp;
<br>form_alert( 1, &quot;[1][Hi there!][[Hi!|B[ye!]&quot; );
<br>&nbsp;
<br>If an alert button does not contain a pre-defined keyboard
equivalent, it will be considered for an automatic keyboard
equivalent.
<br>&nbsp;
<br><b>Note:</b> DO NOT use this type of alert string when running
without Geneva, as this will have some unpredictable results.
<br>&nbsp;
<br>Additionally, if an alert would normally not have a default
button, Geneva always forces the rightmost button to be the default.
For example:
<br>&nbsp;
<br>form_alert( 2, &quot;[1][Hi!][OK]&quot; ); /* OK is the default
*/
<br>&nbsp;
</p>

</dd>
</dl>
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> This will be the index of the button with which the alert box
was quit; the button at far left has the index 1, and so on in
sequence.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_alert">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_alert">8.11.1.1 Bindings for form_alert</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_alert">form_alert</a> ( int16_t fo_adefbttn, CONST int8_t
*fo_astring );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_alert">form_alert</a> (int16_t fo_adefbttn,
                    CONST int8_t *fo_astring)
{
   int_in[0]  = fo_adefbttn;
   addr_in[0] = fo_astring;

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(52) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">52    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">1     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">fo_adefbttn</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fo_astring</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_button">8.11.2 form_button</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form button« - Simulate the clicking on an object.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 56
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_button ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_btree, int16_t fo_bobject,
int16_t fo_bclicks, int16_t *fo_bnxtobj );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_button simulates mouse clicks on an object. The
following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_btree</td>
<td valign="top"> Address of the object tree in memory
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_bobject</td>
<td valign="top"> Object to be processed
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_bclicks</td>
<td valign="top"> Number of mouse clicks
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_bnxtobj</td>
<td valign="top"> New current object, or 0 if the next object has the status
<a href="aes_fundamentals.html#HIDDEN">HIDDEN</a> or <a href="aes_fundamentals.html#DISABLED">DISABLED</a>, or is not editable

</td></tr>
</table>

<br><b>Note:</b> At a double-click on an object with <a href="aes_fundamentals.html#TOUCHEXIT">TOUCHEXIT</a>, bit
15 will be set in the parameter <i>fo_bnxtobj.</i> The rectangle list
will <i>not</i> be taken into account by this function.
<br>&nbsp;
<br>The correct usage of the function is as follows:
<br>&nbsp;
<ul>
<li> Monitor mouse clicks with <a href="evnt.html#evnt_multi">evnt_multi</a> or <a href="evnt.html#evnt_button">evnt_button</a>
</li>
<li> Once a click occurs, use obj_find to check if the click was
made on the object.
</li>
<li> If it was, call form_button with the appropriate values.
</li>
</ul>

<br><b>Warning:</b> This function was not originally documented by
Atari, so you may need to add bindings for it to some earlier 'C'
compilers.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The return value of the function is 0 if an <a href="aes_fundamentals.html#EXIT">EXIT</a> or <a href="aes_fundamentals.html#TOUCHEXIT">TOUCHEXIT</a>
object was selected, else it is positive.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_button">Binding</a> &nbsp; <a href="aes_structures.html#OBJECT">OBJECT</a> &nbsp; <a href="evnt.html#evnt_multi">evnt_multi</a> &nbsp; <a href="#form_keybd">form_keybd</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_button">8.11.2.1 Bindings for form_button</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_button">form_button</a> ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_btree, int16_t fo_bobject,
int16_t fo_bclicks, int16_t *fo_bnxtobj );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_button">form_button</a> (<a href="aes_structures.html#OBJECT">OBJECT</a> *fo_btree, int16_t fo_bobject,
                     int16_t fo_bclicks, int16_t *fo_bnxtobj)
{
   int_in[0]  = fo_bobject;
   int_in[1]  = fo_bclicks;
   addr_in[0] = fo_btree;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (56);

   *fo_bnxtobj = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">56    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">fo_bobject</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">fo_bclicks</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fo_btree</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fo_bnxtobj</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_center">8.11.3 form_center</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form centered object« - Centre an object on the screen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 54
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_center ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_ctree, int16_t *fo_cx, int16_t
*fo_cy, int16_t *fo_cw, int16_t *fo_ch );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_center modifies an object's coordinates so that
it will appear at the centre of the display screen, and returns the
actual position of the object. The following apply:
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Parameter</td>
  <td align="left" valign="top">Meaning</td>
</tr>
<tr>
  <td align="left" valign="top"><i>fo_ctree</i></td>
  <td align="left" valign="top">Address of the object tree</td>
</tr>
<tr>
  <td align="left" valign="top"><i>fo_cx</i></td>
  <td align="left" valign="top">X-coordinate, <u>and</u></td>
</tr>
<tr>
  <td align="left" valign="top"><i>fo_cy</i></td>
  <td align="left" valign="top">Y-coordinate of top left of object</td>
</tr>
<tr>
  <td align="left" valign="top"><i>fo_cw</i></td>
  <td align="left" valign="top">Width, <u>and</u></td>
</tr>
<tr>
  <td align="left" valign="top"><i>fo_ch</i></td>
  <td align="left" valign="top">Height of object (each centred)</td>
</tr>
</table>
</div>

<br><b>Note:</b> The function also takes special attributes of the
object into account, such as <a href="aes_fundamentals.html#OUTLINED">OUTLINED</a>, for instance (but not
<a href="aes_fundamentals.html#SHADOWED">SHADOWED</a>).
<br>&nbsp;
<br>As of PC-GEM/3 the object tree is <i>no longer</i> centred
in the Y-direction on the whole screen. The reason given for this is
that users of large screen monitors would otherwise have to cover too
large a distance from the menu bar to the object (perhaps a dialog
box).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The return value is always 1.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_center">Binding</a> &nbsp; <a href="#x_form_center">x_form_center</a> &nbsp; <a href="aes_structures.html#OBJECT">OBJECT</a> &nbsp; <a href="objc.html#objc_offset">objc_offset</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_center">8.11.3.1 Bindings for form_center</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_center">form_center</a> ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_ctree, int16_t *fo_cx, int16_t
*fo_cy, int16_t *fo_cw, int16_t *fo_ch );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_center">form_center</a> (<a href="aes_structures.html#OBJECT">OBJECT</a> *fo_ctree, int16_t *fo_cx,
                     int16_t *fo_cy, int16_t *fo_cw,
                     int16_t *fo_ch)
{
   addr_in[0] = fo_ctree;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (54);

   *fo_cx = int_out[1];
   *fo_cy = int_out[2];
   *fo_cw = int_out[3];
   *fo_ch = int_out[4];

   return (int_out[0]);
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">54    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">5     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fo_ctree</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fo_cx</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+4</td>
  <td align="left" valign="top">int_out[2]</td>
  <td align="left" valign="top">fo_cy</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+6</td>
  <td align="left" valign="top">int_out[3]</td>
  <td align="left" valign="top">fo_cw</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+8</td>
  <td align="left" valign="top">int_out[4]</td>
  <td align="left" valign="top">fo_ch</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_dial">8.11.4 form_dial</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form dialog space« - Reserve or release memory for a dialog
object.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 51
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_dial ( int16_t fo_diflag, int16_t fo_dilittlx,
int16_t fo_dilittly, int16_t fo_dilittlw, int16_t fo_dilittlh, int16_t
fo_dibigx, int16_t fo_dibigy, int16_t fo_dibigw, int16_t fo_dibigh );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_dial takes on various tasks, depending on the
passed parameters. The following apply:
<br>&nbsp;
<a name="FMD_START"></a>
<a name="FMD_GROW"></a>
<a name="FMD_SHRINK"></a>
<a name="FMD_FINISH"></a>
<a name="X_FMD_START"></a>
<a name="X_FMD_FINISH"></a>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_diflag</td>
<td valign="top"> Action to be performed
<br><b>0 = FMD_START</b> Reserve screen space for a dialog
<br><b>1 = FMD_GROW</b> Draw several expanding rectangles from the
coordinates <i>fo_dilittlx/y/w/h</i>to <i>fo_dibigx/y/w/h</i>
<br><b>2 = FMD_SHRINK</b> Draw several shrinking rectangles from
<i>fo_dibigx/y/w/h</i> to <i>fo_dilittlx/y/w/h</i>
<br><b>3 = FMD_FINISH</b> Release the reserved screen space again
<br><b>1000 = X_FMD_START</b> (Geneva)
<br>Store the information in the rectangular screen area described by
the <i>fo_dibig</i> parameters for restoration later; if there is
insufficient free memory for the area to be saved, then form_dial will
return a 0 (error) condition
<br><b>1003 = X_FMD_FINISH</b> (Geneva)
<br>Copy back the information previously saved with X_FMD_START; this
MUST be done whenever X_FMD_START is used, but not if an error
occurred during the X_FMD_START
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dilittlx</td>
<td valign="top"> X-coordinate, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dilittly</td>
<td valign="top"> Y-coordinate of top left corner,
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dilittlw</td>
<td valign="top"> Width, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dilittlh</td>
<td valign="top"> Height of the smallest rectangle
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dibigx</td>
<td valign="top"> X-coordinate, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dibigy</td>
<td valign="top"> Y-coordinate of top left corner,
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dibigw</td>
<td valign="top"> Width, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dibigh</td>
<td valign="top"> Height of the largest rectangle

</td></tr>
</table>

<br><b>Note:</b> With the opcode FMD_FINISH, all affected windows
receive a <a href="evnt.html#WM_REDRAW">WM_REDRAW</a> message from the AES. However the menu bar can
<i>not</i> be restored in this way, as it lies outside the working
area of the desktop window.
<br>&nbsp;
<br>At the time of writing, the AES does not use FMD_START, but
the call should still be executed for upwards compatibility.
<br>&nbsp;
<br>The opcodes FMD_GROW and FMD_SHRINK in PC-GEM Version 2.0
fell as victims of the lawsuit between <i>Apple</i> and <i>Digital
Research.</i>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> An error has arisen only if the value 0 is returned.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_dial">Binding</a> &nbsp; <a href="evnt.html#evnt_mesag">evnt_mesag</a> &nbsp; <a href="#form_xdial">form_xdial</a> &nbsp; <a href="graf.html#graf_growbox">graf_growbox</a> &nbsp;
<a href="graf.html#graf_shrinkbox">graf_shrinkbox</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_dial">8.11.4.1 Bindings for form_dial</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_dial">form_dial</a> ( int16_t fo_diflag, int16_t fo_dilittlx,
int16_t fo_dilittly, int16_t fo_dilittlw, int16_t fo_dilittlh, int16_t
fo_dibigx, int16_t fo_dibigy, int16_t fo_dibigw, int16_t fo_dibigh );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_dial">form_dial</a> (int16_t fo_diflag, int16_t fo_dilittlx,
                   int16_t fo_dilittly, int16_t fo_dilittlw,
                   int16_t fo_dilittlh, int16_t fo_dibigx,
                   int16_t fo_dibigy, int16_t fo_dibigw,
                   int16_t fo_dibigh)
{
   int_in[0]  = fo_diflag;
   int_in[1]  = fo_dilittlx;
   int_in[2]  = fo_dilittly;
   int_in[3]  = fo_dilittlw;
   int_in[4]  = fo_dilittlh;
   int_in[5]  = fo_dibigx;
   int_in[6]  = fo_dibigy;
   int_in[7]  = fo_dibigw;
   int_in[8]  = fo_dibigh;

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(51) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">51    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">9     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">0     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">fo_diflag</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">fo_dilittlx</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">fo_dilittly</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+6</td>
  <td align="left" valign="top">int_in[3]</td>
  <td align="left" valign="top">fo_dilittlw</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+8</td>
  <td align="left" valign="top">int_in[4]</td>
  <td align="left" valign="top">fo_dilittlh</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+10</td>
  <td align="left" valign="top">int_in[5]</td>
  <td align="left" valign="top">fo_dibigx</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+12</td>
  <td align="left" valign="top">int_in[6]</td>
  <td align="left" valign="top">fo_dibigy</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+14</td>
  <td align="left" valign="top">int_in[7]</td>
  <td align="left" valign="top">fo_dibigw</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+16</td>
  <td align="left" valign="top">int_in[8]</td>
  <td align="left" valign="top">fo_dibigh</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_do">8.11.5 form_do</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form do dialog« - Process the dialog with input from the
user.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 50
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_do ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_dotree, int16_t fo_dostartob );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_do takes over the processing of user actions in a
dialog form from the calling application, suspending program control
and handling all selectable objects, radio buttons etc. The following
apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dotree</td>
<td valign="top"> Pointer to object tree of the dialog box
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dostartob</td>
<td valign="top"> <a href="indexudo.html">Index</a> of the editable object where the text cursor should be at
the opening of the dialog (the object must have the <a href="aes_fundamentals.html#EDITABLE">EDITABLE</a> flag
set); it will be 0 if the object tree contains no editable object

</td></tr>
</table>

<br><b>Note:</b> The function only returns once the user activates
an object with the <a href="aes_fundamentals.html#EXIT">EXIT</a> or <a href="aes_fundamentals.html#TOUCHEXIT">TOUCHEXIT</a> flag, and restores control to the
calling program.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> This will be the index of the object which was used to close
the dialog. With a double-click, in addition bit 15 will be set.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_do">Binding</a> &nbsp; <a href="#form_xdo">form_xdo</a> &nbsp; <a href="aes_structures.html#OBJECT">OBJECT</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_do">8.11.5.1 Bindings for form_do</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_do">form_do</a> ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_dotree, int16_t fo_dostartob );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_do">form_do</a> (<a href="aes_structures.html#OBJECT">OBJECT</a> *fo_dotree, int16_t fo_dostartob)
{
   int_in[0]  = fo_dostartob;
   addr_in[0] = fo_dotree;

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(50) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">50    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">1     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">fo_dostartob</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fo_dotree</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_error">8.11.6 form_error</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form error« - Display an alert box form for TOS errors.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 53
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_error ( int16_t fo_enum );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_error outputs an MS-DOS error number as a plain
text description (i.e. in an alert box form that contains a stop sign
icon at the left side of the box, a text string holding an explanatory
error message or just 'TOS error #X' and a 'Cancel' button).
<br>&nbsp;
<br>The parameter <i>fo_enum</i> is here the corresponding error
number.
<br>&nbsp;
<br><b>Note:</b> This function is present for reasons of
compatibility to PC-GEM. Hence on TOS systems one first has to
translate the GEMDOS error number to the MS-DOS coding. For the
conversion (GEMDOS -&gt; MS-DOS) one can use, say, the following
formula: (~<i>fo_enum</i>) - 30.
<br>&nbsp;
<br>In N.AES there is an extended form of form_error with all
GEMDOS error-codes. Its presence can be checked with <a href="appl.html#UDO__25apgi_64">appl_getinfo</a> (opcode
64).
<br>&nbsp;
<br>Geneva interpreted a negative number as a GEMDOS/BIOS error-code, and
an appropriate error-message is displayed. For instance, the call:
<br>form_error(-33);
<br>produces an alert with the text 'There is no file with this name'.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> This will be the index (1-3) of the selected exit button.
However, with current GEM versions only one button is available in
error alerts.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_error">Binding</a> &nbsp; <a href="#form_xerr">form_xerr</a> &nbsp; <a href="naes_formerror.html">form_error in N.AES</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_error">8.11.6.1 Bindings for form_error</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_error">form_error</a> ( int16_t fo_enum );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_error">form_error</a> (int16_t fo_enum)
{
   int_in[0] = fo_enum;
   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(53) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">53    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">1     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">0     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">fo_enum</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_keybd">8.11.7 form_keybd</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form keyboard« - Process keyboard input in a dialog box
form.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 55
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_keybd ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_ktree, int16_t fo_kobject,
int16_t fo_kobnext, int16_t fo_kchar, int16_t *fo_knxtobject, int16_t
*fo_knxtchar );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_keybd processes keyboard input for the control of
forms in dialog boxes. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_ktree</td>
<td valign="top"> Address of the object tree
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_kobject</td>
<td valign="top"> <a href="indexudo.html">Index</a> of the editable object
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_kobnext</td>
<td valign="top"> Unused, should be 0
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_kchar</td>
<td valign="top"> Pressed key's <a href="scancode.html">scancode</a> and ASCII value (as from <a href="evnt.html#evnt_keybd">evnt_keybd</a> or
<a href="evnt.html#evnt_multi">evnt_multi</a>)
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_knxtobject</td>
<td valign="top"> Editable object for next call
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_knxtchar</td>
<td valign="top"> 0 = Pressed key was a cursor key, [Tab] or [Return],
processed and handled by the call
<br>&gt;0 = Character passed to obj_edit without processing

</td></tr>
</table>

<br>User input may change the editable object (cursor or [Tab]
keys), or select the default object ([Return]).
<br>&nbsp;
<br><b>Note about <a href="magic.html">MagiC</a>, N.AES:</b> If the value 0x8765 is
specified as the object index, then keys will be processed that are
pressed together with the [Alternate] key. If a matching object is
found then the value 1 will be returned, the character deleted and the
appertaining object index passed in <i>fo_knxtobject.</i>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns 0 if an <a href="aes_fundamentals.html#EXIT">EXIT</a> object was selected, else a
positive number if the dialog should continue to be processed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_keybd">Binding</a> &nbsp; <a href="aes_structures.html#OBJECT">OBJECT</a> &nbsp; <a href="objc.html#objc_edit">objc_edit</a> &nbsp; <a href="#form_button">form_button</a> &nbsp; <a href="#form_wkeybd">form_wkeybd</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_keybd">8.11.7.1 Bindings for form_keybd</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_keybd">form_keybd</a> ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_ktree, int16_t fo_kobject,
int16_t fo_kobnext, int16_t fo_kchar, int16_t *fo_knxtobject, int16_t
*fo_knxtchar );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_keybd">form_keybd</a> (<a href="aes_structures.html#OBJECT">OBJECT</a> *fo_ktree, int16_t fo_kobject,
                    int16_t fo_kobnext, int16_t fo_kchar,
                    int16_t *fo_knxtobject,
                    int16_t *fo_knxtchar)
{
   int_in[0]  = fo_kobject;
   int_in[1]  = fo_kchar;
   int_in[2]  = fo_kobnext;
   addr_in[0] = fo_ktree;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (55);

   *fo_knxtobject = int_out[1];
   *fo_knxtchar   = int_out[2];

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">55    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">3     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">3     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">fo_kobject</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">fo_kchar</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">fo_kobnext</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fo_ktree</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fo_knxtobject</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+4</td>
  <td align="left" valign="top">int_out[2]</td>
  <td align="left" valign="top">fo_knxtchar</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_popup">8.11.8 form_popup</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form Popup« - Manage a popup menu.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 135
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_popup ( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t x, int16_t y );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_popup displays a popup menu on the screen and
takes over its management. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">tree</td>
<td valign="top"> Address of the object tree
</td></tr>

<tr><td nowrap="nowrap" valign="top">x</td>
<td valign="top"> X-coordinate, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">y</td>
<td valign="top"> Y-coordinate, around which the box is to be centered

</td></tr>
</table>

<br><b>Note:</b> If the parameters <i>x</i> and <i>y</i> have the
value 0, then the corresponding values from the object structure will
be respected, and the centering is abandoned. At all times the
function ensures that the complete popup is displayed on the screen.
<br>&nbsp;
<br>Selectable objects must have the status <a href="aes_fundamentals.html#SELECTABLE">SELECTABLE</a> and
<i>non-selectable</i> objects the status <a href="aes_fundamentals.html#DISABLED">DISABLED</a> assigned. The
object with the index 0 in the object tree should be of the type <a href="aes_fundamentals.html#G_BOX">G_BOX</a>
or <a href="aes_fundamentals.html#G_IBOX">G_IBOX</a>.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns the index of the selected object from the
popup menu, else the value -1.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> As of <a href="magic.html">MagiC</a> 1.11, but can also be inquired for by <a href="appl.html#UDO__25apgi_9">appl_getinfo</a>
(opcode 9), as other systems also understand this function.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_popup">Binding</a> &nbsp; <a href="aes_structures.html#OBJECT">OBJECT</a> &nbsp; <a href="#xfrm_popup">xfrm_popup</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_popup">8.11.8.1 Bindings for form_popup</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_popup">form_popup</a> ( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t x, int16_t y );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_popup">form_popup</a> (<a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t x, int16_t y)
{
   int_in[0]  = x;
   int_in[1]  = y;
   addr_in[0] = tree;

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(135) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">135   # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">x</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">y</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">tree</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_wbutton">8.11.9 form_wbutton</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form window button« - Simulate the clicking on an object in
a window.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 63
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_wbutton ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_btree, int16_t fo_bobject,
int16_t fo_bclicks, int16_t *fo_bnxtobj, int16_t whandle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_wbutton simulates the clicking on an object in a
window. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_btree</td>
<td valign="top"> Address of the object tree
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_bobject</td>
<td valign="top"> Object to be processed
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_bclicks</td>
<td valign="top"> Number of mouse clicks
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_bnxtobj</td>
<td valign="top"> New current object, or 0 if the next object has the status
<a href="aes_fundamentals.html#HIDDEN">HIDDEN</a> or <a href="aes_fundamentals.html#DISABLED">DISABLED</a>, or is not editable
</td></tr>

<tr><td nowrap="nowrap" valign="top">whandle</td>
<td valign="top"> Window ID

</td></tr>
</table>

<br><b>Note:</b> With a double-click on a <a href="aes_fundamentals.html#TOUCHEXIT">TOUCHEXIT</a> objec, bit 15
will be set in the parameter <i>fo_bnxtobj.</i>
<br>&nbsp;
<br>The function corresponds essentially to <a href="#form_button">form_button</a>, with the
difference that the rectangle list of a window is taken into account.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns 0 if an <a href="aes_fundamentals.html#EXIT">EXIT</a> object was selected, else a
positive value.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> As of <a href="magic.html">MagiC</a> Version 5.10
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_wbutton">Binding</a> &nbsp; <a href="aes_structures.html#OBJECT">OBJECT</a> &nbsp; <a href="evnt.html#evnt_multi">evnt_multi</a> &nbsp; <a href="#form_keybd">form_keybd</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_wbutton">8.11.9.1 Bindings for form_wbutton</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_wbutton">form_wbutton</a> ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_btree, int16_t fo_bobject,
int16_t fo_bclicks, int16_t *fo_bnxtobj, int16_t whandle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_wbutton">form_wbutton</a> (<a href="aes_structures.html#OBJECT">OBJECT</a> *fo_btree, int16_t fo_bobject,
                      int16_t fo_bclicks, int16_t *fo_bnxtobj,
                      int16_t whandle)
{
   int_in[0]  = fo_bobject;
   int_in[1]  = fo_bclicks;
   int_in[2]  = whandle;

   addr_in[0] = fo_btree;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (63);

   *fo_bnxtobj = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">63    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">3     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">fo_bobject</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">fo_bclicks</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">whandle</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fo_btree</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fo_bnxtobj</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_wkeybd">8.11.10 form_wkeybd</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form window keyboard« - Process keyboard input into a form
in a window.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 64
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_wkeybd ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_ktree, int16_t fo_kobject,
int16_t fo_kobnext, int16_t fo_kchar, int16_t *fo_knxtobject, int16_t
*fo_knxtchar, int16_t whandle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_wkeybd processes keyboard input into a form in a
window. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_ktree</td>
<td valign="top"> Address of the object tree
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_kobject</td>
<td valign="top"> <a href="indexudo.html">Index</a> of the editable object
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_kobnext</td>
<td valign="top"> Unused, should be 0
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_kchar</td>
<td valign="top"> Pressed key's <a href="scancode.html">scancode</a> and ASCII value (as from <a href="evnt.html#evnt_keybd">evnt_keybd</a> or
<a href="evnt.html#evnt_multi">evnt_multi</a>)
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_knxtobject</td>
<td valign="top"> Editable object for next call
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_knxtchar</td>
<td valign="top"> 0 = Pressed key was a cursor key, [Tab] or [Return],
processed and handled by the call
<br>&gt;0 = Character passed to obj_edit without processing
</td></tr>

<tr><td nowrap="nowrap" valign="top">whandle</td>
<td valign="top"> Window ID

</td></tr>
</table>

<br>User input may change the editable object (cursor or [Tab]
keys), or select the default object (Return).
<br>&nbsp;
<br><b>Note about <a href="magic.html">MagiC</a>, XaAES:</b> If the value 0x8765 is
specified as the object index, then keys will be processed that are
pressed together with the [Alternate] key. If a matching object is
found then the value 1 will be returned, the character deleted and the
appertaining object index passed in <i>fo_knxtobject.</i>
<br>&nbsp;
<br>This function essentially corresponds to <a href="#form_keybd">form_keybd</a> with the
difference that here the rectangle list of a window is taken into
account.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns 0 if an <a href="aes_fundamentals.html#EXIT">EXIT</a> object was selected, else a
positive number if the dialog should continue to be processed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> As of <a href="magic.html">MagiC</a> Version 5.10, XaAES.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_wkeybd">Binding</a> &nbsp; <a href="aes_structures.html#OBJECT">OBJECT</a> &nbsp; <a href="objc.html#objc_edit">objc_edit</a> &nbsp; <a href="#form_button">form_button</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_wkeybd">8.11.10.1 Bindings for form_wkeybd</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_wkeybd">form_wkeybd</a> ( <a href="aes_structures.html#OBJECT">OBJECT</a> *fo_ktree, int16_t fo_kobject,
int16_t fo_kobnext, int16_t fo_kchar, int16_t *fo_knxtobject, int16_t
*fo_knxtchar, int16_t whandle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_wkeybd">form_wkeybd</a> (<a href="aes_structures.html#OBJECT">OBJECT</a> *fo_ktree, int16_t fo_kobject,
                     int16_t fo_kobnext, int16_t fo_kchar,
                     int16_t *fo_knxtobject,
                     int16_t *fo_knxtchar, int16_t whandle)
{
   int_in[0]  = fo_kobject;
   int_in[1]  = fo_kchar;
   int_in[2]  = fo_kobnext;
   int_in[3]  = whandle;

   addr_in[0] = fo_ktree;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (64);

   *fo_knxtobject = int_out[1];
   *fo_knxtchar   = int_out[2];

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">64    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">4     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">3     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">fo_kobject</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">fo_kchar</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">fo_kobnext</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+6</td>
  <td align="left" valign="top">int_in[3]</td>
  <td align="left" valign="top">whandle</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fo_ktree</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fo_knxtobject</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+4</td>
  <td align="left" valign="top">int_out[2]</td>
  <td align="left" valign="top">fo_knxtchar</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_xdial">8.11.11 form_xdial</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form Xdialog space« - Reserve or release screen memory for a
dialog object when using Flydials.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 51
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_xdial ( int16_t fo_diflag, int16_t fo_dilittlx,
int16_t fo_dilittly, int16_t fo_dilittlw, int16_t fo_dilittlh, int16_t
fo_dibigx, int16_t fo_dibigy, int16_t fo_dibigw, int16_t fo_dibigh,
void **flydial );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_xdial takes on various tasks, depending on the
passed parameters. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_diflag</td>
<td valign="top"> <b>0 = <a href="form.html#FMD_START">FMD_START</a></b> reserves screen memory for the dialog
<br><b>3 = <a href="form.html#FMD_FINISH">FMD_FINISH</a></b> restores the screen and releases the buffer
used to save the background in
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dilittlx</td>
<td valign="top"> X-coordinate, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dilittly</td>
<td valign="top"> Y-coordinate of the top left corner,
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dilittlw</td>
<td valign="top"> Width, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dilittlh</td>
<td valign="top"> Height of the smallest growing or shrinking rectangle
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dibigx</td>
<td valign="top"> X-coordinate, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dibigy</td>
<td valign="top"> Y-coordinate of the top left corner,
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dibigw</td>
<td valign="top"> Width, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">fo_dibigh</td>
<td valign="top"> Height of the largest growing or shrinking rectangle
</td></tr>

<tr><td nowrap="nowrap" valign="top">flydial</td>
<td valign="top"> See below

</td></tr>
</table>

<br><b>Note:</b> If <i>flydial</i> is non-zero, a test is made
whether enough memory is available to save the background of the
dialog box. A pointer to this saved data is then stored in this
variable. If insufficient memory is available to save the background,
then the dialog box processed by <a href="#form_xdo">form_xdo</a> is not movable; in that case
also the dialog will display no 'fly corner' ('asses ear').
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> An error has arisen only if the value 0 is returned.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> When Flydials is in use, whose presence can be checked for with
<a href="appl.html#UDO__25apgi_14">appl_getinfo</a> (opcode 14).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_xdial">Binding</a> &nbsp; <a href="evnt.html#evnt_mesag">evnt_mesag</a> &nbsp; <a href="#form_dial">form_dial</a> &nbsp; <a href="graf.html#graf_growbox">graf_growbox</a> &nbsp; <a href="graf.html#graf_shrinkbox">graf_shrinkbox</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_xdial">8.11.11.1 Bindings for form_xdial</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_xdial">form_xdial</a> ( int16_t fo_diflag, int16_t fo_dilittlx,
int16_t fo_dilittly, int16_t fo_dilittlw, int16_t fo_dilittlh, int16_t
fo_dibigx, int16_t fo_dibigy, int16_t fo_dibigw, int16_t fo_dibigh,
void **flydial );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_xdial">form_xdial</a> (int16_t fo_diflag, int16_t fo_dilittlx,
                    int16_t fo_dilittly, int16_t fo_dilittlw,
                    int16_t fo_dilittlh, int16_t fo_dibigx,
                    int16_t fo_dibigy, int16_t fo_dibigw,
                    int16_t fo_dibigh, void **flydial)
{
   int_in[0]  = fo_diflag;
   int_in[1]  = fo_dilittlx;
   int_in[2]  = fo_dilittly;
   int_in[3]  = fo_dilittlw;
   int_in[4]  = fo_dilittlh;
   int_in[5]  = fo_dibigx;
   int_in[6]  = fo_dibigy;
   int_in[7]  = fo_dibigw;
   int_in[8]  = fo_dibigh;
   addr_in[0] = flydial;
   addr_in[1] = 0;            /* reserved */

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(51) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">51    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">9     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">2     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">fo_diflag</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">fo_dilittlx</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">fo_dilittly</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+6</td>
  <td align="left" valign="top">int_in[3]</td>
  <td align="left" valign="top">fo_dilittlw</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+8</td>
  <td align="left" valign="top">int_in[4]</td>
  <td align="left" valign="top">fo_dilittlh</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+10</td>
  <td align="left" valign="top">int_in[5]</td>
  <td align="left" valign="top">fo_dibigx</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+12</td>
  <td align="left" valign="top">int_in[6]</td>
  <td align="left" valign="top">fo_dibigy</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+14</td>
  <td align="left" valign="top">int_in[7]</td>
  <td align="left" valign="top">fo_dibigw</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+16</td>
  <td align="left" valign="top">int_in[8]</td>
  <td align="left" valign="top">fo_dibigh</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">flydial</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">0</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_xdo">8.11.12 form_xdo</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form do Xdialog« - Process an extended dialog with user
input.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 50
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_xdo ( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t startob, int16_t
*lastcrsr, <a href="aes_structures.html#XDO_INF">XDO_INF</a> *tabs, void *flydial );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_xdo takes on the handling of user actions in a
dialog form. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">tree</td>
<td valign="top"> Pointer to object tree of the dialog box
</td></tr>

<tr><td nowrap="nowrap" valign="top">startob</td>
<td valign="top"> <a href="indexudo.html">Index</a> of the editable object where the text cursor should be at
the opening of the dialog (the object must have the <a href="aes_fundamentals.html#EDITABLE">EDITABLE</a> flag
set); it will be 0 if the object tree contains no editable object
</td></tr>

<tr><td nowrap="nowrap" valign="top">lastcrsr</td>
<td valign="top"> Contains the index of the object where the cursor was at the
closing of the dialog
</td></tr>

<tr><td nowrap="nowrap" valign="top">tabs</td>
<td valign="top"> Pointer to keyboard tables, or NULL
</td></tr>

<tr><td nowrap="nowrap" valign="top">flydial</td>
<td valign="top"> The corresponding parameter returned by <a href="#form_xdial">form_xdial</a>, or NULL if
foregoing Flydials

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> This will be the index of the object used to close the dialog.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The function is only available under <a href="magic.html">MagiC</a> (as of Version 2.0).
The presence of the Flydials and keyboard tables as well as the
possibility of establishing the last cursor position can be inquired
for with <a href="appl.html#UDO__25apgi_14">appl_getinfo</a> (opcode 14).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_xdo">Binding</a> &nbsp; <a href="#form_do">form_do</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_xdo">8.11.12.1 Bindings for form_xdo</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_xdo">form_xdo</a> ( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t startob, int16_t
*lastcrsr, <a href="aes_structures.html#XDO_INF">XDO_INF</a> *tabs, void *flydial );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_xdo">form_xdo</a> (<a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t startob,
                  int16_t *lastcrsr,
                  <a href="aes_structures.html#XDO_INF">XDO_INF</a> *tabs, void *flydial)
{
   int_in[0]  = startob;
   addr_in[0] = tree;
   addr_in[1] = tabs;
   addr_in[2] = flydial;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (50);

   *lastcrsr = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">50    # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">1     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">3     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">startob</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">tree</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">tabs</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">flydial</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">lastcrsr</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="form_xerr">8.11.13 form_xerr</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Form Xerror« - Display an error box for TOS errors
(<a href="magic.html">MagiC</a>).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 136
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t form_xerr ( int32_t errcode, int8_t *errfile );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call form_xerror outputs an error number as a plain text
description (i.e. in an alert box form that contains a stop sign icon
at the left side of the box, a text string holding an explanatory
error message or just 'TOS error #X' and a 'Cancel' button). In
contrast to <a href="#form_error">form_error</a>, there is no need for translation from the
TOS to the MS-DOS format.
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">errcode</td>
<td valign="top"> Normal, negative GEMDOS or BIOS error-code; if this is <a href="gemdos_errors.html#EBREAK">EBREAK</a>
(program termination with [Control]-[C]) or <a href="gemdos_errors.html#E_OK">E_OK</a> (no error) then no
alert box will be displayed
</td></tr>

<tr><td nowrap="nowrap" valign="top">errfile</td>
<td valign="top"> Path of the file in which the error arose. With a NULL-pointer
this parameter will be ignored; -1 means that the message will be
prefaced with 'The program returned:'

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> This will be the index (1-3) of the selected exit button.
However, with current GEM versions only one button is available in
error alerts.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The function is available only under <a href="magic.html">MagiC</a> (as of Version 2.0).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20form_xerr">Binding</a> &nbsp; <a href="#form_error">form_error</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20form_xerr">8.11.13.1 Bindings for form_xerr</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#form_xerr">form_xerr</a> ( int32_t errcode, int8_t *errfile );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#form_xerr">form_xerr</a> (int32_t errcode, int8_t *errfile)
{
   int_in[0]  = errcode (High);
   int_in[1]  = errcode (Low);
   addr_in[0] = errfile;

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(136) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">136   # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">errcode (High)</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">errcode (Low)</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">errfile</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="xfrm_popup">8.11.14 xfrm_popup</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »XForm popup« - Manage a popup menu (extended <a href="magic.html">MagiC</a> version).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 135
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t xfrm_popup( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t x, int16_t y, int16_t
firstscrlob, int16_t lastscrlob, int16_t nlines, void cdecl
(*init)(<a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t scrollpos, int16_t nlines, void *param),
void *param, int16_t *lastscrlpos )
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call xfrm_popup displays a popup menu on the screen, and
takes on its management. The followiong apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">tree</td>
<td valign="top"> Address of the object tree
</td></tr>

<tr><td nowrap="nowrap" valign="top">x</td>
<td valign="top"> X-coordinate, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">y</td>
<td valign="top"> Y-coordinate around which the box is to be centered
</td></tr>

<tr><td nowrap="nowrap" valign="top">firstscrlob</td>
<td valign="top"> Object index of the first scrollable object
</td></tr>

<tr><td nowrap="nowrap" valign="top">lastscrlob</td>
<td valign="top"> Object index of the last scrollable object
</td></tr>

<tr><td nowrap="nowrap" valign="top">nlines</td>
<td valign="top"> Number of lines actually present
</td></tr>

<tr><td nowrap="nowrap" valign="top">init</td>
<td valign="top"> Callback routine for translating the objects. <i>tree</i>,
<i>param</i> and <i>nlines</i> are the parameters that were passed
in xfrm_popup. <i>scrollpos</i> specifies the current scroll
position. It lies at: 0..(nlines-(lastscrlob-firstscrlob+1). If the
popup should not scroll, <i>init</i> == NULL must be passed.
</td></tr>

<tr><td nowrap="nowrap" valign="top">param</td>
<td valign="top"> User-defined parameter
</td></tr>

<tr><td nowrap="nowrap" valign="top">lastscrlpos</td>
<td valign="top"> Last scroll position

</td></tr>
</table>

<br><b>Note:</b> If the parameters <i>x</i> and <i>y</i> have the
value 0, then the corresponding values from the object structure will
be respected, and the centering is abandoned. At all times the
function ensures that the complete popup is displayed on the screen.
<br>&nbsp;
<br>Selectable objects must have the flag <a href="aes_fundamentals.html#SELECTABLE">SELECTABLE</a> and
<i>non-selectable</i> objects the status <a href="aes_fundamentals.html#DISABLED">DISABLED</a> assigned. The
object with the index 0 in the object tree should be of the type <a href="aes_fundamentals.html#G_BOX">G_BOX</a>
or <a href="aes_fundamentals.html#G_IBOX">G_IBOX</a>.
<br>&nbsp;

<ol class="UDO_env_enumerate">
<li><p> The object tree is initialized automatically by a call of the
<i>init</i> routine before the first drawing action.
<br>&nbsp;
</p></li>
<li><p> The variable <i>scrollpos</i> need not be initialized, as the
system always start at scrollpos 0.
<br>&nbsp;
</p></li>
<li><p> The <i>init</i> routine is responsible for initializing the
first and/or last scroll object with an arrow.
<br>&nbsp;
</p></li>
<li><p> The scrollable objects are <i>firstscrlob</i> ...
<i>lastscrlob.</i> The object indices must be consecutive numbers.
The objects must lie directly below each other and all must have the
same size.
<br>&nbsp;
</p></li>
</ol>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns the index of the selected object from the
popup menu, else the value -1.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The function is available as of <a href="magic.html">MagiC</a> 5.03.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20xfrm_popup">Binding</a> &nbsp; <a href="aes_structures.html#OBJECT">OBJECT</a> &nbsp; <a href="#form_popup">form_popup</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20xfrm_popup">8.11.14.1 Bindings for xfrm_popup</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#xfrm_popup">xfrm_popup</a>( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t x, int16_t y, int16_t
firstscrlob, int16_t lastscrlob, int16_t nlines, void cdecl
(*init)(<a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t scrollpos, int16_t nlines, void *param),
void *param, int16_t *lastscrlpos )
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#xfrm_popup">xfrm_popup</a>( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t x, int16_t y,
                    int16_t firstscrlob, int16_t lastscrlob,
                    int16_t nlines,
                    void  cdecl (*init)(<a href="aes_structures.html#OBJECT">OBJECT</a> *tree,
                    int16_t scrollpos,
                    int16_t nlines, void *param),
                    void *param, int16_t *lastscrlpos )
{
   int_in[0]  = x;
   int_in[1]  = y;
   int_in[2]  = firstscrlob;
   int_in[3]  = lastscrlob;
   int_in[4]  = nlines;
   int_in[5]  = *lastscrlpos;
   addr_in[0] = tree;
   addr_in[1] = init;
   addr_in[2] = param;

   int_out[1] = *lastscrlpos;   /* Preset this */

   <a href="aes_fundamentals.html#crys_if">crys_if</a>(135)

   *lastscrlpos = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">135   # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">6     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">3     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">x</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">y</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">firstscrlob</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+6</td>
  <td align="left" valign="top">int_in[3]</td>
  <td align="left" valign="top">lastscrlob</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+8</td>
  <td align="left" valign="top">int_in[4]</td>
  <td align="left" valign="top">nlines</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+10</td>
  <td align="left" valign="top">int_in[5]</td>
  <td align="left" valign="top">lastscrlpos</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">tree</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">init</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">param</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">lastscrlpos</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="x_form_center">8.11.15 x_form_center</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »XForm centered object« - Centre an object on the screen
(extended version for Geneva).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 28944
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t x_form_center( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t *cx, int16_t *cy,
int16_t *cw, int16_t *ch );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The function x_form_center will center a dialog on the screen,
taking into account all object attributes that can affect the outer
border. The following apply:
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Parameter</td>
  <td align="left" valign="top">Meaning</td>
</tr>
<tr>
  <td align="left" valign="top"><i>tree</i></td>
  <td align="left" valign="top">Object tree being modified</td>
</tr>
<tr>
  <td align="left" valign="top"><i>cx</i></td>
  <td align="left" valign="top">X-coordinate of the outer rectangle</td>
</tr>
<tr>
  <td align="left" valign="top"><i>cy</i></td>
  <td align="left" valign="top">Y-coordinate of the outer rectangle</td>
</tr>
<tr>
  <td align="left" valign="top"><i>cw</i></td>
  <td align="left" valign="top">Width of the outer rectangle</td>
</tr>
<tr>
  <td align="left" valign="top"><i>ch</i></td>
  <td align="left" valign="top">Height of the outer rectangle</td>
</tr>
</table>
</div>

<br>This function is essentially identical in purpose to the AES
<a href="#form_center">form_center</a> call, however it takes all attributes which can affect the
size of the outer border of the object tree (<a href="aes_fundamentals.html#SHADOWED">SHADOWED</a>, <a href="aes_fundamentals.html#OUTLINED">OUTLINED</a>, 3D
effect, etc.) into consideration. The returned rectangle describes the
entire area containing these effects.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function always return a value 1.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The function is only available under Geneva.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20x_form_center">Binding</a> &nbsp; <a href="#form_center">form_center</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20x_form_center">8.11.15.1 Bindings for x_form_center</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#x_form_center">x_form_center</a>( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t *cx, int16_t *cy,
int16_t *cw, int16_t *ch );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#x_form_center">x_form_center</a>( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t *cx, int16_t *cy,
                       int16_t *cw, int16_t *ch )
{
   addr_in[0] = tree;

   <a href="aes_fundamentals.html#crys_if">crys_if</a>(28944);

   *cx = int_out[1];
   *cy = int_out[2];
   *cw = int_out[3];
   *ch = int_out[4];

   return (int_out[0]);
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">28944 # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">5     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">tree</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">cx</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+4</td>
  <td align="left" valign="top">int_out[2]</td>
  <td align="left" valign="top">cy</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+6</td>
  <td align="left" valign="top">int_out[3]</td>
  <td align="left" valign="top">cw</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+8</td>
  <td align="left" valign="top">int_out[4]</td>
  <td align="left" valign="top">ch</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="x_form_error">8.11.16 x_form_error</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »XForm error« - Display an error box for TOS errors
(Geneva).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 28945
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t x_form_error ( uint8_t *fmt, int16_t errnum );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The function x_form_error takes the error-code specified by
<i>errnum</i> and finds an appropriate error-message string. It then
inserts this text into a program-defined alert string and displays an
alert.
<br>&nbsp;
<br>The <i>fmt</i> should be in standard <a href="#form_alert">form_alert</a> format, with a
'%s' to indicate the location where the error-message should be
inserted. Since an alert can contain no more than five lines of 30
characters each, and the predefined error-messages can take up to
three lines, there should be no more than two lines of text
surrounding the inserted error text.
<br>&nbsp;
<br>Example:
<br>&nbsp;
<pre>if( x_form_error( &quot;[1][Error!|%s][Continue|Quit]&quot;, -33 ) == 1 )
  continue...
else quit...
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> This will be the index (1-3) of the selected exit button.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The function is only available under Geneva.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20x_form_error">Binding</a> &nbsp; <a href="#form_error">form_error</a> &nbsp; <a href="#form_xerr">form_xerr</a> &nbsp; <a href="naes_formerror.html">form_error in N.AES</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20x_form_error">8.11.16.1 Bindings for x_form_error</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#x_form_error">x_form_error</a> ( uint8_t *fmt, int16_t errnum );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#x_form_error">x_form_error</a> ( uint8_t *fmt, int16_t errnum )
{
   int_in[0] = errnum;

   addr_in[0] = fmt;

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(28945) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">28945 # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">1     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">enum</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fmt</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="x_form_filename">8.11.17 x_form_filename</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »XForm filename« - Convert to/from a standard <a href="gemdos_main.html">GEMDOS</a> filename
in editable field in a dialog.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 28996
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t x_form_filename( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t obj, int16_t
to_from, uint8_t *string );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">tree</td>
<td valign="top"> Object tree of the dialog containing the editable field
</td></tr>

<tr><td nowrap="nowrap" valign="top">obj</td>
<td valign="top"> <a href="indexudo.html">Index</a> of the editable object in the tree
</td></tr>

<tr><td nowrap="nowrap" valign="top">to_from</td>
<td valign="top"> Convert to (0) or from (1) the field
</td></tr>

<tr><td nowrap="nowrap" valign="top">string</td>
<td valign="top"> Pointer to the string containing the <a href="gemdos_main.html">GEMDOS</a>-formatted
(FILENAME.EXT) string.

</td></tr>
</table>

<br>Since filenames are typically entered in a <a href="gem_about.html">GEM</a> dialog using the
period to separate the filename from the extension, and filenames with
less than eight characters before the period are padded with spaces,
converting to and from the editable field can be a difficult task.
<br>&nbsp;
<br>When the mode parameter passed to x_form_filename is 0, the
string is converted from the FILENAME.EXT format to the editable field
format. When mode is 1, the filename is converted from the editable
field and written into string in FILENAME.EXT format. Note that this
function assumes that the editable field is an object of type <a href="aes_fundamentals.html#G_FTEXT">G_FTEXT</a>
or <a href="aes_fundamentals.html#G_FBOXTEXT">G_FBOXTEXT</a> and uses the te_ptmplt string &quot;________.___&quot;.
<br>&nbsp;
<br>Example:
<br>&nbsp;
<pre><a href="aes_structures.html#OBJECT">OBJECT</a> *tree;
char name[13] = &quot;<a href="aes_fundamentals.html#DEFAULT">DEFAULT</a>.TXT&quot;;

x_form_filename( tree, object, 0, name );
<a href="#form_do">form_do</a>( tree, object );
x_form_filename( tree, object, 1, name );
/* &quot;name&quot; now contains what the user changed it to */
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> Return always 1.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The function is only available under Geneva.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20x_form_filename">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20x_form_filename">8.11.17.1 Bindings for x_form_filename</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#x_form_filename">x_form_filename</a>( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t obj, int16_t
to_from, uint8_t *string );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#x_form_filename">x_form_filename</a>( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t obj,
                         int16_t to_from, uint8_t *string )
{
   int_in[0] = obj;
   int_in[1] = to_from;

   addr_in[0] = tree;
   addr_in[1] = string;

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(28996) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">28996 # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">2     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">obj</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">to_from</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">tree</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">string</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="x_form_mouse">8.11.18 x_form_mouse</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »XForm mouse« - Handle mouse clicks in a dialog, including
editable cursor movement.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 28997
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t x_form_mouse( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t mouse_x, int16_t
mouse_y, int16_t clicks, int16_t *edit_obj, int16_t *next_obj, int16_t
*edit_idx );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">tree</td>
<td valign="top"> Object tree of the dialog
</td></tr>

<tr><td nowrap="nowrap" valign="top">mouse_x</td>
<td valign="top"> X coordinate of the mouse pointer
</td></tr>

<tr><td nowrap="nowrap" valign="top">mouse_y</td>
<td valign="top"> Y coordinate of the mouse pointer
</td></tr>

<tr><td nowrap="nowrap" valign="top">clicks</td>
<td valign="top"> Number of clicks to be processed
</td></tr>

<tr><td nowrap="nowrap" valign="top">edit_obj</td>
<td valign="top"> Object currently having the edit cursor
</td></tr>

<tr><td nowrap="nowrap" valign="top">next_obj</td>
<td valign="top"> Object selected with the mouse
</td></tr>

<tr><td nowrap="nowrap" valign="top">edit_idx</td>
<td valign="top"> Position of edit cursor within field

</td></tr>
</table>

<br>This function begins by calling <a href="#form_button">form_button</a>. If neither an <a href="aes_fundamentals.html#EXIT">EXIT</a>
nor a <a href="aes_fundamentals.html#TOUCHEXIT">TOUCHEXIT</a> button is selected, and the object is <a href="aes_fundamentals.html#EDITABLE">EDITABLE</a>, then
the editable cursor is moved to the character within the editable
field which is under the mouse pointer.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> 0 = An object was selected
<br>1 = No object
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">edit_obj</td>
<td valign="top"> New object having the edit cursor
</td></tr>

<tr><td nowrap="nowrap" valign="top">next_obj</td>
<td valign="top"> Selected object, or 0 for none
</td></tr>

<tr><td nowrap="nowrap" valign="top">edit_idx</td>
<td valign="top"> New edit cursor position

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The function is only available under Geneva.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Form_20library">Form library</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20x_form_mouse">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20x_form_mouse">8.11.18.1 Bindings for x_form_mouse</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#x_form_mouse">x_form_mouse</a>( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t mouse_x, int16_t
mouse_y, int16_t clicks, int16_t *edit_obj, int16_t *next_obj, int16_t
*edit_idx );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#x_form_mouse">x_form_mouse</a>( <a href="aes_structures.html#OBJECT">OBJECT</a> *tree, int16_t mouse_x, int16_t
mouse_y, int16_t clicks, int16_t *edit_obj, int16_t *next_obj,
int16_t *edit_idx )
{
   int_in[0] = mouse_x;
   int_in[1] = mouse_y;
   int_in[2] = clicks;
   int_in[3] = edit_obj;
   int_in[4] = next_obj;
   int_in[5] = edit_idx;

   addr_in[0] = tree;

   <a href="aes_fundamentals.html#crys_if">crys_if</a>(28997);

   *edit_obj = int_out[1];
   *next_obj = int_out[2];
   *edit_idx = int_out[3];

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">28997 # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">6     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">4     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">tree</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">mouse_x</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">mouse_y</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">clicks</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+6</td>
  <td align="left" valign="top">int_in[3]</td>
  <td align="left" valign="top">edit_obj</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+8</td>
  <td align="left" valign="top">int_in[4]</td>
  <td align="left" valign="top">next_obj</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+10</td>
  <td align="left" valign="top">int_in[5]</td>
  <td align="left" valign="top">edit_idx</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">edit_obj</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+4</td>
  <td align="left" valign="top">int_out[2]</td>
  <td align="left" valign="top">next_obj</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+6</td>
  <td align="left" valign="top">int_out[3]</td>
  <td align="left" valign="top">edit_idx</td>
</tr>
</table>
</div>


</td></tr>
</table>

<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_FOOT" href="fslx.html"><img src="udo_lf.gif" alt="Extended file-selectors" title="Extended file-selectors" border="0" width="24" height="24">Extended file-selectors</a>
<a name="UDO_nav_rg_FOOT" href="geneva_function.html"><img src="udo_rg.gif" alt="Geneva library" title="Geneva library" border="0" width="24" height="24">Geneva library</a>
</body>
</html>
