<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/08/02 -->
<html lang="en">
<head>
<title>
The documentation for TOS: Memory Descriptor (MD) in TOS
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="typedefs.html"><img src="udo_up.gif" alt="Type definitions" title="Type definitions" border="0" width="24" height="24">Type definitions</a>
<a name="UDO_nav_lf_HEAD" href="magic_MCB.html"><img src="udo_lf.gif" alt="Memory-Control-Block (MCB) in MagiC" title="Memory-Control-Block (MCB) in MagiC" border="0" width="24" height="24">Memory-Control-Block (MCB) in MagiC</a>
<a name="UDO_nav_rg_HEAD" href="MRETS.html"><img src="udo_rg.gif" alt="MRETS" title="MRETS" border="0" width="24" height="24">MRETS</a>

<hr>

<h1><a name="Memory_20Descriptor_20_28MD_29_20in_20TOS">I.11 Memory Descriptor (MD) in TOS</a></h1>
<a name="Memory_20management_20in_20TOS"></a>
<a name="TOS_2C_20Memory_20management_20in"></a>
<pre>typedef struct md
{
    struct md *m_link;      /* Pointer to next <a href="bios_structures.html#MD">MD</a>         */
    int32_t      m_start;   /* Start address of the block */
    int32_t      m_length;  /* Length of the block        */
    <a href="gemdos_structures.html#BASEPAGE">BASEPAGE</a>  *m_own;       /* Pointer to the basepage    */
} <a href="bios_structures.html#MD">MD</a>;
</pre>
<p><b>Note:</b> The component <i>m_own</i> here points to the
basepage of the process to which the memory block belongs.
</p>
<p>These structures are administered in the internal memory
management of TOS (but <i>not</i> of <a href="magic.html">MagiC</a>!). These descriptors,
as far as they are used, hang in three memory lists, namely for free
blocks, occupied blocks and for the next block to be occupied
(mem_rover). With the mem_rover concept one attempts to achieve that
consecutive <a href="gemdos_memory.html#Malloc">Malloc</a> calls reserve consecutive memory if possible (this
has been described as an error already elsewhere). This is intended to
reduce memory segmentation.
</p>
<p><b>This idea is unusable if several programs are running
simultaneously and call Mallocs alternately, however</b>. The concept
implemented by Atari has the advantage that it is not sensitive to
programs that run amuck, since the MDs lie is system memory, far away
from user memory. A known disadvantage of the described concept is
that only a very restricted number of Malloc calls are possible, since
every call swallows an <a href="bios_structures.html#MD">MD</a> of the limited system memory; this is also
massively burdened by opened folders and files. A further disadvantage
of the TOS memory management: If a program overspills a memory
block, i.e. writes past its end, then this generally passes completely
unnoticed.
</p>
<p>Specially in multitasking systems the danger of an overwritten
memory block is very much higher than in TOS. Furthermore, the
number of memory blocks required, as well as those for folders (each
program has its own files and standard directories) is appreciably
higher. For these resons MagiC has a completely different concept; in
that there is only one memory list whose pointers point to the first
<a href="magic_MCB.html#MCB">MCB</a>.
</p>
<p>See also: <a href="gemdos_about.html">About the GEMDOS</a> &nbsp; <a href="magic_MCB.html#MCB">MCB</a> &nbsp; <a href="bios_structures.html#MPB">MPB</a> &nbsp; <a href="gemdos_memory.html">Memory management</a> &nbsp;
<a href="bios_sysvars.html#themd">themd</a>
</p>
<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="typedefs.html"><img src="udo_up.gif" alt="Type definitions" title="Type definitions" border="0" width="24" height="24">Type definitions</a>
<a name="UDO_nav_lf_FOOT" href="magic_MCB.html"><img src="udo_lf.gif" alt="Memory-Control-Block (MCB) in MagiC" title="Memory-Control-Block (MCB) in MagiC" border="0" width="24" height="24">Memory-Control-Block (MCB) in MagiC</a>
<a name="UDO_nav_rg_FOOT" href="MRETS.html"><img src="udo_rg.gif" alt="MRETS" title="MRETS" border="0" width="24" height="24">MRETS</a>
</body>
</html>
