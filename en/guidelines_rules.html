<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/08/02 -->
<html lang="en">
<head>
<title>
The documentation for TOS: Three important programming rules
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="guidelines.html"><img src="udo_up.gif" alt="Programming guidelines" title="Programming guidelines" border="0" width="24" height="24">Programming guidelines</a>
<a name="UDO_nav_lf_HEAD" href="guidelines.html"><img src="udo_lf.gif" alt="Programming guidelines" title="Programming guidelines" border="0" width="24" height="24">Programming guidelines</a>
<a name="UDO_nav_rg_HEAD" href="guidelines_styles.html"><img src="udo_rg.gif" alt="Style guidelines" title="Style guidelines" border="0" width="24" height="24">Style guidelines</a>

<hr>

<h1><a name="Three_20important_20programming_20rules">10.1 Three important programming rules</a></h1>
<p>As the TOS operating system is relatively cleanly structured
in several layers, all programmers should keep the following three
rules at the back of their mind when creating an application:
</p>
<ul>
<li><p> <b>Never</b> intermix calls from different operating system
layers for one task! <b>Example:</b> In GEM programs the mouse and
keyboard are interrogated via AES, and not perhaps via the BIOS.
Disregarding this rule can lead to conflicts between the various
layers.
<br>&nbsp;
</p></li>
<li><p> <b>Never</b> start with any unsafe assumptions about internal
coherence between the individual layers. <b>Example:</b> A GEMDOS
drive can lie both on a BIOS as well as a <a href="xbios_metados.html">MetaDOS</a> device. The mouse
normally hangs on the keyboard chip, but it does not have to (with new
hardware, keyboard interfaces etc.)
<br>&nbsp;
</p></li>
<li><p> <b>Always</b> use the highest possible operating system level
for a task. <b>Example:</b> Though the language to be used could be
obtained from the operating system header, it is better to use the
<a href="bios_cookiejar.html#Cookie_2C_20_AKP">_AKP</a> cookie or the function <a href="appl.html#appl_getinfo">appl_getinfo</a> for this.
<br>&nbsp;
</p></li>
</ul>

<p><b>Beyond this many further programming rules exist, which
ought to be well-known but which are not heeded unfortunately by all
applications. Some examples:</b>
</p>
<ul>
<li><p> Only allocate as much memory as absolutely necessary, so that
in a multitasking environment other processes too can be launched or
work sensibly
<br>&nbsp;
</p></li>
<li><p> Entry to the supervisor-mode should be <i>avoided</i> as much
as possible, as this is actually intended only for the operating
system, and in many environments <i>no</i> task-switching takes place
when a process is in this mode
<br>&nbsp;
</p></li>
<li><p> Never write directly to screen memory, but always fall back to
the relevant GEM functions (AES, VDI)
<br>&nbsp;
</p></li>
<li><p> Never access memory that does not belong to that particular
program, or has been made accessible to it, since this will give rise
to an exception on systems with memory protection; also, memory should
always be allocated in such a way that other processes should
preferably <i>not</i> be able to access the same block
<br>&nbsp;
</p></li>
</ul>

<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="guidelines.html"><img src="udo_up.gif" alt="Programming guidelines" title="Programming guidelines" border="0" width="24" height="24">Programming guidelines</a>
<a name="UDO_nav_lf_FOOT" href="guidelines.html"><img src="udo_lf.gif" alt="Programming guidelines" title="Programming guidelines" border="0" width="24" height="24">Programming guidelines</a>
<a name="UDO_nav_rg_FOOT" href="guidelines_styles.html"><img src="udo_rg.gif" alt="Style guidelines" title="Style guidelines" border="0" width="24" height="24">Style guidelines</a>
</body>
</html>
