<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/08/02 -->
<html lang="en">
<head>
<title>
The documentation for TOS: Extended file-selectors
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_HEAD" href="wind.html"><img src="udo_lf.gif" alt="Window library" title="Window library" border="0" width="24" height="24">Window library</a>
<a name="UDO_nav_rg_HEAD" href="form.html"><img src="udo_rg.gif" alt="Form library" title="Form library" border="0" width="24" height="24">Form library</a>

<hr>

<h1><a name="Extended_20file-selectors">8.10 Extended file-selectors</a></h1>
<p>The following functions were introduced with <a href="magic.html">MagiC</a> 4, and permit
management of the file-selector:
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_close">fslx_close</a></td>
<td valign="top"> Closes the file-selector and releases memory
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_do">fslx_do</a></td>
<td valign="top"> Faster call-up of the file-selector
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_evnt">fslx_evnt</a></td>
<td valign="top"> Releases file-selector for use
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_getnxtfile">fslx_getnxtfile</a></td>
<td valign="top"> Obtains all further selected entries
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_open">fslx_open</a></td>
<td valign="top"> Initializes and opens file-selector
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_set_flags">fslx_set_flags</a></td>
<td valign="top"> Sets certain flags for the whole system

</td></tr>
</table>

<p><b>Note:</b> The existence of these functions can be checked
with a call of <a href="appl.html#UDO__25apgi_7">appl_getinfo</a> (opcode 7).
</p>
<p>The main advantage of using these routines lies in the ability
of the functions specified here to work also with alternative
file-systems (catchword: long filenames).
</p>
<p>See also:
<br><a href="#File-selector_20as_20a_20dialog">File-selector as a dialog</a> &nbsp; <a href="#File-selector_20in_20a_20window">File-selector in a window</a> &nbsp; <a href="#Operation_20of_20file-selectors_20from_20MagiC_204_20onwards">Operation of file-selectors</a>
</p>
<h3><a name="fslx_close">8.10.1 fslx_close</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File selectionX close« - Close the file-selector and release
memory.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 191
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t fslx_close ( void *fsd );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call fslx_close closes the file-selector, and releases the
specified descriptor. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fsd</td>
<td valign="top"> Descriptor that was passed at the successful opening of a
file-selector window

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns the value 1 if successful, else the value
0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The presence of this call should be checked for using <a href="appl.html#UDO__25apgi_7">appl_getinfo</a>
(opcode 7).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Extended_20file-selectors">Extended file-selectors</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20fslx_close">Binding</a> &nbsp; <a href="#fslx_open">fslx_open</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20fslx_close">8.10.1.1 Bindings for fslx_close</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fslx_close">fslx_close</a> ( void *fsd );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fslx_close">fslx_close</a> ( void *fsd )
{
   addr_in[0] = fsd;
   <a href="aes_fundamentals.html#crys_if">crys_if</a> (191);

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">191   # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fsd</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_do">8.10.2 fslx_do</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File selectionX do« - Faster call-up of the file-selector.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 194
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> void *fslx_do ( int8_t *title, int8_t *path, int16_t pathlen,
int8_t *fname, int16_t fnamelen, int8_t *patterns, <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a>
*filter, int8_t *paths, int16_t *sort_mode, int16_t flags, int16_t
*button, int16_t *nfiles, int8_t **pattern );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call fslx_do displays a file-selector box on the screen,
and takes over its handling. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">title</td>
<td valign="top"> Title of the file-selector, or NULL
</td></tr>

<tr><td nowrap="nowrap" valign="top">path</td>
<td valign="top"> Complete path, which starts with the drive letter, and ends
with '\'
</td></tr>

<tr><td nowrap="nowrap" valign="top">pathlen</td>
<td valign="top"> Length of the path-receiving buffer
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Buffer for the filename
</td></tr>

<tr><td nowrap="nowrap" valign="top">fnamelen</td>
<td valign="top"> Length of the filename-receiving buffer
</td></tr>

<tr><td nowrap="nowrap" valign="top">patterns</td>
<td valign="top"> Filename masks such as '*.TXT', '*.PRG' or '*.IMG'; these
alternative selectable masks are separated by EOS and terminated by
EOS, EOS
</td></tr>

<tr><td nowrap="nowrap" valign="top">filter</td>
<td valign="top"> <b>Filter function</b> which is called before the mask
comparison (or NULL); if this returns the value 0 the file is invalid,
while a value of 1 will display the filename
</td></tr>

<tr><td nowrap="nowrap" valign="top">paths</td>
<td valign="top"> Path history; the alternative selectable paths are separated by
EOS and terminated by EOS, EOS
</td></tr>

<tr><td nowrap="nowrap" valign="top">sort_mode</td>
<td valign="top"> <b>Sort-mode for the display:</b>
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">By name</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">By date</td>
</tr>
<tr>
  <td align="left" valign="top">2</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">By size</td>
</tr>
<tr>
  <td align="left" valign="top">3</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">By type</td>
</tr>
<tr>
  <td align="left" valign="top">4</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">Unsorted (physical order)</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">flags</td>
<td valign="top"> <b>Various settings:</b>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> <a href="fslx.html#DOSMODE">DOSMODE</a> - This is the compatibility mode, also used by
fsel_(ex)input, and returns filenames basically in the 8+3 format; for
this all subdirectories are called with <a href="gemdos_directory.html#Dopendir">Dopendir</a> (name, 1)
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top"> Do <i>not</i> follow symbolic links; so in that case the date,
time as well as the <a href="gemdos_structures.html#XATTR">XATTR</a> structure that will pass <i>filter</i> will
belong to the link itself
</td></tr>

<tr><td nowrap="nowrap" valign="top">8 =</td>
<td valign="top"> Multiple selection - In this case several files can be selected
and passed at a time

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">button</td>
<td valign="top"> <a href="indexudo.html">Index</a> of the selected button:
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'Cancel' button</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'OK' button</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">nfiles</td>
<td valign="top"> Number of selected files
</td></tr>

<tr><td nowrap="nowrap" valign="top">pattern</td>
<td valign="top"> Selected file mask, such as '*.TXT'

</td></tr>
</table>

<br><b>Note:</b> The function is a combination of <a href="#fslx_open">fslx_open</a> and
<a href="#fslx_evnt">fslx_evnt</a>, but uses a non-windowed dialog box.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns a pointer to a descriptor, which is to be
specified for the other routines.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The presence of this call should be checked for using <a href="appl.html#UDO__25apgi_7">appl_getinfo</a>
(opcode 7).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Extended_20file-selectors">Extended file-selectors</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20fslx_do">Binding</a> &nbsp; <a href="#fslx_open">fslx_open</a> &nbsp; <a href="#fslx_evnt">fslx_evnt</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20fslx_do">8.10.2.1 Bindings for fslx_do</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> void *<a href="#fslx_do">fslx_do</a> ( int8_t *title, int8_t *path, int16_t pathlen,
int8_t *fname, int16_t fnamelen, int8_t *patterns, <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a>
*filter, int8_t *paths, int16_t *sort_mode, int16_t flags, int16_t
*button, int16_t *nfiles, int8_t **pattern );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>void *<a href="#fslx_do">fslx_do</a> ( int8_t *title, int8_t *path, int16_t pathlen,
                int8_t *fname, int16_t fnamelen,
                int8_t *patterns, <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a> *filter,
                int8_t *paths, int16_t *sort_mode,
                int16_t flags, int16_t *button,
                int16_t *nfiles, int8_t **pattern )
{
   addr_in[0] = title;
   addr_in[1] = path;
   addr_in[2] = fname;
   addr_in[3] = patterns;
   addr_in[4] = filter;
   addr_in[5] = paths;

   int_in[0] = pathlen;
   int_in[1] = fnamelen;
   int_in[2] = *sort_mode;
   int_in[3] = flags;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (194);

   *button    = int_out[1];
   *nfiles    = int_out[2];
   *sort_mode = int_out[3];
   *pattern   = addr_out[1];

   return ( (void *) addr_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">194   # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">4     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">4     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">6     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">2     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">title</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">path</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">fname</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+12</td>
  <td align="left" valign="top">addr_in[3]</td>
  <td align="left" valign="top">patterns</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+16</td>
  <td align="left" valign="top">addr_in[4]</td>
  <td align="left" valign="top">filter</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+20</td>
  <td align="left" valign="top">addr_in[5]</td>
  <td align="left" valign="top">paths</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">pathlen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">fnamelen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">sort_mode</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+6</td>
  <td align="left" valign="top">int_in[3]</td>
  <td align="left" valign="top">flags</td>
</tr>
<tr>
  <td align="left" valign="top">addr_out</td>
  <td align="left" valign="top">addr_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">addr_out+4</td>
  <td align="left" valign="top">addr_out[1]</td>
  <td align="left" valign="top">pattern</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">1</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">button</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+4</td>
  <td align="left" valign="top">int_out[2]</td>
  <td align="left" valign="top">nfiles</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+6</td>
  <td align="left" valign="top">int_out[3]</td>
  <td align="left" valign="top">sort_mode</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_evnt">8.10.3 fslx_evnt</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File selectionX event« - Takes over the handling of the
file-selector.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 193
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t fslx_evnt ( void *fsd, <a href="aes_structures.html#EVNT">EVNT</a> *events, int8_t *path,
int8_t *fname, int16_t *button, int16_t *nfiles, int16_t *sort_mode,
int8_t **pattern );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call fslx_evnt takes over the handling of the file-selector
displayed on the screen. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fsd</td>
<td valign="top"> Descriptor that was passed at a successful opening of a
file-selector window
</td></tr>

<tr><td nowrap="nowrap" valign="top">events</td>
<td valign="top"> <a href="aes_structures.html#EVNT">EVNT</a>-structure; the events are serviced by the dialog if they
are intended for the associated window
</td></tr>

<tr><td nowrap="nowrap" valign="top">path</td>
<td valign="top"> Pointer to the selected path
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Pointer to the selected filename
</td></tr>

<tr><td nowrap="nowrap" valign="top">button</td>
<td valign="top"> <a href="indexudo.html">Index</a> of the selected button
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'Cancel' button</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">'OK' button</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">nfiles</td>
<td valign="top"> Number of selected files
</td></tr>

<tr><td nowrap="nowrap" valign="top">sort_mode</td>
<td valign="top"> Selected sort-mode
</td></tr>

<tr><td nowrap="nowrap" valign="top">pattern</td>
<td valign="top"> Seleted file pattern, such as '*.TXT'

</td></tr>
</table>

<br><b>Note:</b> Events, i.e. mouse clicks, messages and keypresses
are passed on to the file-selector window and serviced by it if
appropriate. When an event has been serviced then the corresponding
bit in the <a href="proto_xfsl.html#EVENT">EVENT</a> structure will be cleared.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns the value 0 if the dialog is to be
terminated, else the value 1.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The presence of this call should be checked for using <a href="appl.html#UDO__25apgi_7">appl_getinfo</a>
(opcode 7).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Extended_20file-selectors">Extended file-selectors</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20fslx_evnt">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20fslx_evnt">8.10.3.1 Bindings for fslx_evnt</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fslx_evnt">fslx_evnt</a> ( void *fsd, <a href="aes_structures.html#EVNT">EVNT</a> *events, int8_t *path,
int8_t *fname, int16_t *button, int16_t *nfiles, int16_t *sort_mode,
int8_t **pattern );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fslx_evnt">fslx_evnt</a> ( void *fsd, <a href="aes_structures.html#EVNT">EVNT</a> *events, int8_t *path,
                    int8_t *fname, int16_t *button,
                    int16_t *nfiles,
                    int16_t *sort_mode, int8_t **pattern )
{
   addr_in[0] = fsd;
   addr_in[1] = events;
   addr_in[2] = path;
   addr_in[3] = fname;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (193);

   *button    = int_out[1];
   *nfiles    = int_out[2];
   *sort_mode = int_out[3];
   *pattern   = addr_out[0];

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">193   # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">4     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">4     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">1     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fsd</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">events</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">path</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+12</td>
  <td align="left" valign="top">addr_in[3]</td>
  <td align="left" valign="top">fname</td>
</tr>
<tr>
  <td align="left" valign="top">addr_out</td>
  <td align="left" valign="top">addr_out[0]</td>
  <td align="left" valign="top">pattern</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">button</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+4</td>
  <td align="left" valign="top">int_out[2]</td>
  <td align="left" valign="top">nfiles</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+6</td>
  <td align="left" valign="top">int_out[3]</td>
  <td align="left" valign="top">sort_mode</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_getnxtfile">8.10.4 fslx_getnxtfile</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File selectionX get next file« - Obtains all further
selected entries in the file-selector.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 192
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t fslx_getnxtfile ( void *fsd, int8_t *fname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call fslx_getnxtfile otains all the further, selected
entries in the file-selector. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fsd</td>
<td valign="top"> Descriptor that was passed at a successful opening of a
file-selector window
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Name of the obtained entry

</td></tr>
</table>

<br><b>Note:</b> If the flag <a href="fslx.html#GETMULTI">GETMULTI</a> was passed with <a href="#fslx_do">fslx_do</a> or
<a href="#fslx_open">fslx_open</a>, then <a href="#fslx_do">fslx_do</a> or <a href="#fslx_evnt">fslx_evnt</a> will return in the parameter
<i>nfiles</i> the number of files that are still selected in addition
to the one in <i>fname.</i> One can call these further files with
fslx_getnxtfile. Only after this may one call <a href="#fslx_close">fslx_close</a>.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns the value 0 if no further file is
selected, else the value 1 if one filename was still to be copied.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The presence of this call should be checked for using <a href="appl.html#UDO__25apgi_7">appl_getinfo</a>
(opcode 7).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Extended_20file-selectors">Extended file-selectors</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20fslx_getnxtfile">Binding</a> &nbsp; <a href="#fslx_open">fslx_open</a> &nbsp; <a href="#fslx_close">fslx_close</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20fslx_getnxtfile">8.10.4.1 Bindings for fslx_getnxtfile</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fslx_getnxtfile">fslx_getnxtfile</a> ( void *fsd, int8_t *fname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fslx_getnxtfile">fslx_getnxtfile</a> ( void *fsd, int8_t *fname )
{
   addr_in[0] = fsd;
   addr_in[1] = fname;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (192);

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">192   # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">2     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fsd</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">fname</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_open">8.10.5 fslx_open</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File selectionX open« - Initializes and opens the
file-selector
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 190
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> void *fslx_open ( int8_t *title, int16_t x, int16_t y, int16_t
*whdl, int8_t *path, int16_t pathlen, int8_t *fname, int16_t fnamelen,
int8_t *patterns, <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a> *filter, int8_t *paths, int16_t
sort_mode, int16_t flags );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call fslx_open initializes and opens the file-selector box.
The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">title</td>
<td valign="top"> Window title of file-selector, may be NULL
</td></tr>

<tr><td nowrap="nowrap" valign="top">x</td>
<td valign="top"> X-coordinate, <u>and</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">y</td>
<td valign="top"> Y-coordinate of the top left corner of the window; for
<i>x</i>=<i>y</i>=-1 the window will be centred
</td></tr>

<tr><td nowrap="nowrap" valign="top">whdl</td>
<td valign="top"> Window handle after successful opening
</td></tr>

<tr><td nowrap="nowrap" valign="top">path</td>
<td valign="top"> Complete path, starts with drive and ends with '\'.
<br>From <a href="magic.html">MagiC</a> 6.10 onwards the path may be initialized incompletely,
as with fsel_xxx, e.g. as an empty string; <a href="magic.html">MagiC</a> will then complete
the path in a sensible way
</td></tr>

<tr><td nowrap="nowrap" valign="top">pathlen</td>
<td valign="top"> Length of path buffer, i.e. maximum pathlength + 1 (for EOS)
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Buffer for the filename
</td></tr>

<tr><td nowrap="nowrap" valign="top">fnamelen</td>
<td valign="top"> Length of filename buffer, i.e. maximum length of filename + 1
(for EOS)
</td></tr>

<tr><td nowrap="nowrap" valign="top">patterns</td>
<td valign="top"> Filemask, e.g. '*.TXT' or '*.PRG,*.APP'. The alternatively
selectable masks are separated by EOS and terminated by EOS,EOS.
<br>From <a href="magic.html">MagiC</a> 6.10 onwards a NULL-pointer may be passed here, in
which case <a href="magic.html">MagiC</a> then uses '*\0'.
</td></tr>

<tr><td nowrap="nowrap" valign="top">filter</td>
<td valign="top"> May be NULL. The filter function is called before the mask
comparison. If it returns 0 then the file is invalid, if 1 is returned
then the filename will be displayed.
</td></tr>

<tr><td nowrap="nowrap" valign="top">paths</td>
<td valign="top"> Path &quot;history&quot; e.g. &quot;C:\\BIN\\&quot; etc. The
alternatively selectable paths are separated by EOS and terminated by
EOS,EOS. A NULL-pointer may be passed here.
</td></tr>

<tr><td nowrap="nowrap" valign="top">sort_mode</td>
<td valign="top"> <b>Sort-mode for the display:</b>
<a name="SORTBYNAME"></a>
<a name="SORTBYDATE"></a>
<a name="SORTBYSIZE"></a>
<a name="SORTBYTYPE"></a>
<a name="SORTBYNONE"></a>
<a name="SORTDEFAULT"></a>
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">SORTBYNAME (0)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">By name</td>
</tr>
<tr>
  <td align="left" valign="top">SORTBYDATE (1)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">By date</td>
</tr>
<tr>
  <td align="left" valign="top">SORTBYSIZE (2)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">By size</td>
</tr>
<tr>
  <td align="left" valign="top">SORTBYTYPE (3)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">By type</td>
</tr>
<tr>
  <td align="left" valign="top">SORTBYNONE (4)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">Unsorted (physical order)</td>
</tr>
<tr>
  <td align="left" valign="top">SORTDEFAULT (-1)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">Default</td>
</tr>
</table>
</div>

<br>SORTDEFAULT exists from Magic 6.10 onwards and means that the
sort mode saved in the system will be used.
<a name="DOSMODE"></a>
<a name="NFOLLOWSLKS"></a>
<a name="GETMULTI"></a>
</td></tr>

<tr><td nowrap="nowrap" valign="top">flags</td>
<td valign="top"> <b>Various settings:</b>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> (DOSMODE) This is the compatibility mode that is also used by
fsel_(ex)input and basically returns filenames in the 8+3 format; for
this all directories are called with <a href="gemdos_directory.html#Dopendir">Dopendir</a>(DOPEN_COMPAT)
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top"> (NFOLLOWSLKS) Symbolic links will not be followed, i.e. date
and time etc., as well as the <a href="gemdos_structures.html#XATTR">XATTR</a>-structure that is passed to
<i>filter</i>, belong to the link itself
</td></tr>

<tr><td nowrap="nowrap" valign="top">8 =</td>
<td valign="top"> If GETMULTI is set, one can select and pass several files at
the same time; for this <a href="#fslx_getnxtfile">fslx_getnxtfile</a> is used if <a href="#fslx_evnt">fslx_evnt</a> or
<a href="#fslx_do">fslx_do</a> in the parameter <i>nfiles</i> signals that there are still
further files selected

</td></tr>
</table>


</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function returns a descriptor for the further actions, else
the value NULL if an error has arisen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The presence of this call should be checked for using <a href="appl.html#UDO__25apgi_7">appl_getinfo</a>
(opcode 7).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Extended_20file-selectors">Extended file-selectors</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20fslx_open">Binding</a> &nbsp; <a href="#fslx_close">fslx_close</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20fslx_open">8.10.5.1 Bindings for fslx_open</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> void *<a href="#fslx_open">fslx_open</a> ( int8_t *title, int16_t x, int16_t y, int16_t
*whdl, int8_t *path, int16_t pathlen, int8_t *fname, int16_t fnamelen,
int8_t *patterns, <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a> *filter, int8_t *paths, int16_t
sort_mode, int16_t flags );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>void *<a href="#fslx_open">fslx_open</a> ( int8_t *title, int16_t x, int16_t y,
                  int16_t *whdl, int8_t *path,
                  int16_t pathlen, int8_t *fname,
                  int16_t fnamelen, int8_t *patterns,
                  <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a> *filter, int8_t *paths,
                  int16_t sort_mode, int16_t flags )
{
   addr_in[0] = title;
   addr_in[1] = path;
   addr_in[2] = fname;
   addr_in[3] = patterns;
   addr_in[4] = filter;
   addr_in[5] = paths;

   int_in[0] = x;
   int_in[1] = y;
   int_in[2] = pathlen;
   int_in[3] = fnamelen;
   int_in[4] = sort_mode;
   int_in[5] = flags;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (190);

   *whdl = int_out[0];
   return ( (void *) addr_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">190   # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">6     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">6     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">1     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">title</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">path</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">fname</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+12</td>
  <td align="left" valign="top">addr_in[3]</td>
  <td align="left" valign="top">patterns</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+16</td>
  <td align="left" valign="top">addr_in[4]</td>
  <td align="left" valign="top">filter</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+20</td>
  <td align="left" valign="top">addr_in[5]</td>
  <td align="left" valign="top">paths</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">x</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">y</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">pathlen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+6</td>
  <td align="left" valign="top">int_in[3]</td>
  <td align="left" valign="top">fnamelen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+8</td>
  <td align="left" valign="top">int_in[4]</td>
  <td align="left" valign="top">sort_mode</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+10</td>
  <td align="left" valign="top">int_in[5]</td>
  <td align="left" valign="top">flags</td>
</tr>
<tr>
  <td align="left" valign="top">addr_out</td>
  <td align="left" valign="top">addr_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">whdl</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_set_flags">8.10.6 fslx_set_flags</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File selectionX set flags« - Sets certain flags of the
file-selector for the whole system.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 195
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t fslx_set_flags ( int16_t flags, int16_t *oldval );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The call fslx_set_flags sets certain flags of the file-selector
box for the whole system. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">flags</td>
<td valign="top"> Various flags:
<table class="UDO_env_xlist">
<a name="SHOW8P3"></a>
<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> SHOW8P3 is valid only for the display of directories on DOS
drives; it corresponds to the switch &quot;Show TOS Files as
'8+3'&quot; in Magxdesk

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">oldval</td>
<td valign="top"> Previous value

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> The function return the value 0 in case of error, else the
value 1 for error-free execution.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> The presence of this call should be checked for using <a href="appl.html#UDO__25apgi_7">appl_getinfo</a>
(opcode 7).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Extended_20file-selectors">Extended file-selectors</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20fslx_set_flags">Binding</a> &nbsp; <a href="#fslx_open">fslx_open</a> &nbsp; <a href="#fslx_close">fslx_close</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20fslx_set_flags">8.10.6.1 Bindings for fslx_set_flags</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fslx_set_flags">fslx_set_flags</a> ( int16_t flags, int16_t *oldval );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Binding:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fslx_set_flags">fslx_set_flags</a> ( int16_t flags, int16_t *oldval )
{
   int_in[0] = 0;
   int_in[1] = flags;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (195);

   *oldval = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Address</td>
  <td align="left" valign="top">Element</td>
  <td align="left" valign="top">Contents</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">195   # Function opcode</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Entry in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Entry in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">0     # Entry in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Entry in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">0</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">flags</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">Return value</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">oldval</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="Operation_20of_20file-selectors_20from_20MagiC_204_20onwards">8.10.7 Operation of file-selectors from MagiC 4 onwards</a></h3>
<p><a href="magic.html">MagiC</a> as from Version 4.0 makes its own file-selector box
available, which apart from support of long filenames also offers some
operating niceties otherwise known only from alternative
file-selectors. The following table gives a synopsis of the more
important shortcuts:
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Key presses</td>
<td valign="top"> Function
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return</td>
<td valign="top"> <b>No file selected:</b> Returns the text in the editable
field to the program.
<br><b>File selected:</b> Returns the selected file.
<br><b>Folder selected:</b> Opens the folder.
</td></tr>

<tr><td nowrap="nowrap" valign="top">Alt-A..Z</td>
<td valign="top"> Opens the respective drive in current directory
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-Esc</td>
<td valign="top"> Rereads the directory
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-Backspace</td>
<td valign="top"> <u>or</u>
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-H</td>
<td valign="top"> Goes back one directory level
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-D</td>
<td valign="top"> Deselects all entries. With this one can force the return of
the input filename in place of the selected file.
</td></tr>

<tr><td nowrap="nowrap" valign="top">Cursor up,down</td>
<td valign="top"> Moves selection up/down
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-Cursor up,down</td>
<td valign="top"> Scrolls up/down
</td></tr>

<tr><td nowrap="nowrap" valign="top">Sh-Cursor up,down</td>
<td valign="top"> Moves selection by one page
</td></tr>

<tr><td nowrap="nowrap" valign="top">Sh-Ctrl-Cursor up,down</td>
<td valign="top"> Scrolls page by page
</td></tr>

<tr><td nowrap="nowrap" valign="top">Home</td>
<td valign="top"> Selects topmost element
</td></tr>

<tr><td nowrap="nowrap" valign="top">Sh-Home</td>
<td valign="top"> Selects lowest element

</td></tr>
</table>

<p><b>There are some things to note for the operation of the
buttons too:</b> A double-click on the 'parent' field jumps back to
the root directory. A click on a line selects the object. In cases
where several files are selectable (can be influenced through the
system call), these can be selected with a [Shift]-click.
<br>In each case one can deselect one file with [Shift]-click.
</p>
<p><b>Further, one should note:</b>
</p>
<ul>
<li><p> Long filenames are returned only if the caller has signalled
beforehand with <a href="gemdos_process.html#Pdomain">Pdomain</a>(1) that he could do something with them.
<br>&nbsp;
</p></li>
<li><p> When selecting a folder with [Return], the input field will be
cleared. If nothing is selected, then 'Cursor down' selects the first
line, 'Cursor up' the last line.
<br>&nbsp;
</p></li>
<li><p> With the old calls fsel_(ex)input, the sort-mode is set during
booting to 'By name' and later stored in a global variable, i.e. the
last set sort-mode is saved until the next boot process.
<br>&nbsp;
</p></li>
<li><p> With the old function fsel_(ex)input the mask '*.*' instead of
'*' may be returned in some cases.
<br>&nbsp;
</p></li>
</ul>

<p>See also: <a href="guidelines_styles.html#Key_20assignments">Key assignments</a>
</p>
<h3><a name="File-selector_20as_20a_20dialog">8.10.8 File-selector as a dialog</a></h3>
<pre>fsel = <a href="#fslx_do">fslx_do</a>(..., &amp;button, &amp;nfiles, ...);

if (fsel) /* Was the selector open? */
{
   if (button)
   {
      while (--nfiles) /* Several files? */
         <a href="#fslx_getnxtfile">fslx_getnxtfile</a>(...);   /* Get them all */
   }

   <a href="#fslx_close">fslx_close</a>(fsel); /* Release everything again */
}
</pre>
<h3><a name="File-selector_20in_20a_20window">8.10.9 File-selector in a window</a></h3>
<pre>fsel = <a href="#fslx_open">fslx_open</a>(...);
if (fsel)
{
   do {
      evnt.mwhich = <a href="evnt.html#evnt_multi">evnt_multi</a>(...);
      rv = <a href="#fslx_evnt">fslx_evnt</a>(fsel, &amp;evnt, ..., &amp;nfiles, ...);

      /* Evaluate bits for own windows/menus */
   } while (rv);

   while (--nfiles) <a href="#fslx_getnxtfile">fslx_getnxtfile</a>(...);
   <a href="#fslx_close">fslx_close</a>(fsel);
}
</pre>
<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_FOOT" href="wind.html"><img src="udo_lf.gif" alt="Window library" title="Window library" border="0" width="24" height="24">Window library</a>
<a name="UDO_nav_rg_FOOT" href="form.html"><img src="udo_rg.gif" alt="Form library" title="Form library" border="0" width="24" height="24">Form library</a>
</body>
</html>
