<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 2025/08/02 -->
<html lang="en">
<head>
<title>
The documentation for TOS: Network functions
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="gemdos_main.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24">GEMDOS</a>
<a name="UDO_nav_lf_HEAD" href="gemdos_memory.html"><img src="udo_lf.gif" alt="Memory management" title="Memory management" border="0" width="24" height="24">Memory management</a>
<a name="UDO_nav_rg_HEAD" href="gemdos_system.html"><img src="udo_rg.gif" alt="System functions" title="System functions" border="0" width="24" height="24">System functions</a>

<hr>

<h1><a name="Network_20functions">5.13 Network functions</a></h1>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fflush">Fflush</a></td>
<td valign="top"> Flush file
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#F_lock">Flock</a></td>
<td valign="top"> Lock file from current position
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Frlock">Frlock</a></td>
<td valign="top"> Lock a file record
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Frunlock">Frunlock</a></td>
<td valign="top"> Unlock a file record
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Funlock">Funlock</a></td>
<td valign="top"> Unlock file
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Nversion">Nversion</a></td>
<td valign="top"> <a href="gemdos_mintnet.html">Network</a> identifier determine

</td></tr>
</table>

<h3><a name="Fflush">5.13.1 Fflush</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fflush« - Flush the buffer of a file
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 102 (0x0066)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int32_t Fflush ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The GEMDOS routine Fflush writes all modified data of the
specified file <i>handle</i> from its buffer to the disk.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> Returns <a href="gemdos_errors.html#E_OK">E_OK</a> on success, or a negative <a href="gemdos_main.html">GEMDOS</a> error code
otherwise.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> Available when a network driver is installed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Network_20functions">Network functions</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Fflush">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Fflush">5.13.1.1 Bindings for Fflush</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fflush">Fflush</a> ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    handle,-(sp) ; Offset 2
move.w    #102,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>
addq.l    #4,sp        ; correct stack
</pre>

</td></tr>
</table>

<h3><a name="F_lock">5.13.2 F_lock</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Flock« - Protect a portion of a file
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 100 (0x0064)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int32_t Flock ( int16_t handle, int32_t length );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The GEMDOS routine Flock serves to protect a portion of a file
(from the current position) from access by other processes across a
network. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> File ID
</td></tr>

<tr><td nowrap="nowrap" valign="top">length</td>
<td valign="top"> Number of bytes affected

</td></tr>
</table>

<br><b>Note:</b> Please do not confuse this function ($64) with
<a href="gemdos_file.html#Flock">Flock</a> ($5C) from the specification for GEMDOS File Sharing &amp;
Record Locking.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> Returns <a href="gemdos_errors.html#E_OK">E_OK</a> on success, or a negative <a href="gemdos_main.html">GEMDOS</a> error code
otherwise.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> Available when a network driver is installed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Network_20functions">Network functions</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20F_lock">Binding</a> <a href="#Funlock">Funlock</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20F_lock">5.13.2.1 Bindings for F_lock</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t Flock ( int16_t handle, int32_t length );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    length,-(sp) ; Offset 4
move.w    handle,-(sp) ; Offset 2
move.w    #100,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>
addq.l    #8,sp        ; correct stack
</pre>

</td></tr>
</table>

<h3><a name="Frlock">5.13.3 Frlock</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Frlock« - Protect a portion of a file
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 98 (0x0062)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int32_t Frlock ( int16_t handle, int32_t start, int32_t length
);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The GEMDOS routine Frlock serves to protect a portion of a file
from access by other processes across a network. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> File ID
</td></tr>

<tr><td nowrap="nowrap" valign="top">start</td>
<td valign="top"> Start position in the file
</td></tr>

<tr><td nowrap="nowrap" valign="top">length</td>
<td valign="top"> Number of bytes affected

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> Returns <a href="gemdos_errors.html#E_OK">E_OK</a> on success, or a negative <a href="gemdos_main.html">GEMDOS</a> error code
otherwise.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> Available when a network driver is installed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Network_20functions">Network functions</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Frlock">Binding</a> <a href="#Frunlock">Frunlock</a> <a href="#Nversion">Nversion</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Frlock">5.13.3.1 Bindings for Frlock</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Frlock">Frlock</a> ( int16_t handle, int32_t start, int32_t length
);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    length,-(sp) ; Offset 8
move.l    start,-(sp)  ; Offset 4
move.w    handle,-(sp) ; Offset 2
move.w    #98,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>
lea       12(sp),sp    ; correct stack
</pre>

</td></tr>
</table>

<h3><a name="Frunlock">5.13.4 Frunlock</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Frunlock« - Unlock a portion of a file
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 99 (0x0063)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int32_t Frunlock ( int16_t handle, int32_t start );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The GEMDOS routine Frunlock serves to unlock the locked portion
of a file. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> File ID
</td></tr>

<tr><td nowrap="nowrap" valign="top">start</td>
<td valign="top"> Start position in the file

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> Returns <a href="gemdos_errors.html#E_OK">E_OK</a> on success, or a negative <a href="gemdos_main.html">GEMDOS</a> error code
otherwise.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> Available when a network driver is installed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Network_20functions">Network functions</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Frunlock">Binding</a> <a href="#Frlock">Frlock</a> <a href="#Nversion">Nversion</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Frunlock">5.13.4.1 Bindings for Frunlock</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Frunlock">Frunlock</a> ( int16_t handle, int32_t start );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    start,-(sp)  ; Offset 4
move.w    handle,-(sp) ; Offset 2
move.w    #99,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>
addq.l    #8,sp        ; correct stack
</pre>

</td></tr>
</table>

<h3><a name="Funlock">5.13.5 Funlock</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Funlock« - Unlock a portion of a file
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 101 (0x0065)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int32_t Funlock ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The GEMDOS routine Funlock serves to unlock the portion of a
file previously locked by <a href="#F_lock">Flock</a>. The following apply:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Meaning
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> File ID

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top"> Returns <a href="gemdos_errors.html#E_OK">E_OK</a> on success, or a negative <a href="gemdos_main.html">GEMDOS</a> error code
otherwise.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> Available when a network driver is installed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Network_20functions">Network functions</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Funlock">Binding</a> <a href="#F_lock">Flock</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Funlock">5.13.5.1 Bindings for Funlock</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Funlock">Funlock</a> ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    handle,-(sp) ; Offset 2
move.w    #101,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>
addq.l    #4,sp        ; correct stack
</pre>

</td></tr>
</table>

<h3><a name="Nversion">5.13.6 Nversion</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Nversion« - <a href="gemdos_mintnet.html">Network</a> identifier determine
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 96
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int32_t Nversion( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> Returns the identifier of the connected network
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return value:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="center" valign="top">ID</td>
  <td align="left" valign="top">Name</td>
</tr>
<tr>
  <td align="center" valign="top">1</td>
  <td align="left" valign="top">Bionet</td>
</tr>
<tr>
  <td align="center" valign="top">2</td>
  <td align="left" valign="top">A-Net</td>
</tr>
<tr>
  <td align="center" valign="top">3</td>
  <td align="left" valign="top">Elan</td>
</tr>
<tr>
  <td align="center" valign="top">4</td>
  <td align="left" valign="top">TSE-Net</td>
</tr>
<tr>
  <td align="center" valign="top">5</td>
  <td align="left" valign="top">Atlanet</td>
</tr>
<tr>
  <td align="center" valign="top">6</td>
  <td align="left" valign="top">PAMs-Net</td>
</tr>
<tr>
  <td align="center" valign="top">7</td>
  <td align="left" valign="top">Transnet</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top">
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> <a href="#Network_20functions">Network functions</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Nversion">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Nversion">5.13.6.1 Bindings for Nversion</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Nversion">Nversion</a>( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    #96,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>
addq.l    #2,sp        ; correct stack
</pre>

</td></tr>
</table>

<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="gemdos_main.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24">GEMDOS</a>
<a name="UDO_nav_lf_FOOT" href="gemdos_memory.html"><img src="udo_lf.gif" alt="Memory management" title="Memory management" border="0" width="24" height="24">Memory management</a>
<a name="UDO_nav_rg_FOOT" href="gemdos_system.html"><img src="udo_rg.gif" alt="System functions" title="System functions" border="0" width="24" height="24">System functions</a>
</body>
</html>
