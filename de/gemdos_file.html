<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 02.08.2025 -->
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Dateifunktionen
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="gemdos_main.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24">GEMDOS</a>
<a name="UDO_nav_lf_HEAD" href="gemdos_trap.html"><img src="udo_lf.gif" alt="gemdos-Trap" title="gemdos-Trap" border="0" width="24" height="24">gemdos-Trap</a>
<a name="UDO_nav_rg_HEAD" href="gemdos_datetime.html"><img src="udo_rg.gif" alt="Datum und Uhrzeit" title="Datum und Uhrzeit" border="0" width="24" height="24">Datum und Uhrzeit</a>

<hr>

<h1><a name="Dateifunktionen">5.9 Dateifunktionen</a></h1>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fattrib">Fattrib</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Dateiattribute ändern oder ermitteln.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fchdir">Fchdir</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Sets the current directory from a file descriptor.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fchmod">Fchmod</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Berechtigung für Dateizugriffe setzen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fchown">Fchown</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Besitzer einer Datei ändern.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fchown16">Fchown16</a>&nbsp;&nbsp;</td>
<td valign="top"> Besitzer einer Datei ändern.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fclose">Fclose</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Datei schließen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fcntl">Fcntl</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Kontrolloperationen auf einem File ausführen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fcreate">Fcreate</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Datei anlegen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fdatime">Fdatime</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Änderungsdatum einer Datei ermitteln oder ändern.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fdelete">Fdelete</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Datei löschen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fdirfd">Fdirfd</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Returns a file descriptor from a directory handle.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fdup">Fdup</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Dateihandle duplizieren.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Ffchmod">Ffchmod</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Berechtigung für eine geöffnete Datei setzen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Ffchown">Ffchown</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Besitzer einer geöffneten Datei ändern.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Ffdopendir">Ffdopendir</a></td>
<td valign="top"> Opens a directory from a file descriptor.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fforce">Fforce</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Umlenken von Ein-/Ausgaben von Standardkanälen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Ffstat64">Ffstat64</a>&nbsp;&nbsp;</td>
<td valign="top"> Erweiterte Fileattribute ermitteln.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fgetchar">Fgetchar</a>&nbsp;&nbsp;</td>
<td valign="top"> Zeichen aus einer Datei lesen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fgetdta">Fgetdta</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Diskettenübertragungsadresse ermitteln.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Finstat">Finstat</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Eingabestatus für ein File festlegen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Flink">Flink</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Link auf ein File erzeugen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Flock">Flock</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> File Record sperren oder freigeben.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fmidipipe">Fmidipipe</a>&nbsp;</td>
<td valign="top"> MIDI Ein-/Ausgabe umlenken.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fopen">Fopen</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Datei öffnen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Foutstat">Foutstat</a>&nbsp;&nbsp;</td>
<td valign="top"> Ausgabestatus für ein File festlegen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fpipe">Fpipe</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Pipe anlegen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fpoll">Fpoll</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Auswählen von Filedeskriptoren.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fputchar">Fputchar</a>&nbsp;&nbsp;</td>
<td valign="top"> Zeichen in ein File ausgeben.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fread">Fread</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Aus Datei lesen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Freadlink">Freadlink</a>&nbsp;</td>
<td valign="top"> Inhalt eines symbolischen Links festlegen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Frename">Frename</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Datei umbenennen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fseek">Fseek</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Zeiger auf bestimmte Position innerhalb einer Datei setzen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fseek64">Fseek64</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Zeiger auf bestimmte 64-bit Position innerhalb einer Datei
setzen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fselect">Fselect</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Auswählen von Filedeskriptoren.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fsetdta">Fsetdta</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Diskettenübertragungsadresse ändern.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fsfirst">Fsfirst</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Ersten Eintrag in Verzeichnis suchen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fsnext">Fsnext</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Nächsten Eintrag in Verzeichnis suchen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fsymlink">Fsymlink</a>&nbsp;&nbsp;</td>
<td valign="top"> Symbolischen Link auf ein File erzeugen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fstat64">Fstat64</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Erweiterte Fileattribute ermitteln.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fsync">Fsync</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Synchronisation einer Datei.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fwrite">Fwrite</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> In Datei schreiben.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Fxattr">Fxattr</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Erweiterte Fileattribute ermitteln.

</td></tr>
</table>

<p>Querverweis: <a href="gemdos_directory.html">Verzeichnisfunktionen</a> &nbsp; <a href="xbios_main.html">XBIOS</a>-<a href="xbios_drive.html">Laufwerksfunktionen</a> &nbsp;
<a href="gemdos_pipes.html">Test auf Pipes</a>
</p>
<h3><a name="Fattrib">5.9.1 Fattrib</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file attribute« - Dateiattribut ermitteln oder setzen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 67
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Fattrib ( const int8_t *filename, int16_t wflag,
int16_t attrib );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fattrib ermittelt oder setzt die Attribute
einer Datei. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">filename</td>
<td valign="top"> Dateiname der entsprechenden Datei
</td></tr>

<tr><td nowrap="nowrap" valign="top">wflag</td>
<td valign="top">
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">0 =</td>
<td valign="top"> Attribute auslesen
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> Attribute setzen

</td></tr>
</table>

<a name="Dateiattribute_20von_20TOS"></a>
<a name="Attribute_20einer_20Datei"></a>
</td></tr>

<tr><td nowrap="nowrap" valign="top">attrib</td>
<td valign="top"> <b>Dateiattribute</b>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Bit-0:</td>
<td valign="top"> Datei ist schreibgeschützt
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-1:</td>
<td valign="top"> Datei ist versteckt
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-2:</td>
<td valign="top"> Systemdatei
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-3:</td>
<td valign="top"> Diskettenname
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-4:</td>
<td valign="top"> Verzeichnis
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-5:</td>
<td valign="top"> Archiv-Bit

</td></tr>
</table>


</td></tr>
</table>

<br><b>Hinweis:</b> Programme sollten nach Möglichkeit auf die
Routinen <a href="#Fxattr">Fxattr</a> und <a href="#Fchmod">Fchmod</a> zurückgreifen, da diese leistungsfähiger
als Fattrib sind.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert folgende Resultate:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> Zugriff verweigert
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a> :</td>
<td valign="top"> Datei nicht gefunden
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EPTHNF">EPTHNF</a> :</td>
<td valign="top"> Verzeichnis nicht gefunden
</td></tr>

<tr><td nowrap="nowrap" valign="top">sonst :</td>
<td valign="top"> die aktuellen Dateiattribute

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle GEMDOS Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fattrib">Binding</a> &nbsp; <a href="#Fxattr">Fxattr</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fattrib">5.9.1.1 Bindings für Fattrib</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#Fattrib">Fattrib</a> ( const int8_t *filename, int16_t wflag,
int16_t attrib );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    attrib,-(sp) ; Offset 8
move.w    wflag,-(sp)  ; Offset 6
pea       filename     ; Offset 2
move.w    #67,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $A(sp),sp    ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H43,L:filename%,W:wflag%,W:attrib%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fchdir">5.9.2 Fchdir</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Set directory« - Set the current directory from a file
descriptor.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 385
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fchdir ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> The GEMDOS routine Fchdir sets the current directory for the
current process from a directory with the ID <i>handle</i>.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> <a href="gemdos_errors.html#E_OK">E_OK</a> = Alles OK oder negative <a href="gemdos_main.html">GEMDOS</a>-Fehlernummer.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Sie steht ab FreeMiNT 1.17 zur Verfügung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fchdir">5.9.2.1 Bindings für Fchdir</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fchdir">Fchdir</a> ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    handle,-(sp) ; Offset 2
move.w    #385,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>
addq.l    #4,sp        ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H181,W:handle%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fchmod">5.9.3 Fchmod</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fchmod« - Berechtigung für Dateizugriffe setzen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 306
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fchmod ( int8_t *name, int16_t mode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion ändert die Zugriffsrechte für die Datei
<i>name</i>. Der Parameter <i>mode</i> enthält die neuen
Zugriffsrechte:
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Zugriff durch</td>
  <td align="left" valign="top">mode</td>
  <td align="left" valign="top">Bedeutung</td>
</tr>
<tr>
  <td align="left" valign="top">Besitzer der</td>
  <td align="left" valign="top">0400</td>
  <td align="left" valign="top">Leseberechtigung</td>
</tr>
<tr>
  <td align="left" valign="top">Datei</td>
  <td align="left" valign="top">0200</td>
  <td align="left" valign="top">Schreibberechtigung</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">0100</td>
  <td align="left" valign="top">Ausführungsrecht</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">&nbsp;</td>
</tr>
<tr>
  <td align="left" valign="top">Gruppe der</td>
  <td align="left" valign="top">0040</td>
  <td align="left" valign="top">Leseberechtigung</td>
</tr>
<tr>
  <td align="left" valign="top">Datei</td>
  <td align="left" valign="top">0020</td>
  <td align="left" valign="top">Schreibberechtigung</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">0010</td>
  <td align="left" valign="top">Ausführungsrecht</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">&nbsp;</td>
</tr>
<tr>
  <td align="left" valign="top">Alle anderen</td>
  <td align="left" valign="top">0004</td>
  <td align="left" valign="top">Leseberechtigung</td>
</tr>
<tr>
  <td align="left" valign="top">Benutzer</td>
  <td align="left" valign="top">0002</td>
  <td align="left" valign="top">Schreibberechtigung</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">0001</td>
  <td align="left" valign="top">Ausführungsrecht</td>
</tr>
</table>
</div>

<br><b>Für ausführbare Dateien gilt:</b>
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">mode</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">04000</td>
<td valign="top"> effektive UID des Prozesses auf die UID dessen setzen, der
diesen Prozeß ausführt.
</td></tr>

<tr><td nowrap="nowrap" valign="top">02000</td>
<td valign="top"> effektive GID des Prozesses auf die GID dessen setzen, der
diesen Prozeß ausführt.
</td></tr>

<tr><td nowrap="nowrap" valign="top">01000</td>
<td valign="top"> Die Datei ist ein Verzeichnis
<br>Nur der Datei- bzw. Verzeichnis-Eigentümer (oder root) können
Dateien in diesem Verzeichnis löschen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">????</td>
<td valign="top"> Die Datei ist ein <a href="gemdos_programs.html#Shared-Text">Shared-Text</a> Programm
<br>Nach der Abarbeitung wird das Programm nicht aus dem Speicher
entfernt und muß dem entsprechend für eine erneute Bearbeitung nicht
nachgeladen werden.

</td></tr>
</table>

<br><b>Hinweis:</b> Nicht alle <a href="gemdos_filesys.html#Filesysteme">Filesysteme</a> müssen alle
Möglichkeiten unterstützen. Nicht unterstützte Zugriffsrechte
werden dann ignoriert. Ausführungsrecht für ein Verzeichnis
bedeutet, daß in diesem Verzeichnis nach einem Namen bzw. einer
Namenskomponente gesucht werden darf.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a>&nbsp;&nbsp;&nbsp;:</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a> :</td>
<td valign="top"> Datei nicht gefunden.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EPTHNF">EPTHNF</a> :</td>
<td valign="top"> Pfad zur Datei nicht gefunden.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> Die EUID des aufrufenden Prozesses unterscheidet sich von der
UID des Dateibesitzers und ist auch nicht die des Kernels (0).

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Verfügbar, wenn ein 'MiNT' Cookie mit einer Versionsnummer von
mindestens 0.90 existiert.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fchmod">Binding</a> &nbsp; <a href="#Fattrib">Fattrib</a> &nbsp; <a href="#Fxattr">Fxattr</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fchmod">5.9.3.1 Bindings für Fchmod</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fchmod">Fchmod</a> ( int8_t *name, int16_t mode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    mode,-(sp)   ; Offset 6
pea       name         ; Offset 2
move.w    #306,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>  aufrufen
addq.l    #8,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fchown">5.9.4 Fchown</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fchown« - Eigentümer/Gruppenkennungen ändern.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 305
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fchown ( int8_t *name, int16_t uid, int16_t gid );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion ändert die Benutzer-/Gruppenkennung der Datei
<i>name</i>, die wiederum die Zugriffsrechte der Datei regeln.
<br>&nbsp;
<br>Dieser Aufruf kann nur von einem Prozeß erfolgen der eine
effektive Benutzerkennung (EUID) hat, die 0 ist, oder die der UID der
Datei entspricht. Im letzteren Fall muß die neue UID der alten
entsprechen, und darüber hinaus der aufrufende Prozeß Mitglied der
Gruppe mit der Gruppennummer GID sein.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EINVFN">EINVFN</a> :</td>
<td valign="top"> das Filesystem unterstützt nicht das Konzept von
Benutzer-/Gruppenkennungen (Beispiel: <a href="tos_main.html">TOS</a>-FS).
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> Die EUID des aufrufenden Prozesses differiert von der UID des
Dateibesitzers und ist auch nicht 0.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Verfügbar, wenn ein 'MiNT' Cookie mit einer Versionsnummer von
mindestens 0.90 existiert.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fchown">Binding</a> &nbsp; <a href="#Fchown16">Fchown16</a> &nbsp; <a href="#Fchmod">Fchmod</a> &nbsp; <a href="#Fxattr">Fxattr</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fchown">5.9.4.1 Bindings für Fchown</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fchown">Fchown</a> ( int8_t *name, int16_t uid, int16_t gid );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    gid,-(sp)    ; Offset 8
move.w    uid,-(sp)    ; Offset 6
pea       name         ; Offset 2
move.w    #305,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $A(sp),sp    ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fchown16">5.9.5 Fchown16</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fchown16« - Eigentümer/Gruppenkennungen ändern.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 384
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fchown16 ( int8_t *name, int16_t uid, int16_t gid,
int16_t flag );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion ändert die Benutzer-/Gruppenkennung der Datei
<i>name</i>, die wiederum die Zugriffsrechte der Datei regeln.
<br>&nbsp;
<br>Der Parameter <i>flag</i> gibt an, wie symbolische Links
behandelt werden sollen. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">flag</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top"> der Besitzer des symbolischen Links selbst wird geändert. Dies
entspricht einem Aufruf von <a href="#Fchown">Fchown</a>(name, uid, gid).
</td></tr>

<tr><td nowrap="nowrap" valign="top">1</td>
<td valign="top"> symbolische Links werden bis zur Ursprungsdatei verfolgt, und
der Besitzer dieser Datei wird geändert.

</td></tr>
</table>

<br>Dieser Aufruf kann nur von einem Prozeß erfolgen der eine
effektive Benutzerkennung (EUID) hat, die 0 ist, oder die der UID der
Datei entspricht. Im letzteren Fall muß die neue UID der alten
entsprechen, und darüber hinaus der aufrufende Prozeß Mitglied der
Gruppe mit der Gruppennummer GID sein.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EINVFN">EINVFN</a> :</td>
<td valign="top"> das Filesystem unterstützt nicht das Konzept von
Benutzer-/Gruppenkennungen (Beispiel: <a href="tos_main.html">TOS</a>-FS).
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> Die EUID des aufrufenden Prozesses differiert von der UID des
Dateibesitzers und ist auch nicht 0.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Verfügbar, wenn ein 'MiNT' Cookie mit einer Versionsnummer von
mindestens 1.16.0 existiert.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fchown16">Binding</a> &nbsp; <a href="#Fchown">Fchown</a> &nbsp; <a href="#Fchmod">Fchmod</a> &nbsp; <a href="#Fxattr">Fxattr</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fchown16">5.9.5.1 Bindings für Fchown16</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fchown16">Fchown16</a> ( int8_t *name, int16_t uid, int16_t gid,
int16_t flag );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    flag,-(sp)   ; Offset 10
move.w    gid,-(sp)    ; Offset 8
move.w    uid,-(sp)    ; Offset 6
pea       name         ; Offset 2
move.w    #384,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       12(sp),sp    ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fclose">5.9.6 Fclose</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file close« - Datei schließen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 62
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Fclose ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fclose schließt eine Datei mit der
Dateikennung <i>handle</i>.
<br>&nbsp;
<br><b>Hinweis:</b> Im <a href="gemdos_mintnet.html">Netzwerk</a> wird das aktive Locking aufgehoben.
Beim Schließen von Standardkanälen wird ab <a href="gemdos_main.html">GEMDOS</a>-Version 0.15
wieder der ursprüngliche Kanal eingesetzt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert folgende Resultate:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a></td>
<td valign="top"> kein Fehler aufgetreten
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a></td>
<td valign="top"> falsche Dateikennung

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle GEMDOS Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fclose">Binding</a> &nbsp; <a href="#Fopen">Fopen</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fclose">5.9.6.1 Bindings für Fclose</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#Fclose">Fclose</a> ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    handle,-(sp)  ; Offset 2
move.w    #62,-(sp)     ; Offset 0
trap      #1            ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #4,sp         ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H3E,W:handle%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fcntl">5.9.7 Fcntl</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fcntl« - Kontrolloperationen auf einem File ausführen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 260
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fcntl ( int16_t fh, int32_t arg, int16_t cmd );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion führt verschiedene Kontrolloperationen auf der
Datei mit der Handle <i>fh</i> duch. Der Parameter <i>cmd</i>
beschreibt die gewünschte Operation, und kann folgende Werte annehmen
(<i>arg</i> ist dabei vom gewählten Kommando abhängig):
<br>&nbsp;
<a name="Fcntl_2C_20File-Kommandos_20f_C3_BCr"></a>
<a name="F_DUPFD"></a>
<br><b>F_DUPFD (0):</b>
<br>Dupliziert das angegebene Datei-Handle. Für das neue Intervall
gilt: <i>arg</i> &lt;= Handle &lt; 32. Falls in dem angegebenen
Bereich keine freien Handles existieren, wird die Fehlermeldung <a href="gemdos_errors.html#ENHNDL">ENHNDL</a>
zurückgegeben. Ein Aufruf von <a href="#Fdup">Fdup</a> (handle) ist also äquivalent zu
Fcntl (handle, 6L, F_DUPFD).
<br>&nbsp;
<a name="F_GETFD"></a>
<br><b>F_GETFD (1):</b>
<br>Dieses Kommando gibt das nicht-vererbungs-Flag für das Handle fh
zurück. Das Flag ist 0, wenn per <a href="gemdos_process.html#Pexec">Pexec</a> gestartete Tochterprozesse die
angegebene Datei erben sollen, anderenfalls hat es den Wert 1. Der
Parameter <i>arg</i> besitzt keine Bedeutung.
<br>&nbsp;
<a name="F_SETFD"></a>
<br><b>F_SETFD (2):</b>
<br>Dieses Kommando setzt das nicht-vererbungs-Flag für das Handle f.
<i>arg</i> gibt an, ob ein mittels <a href="gemdos_process.html#Pexec">Pexec</a> gestarteter Child Processes
die Dateihandle erbt. Ein Wert von 1 steht für nicht vererben, ein
Wert von 0 für vererben. Der Defaultwert des Flags ist 0 für die
Standard <a href="gemdos_main.html">GEMDOS</a>-Handles im Bereich von 0...5 und 1 für alle anderen,
also nicht-Standard-Handles.
<br>&nbsp;
<a name="F_GETFL"></a>
<br><b>F_GETFL (3):</b>
<br>Dieses Kommando gibt die Dateihandle-Flags zurück, die durch den
Benutzer verändert werden können. Dabei handelt es sich um den bei
<a href="#Fopen">Fopen</a> angegebenen Parameter mode, sofern dieser nicht durch einen
anderen Aufruf von Fcntl verändert worden ist.
<br>&nbsp;
<a name="F_SETFL"></a>
<br><b>F_SETFL (4):</b>
<br>Dieses Kommando setzt die Dateihandle-Flags neu, die durch den
Benutzer verändert werden können (andere Bits werden ignoriert, und
sollten auf den Wert 0 gesetzt werden). Es ist nicht möglich, den
Schreib-Lese Modus bzw. die Modi für Filesharing zu verändern.
<br>&nbsp;
<a name="F_GETLK"></a>
<br><b>F_GETLK (5):</b>
<br>Dieses Kommando testet auf einen Lock auf einer Datei. Der
Parameter <i>arg</i> ist ein Zeiger auf eine <a href="gemdos_structures.html#flock_2C_20Fcntl">flock-Struktur</a>, in der
Informationen über einen Datei-Lock gespeichert sind. Falls ein Lock
existiert, wird er in die Struktur kopiert. Dabei wird in der
Komponenten l_pid die PID des sperrenden Prozesses vermerkt. Falls
kein Lock existiert, wird die Komponente l_type auf den Wert F_UNLCK
gesetzt. Für den Fall, daß der Lock von einem anderen Rechner im
<a href="gemdos_mintnet.html">Netzwerk</a> gehalten wird, wird die Komponente l_pid auf einen vom NFS
(<a href="gemdos_mintnet.html">Netzwerk</a>-Filesystem) definierten Wert gesetzt. Für diesen Wert gilt:
0x1000 &lt;= l_pid &lt;= 0xffff. Man denke daran, daß normale PID's
einen Wert kleiner als 1000 besitzen.
<br>&nbsp;
<a name="F_SETLK"></a>
<br><b>F_SETLK (6):</b>
<br>Dieses Kommando setzt (l_type = F_RDLCK oder F_WRLCK) bzw. löscht
(l_type = F_UNLCK) einen beratenden Lock auf eine Datei. Falls diese
eine FIFO-Queue (First-in-First-Out) ist, muß die gesamte Datei auf
einmal behandelt werden. Für den Fall, daß der Lock mit von anderen
Prozessen gesetzten Locks kollidiert, wird der Wert <a href="gemdos_errors.html#ELOCKED">ELOCKED</a>
zurückgegeben. Wenn versucht wird, einen nicht-existierenden Lock zu
löschen, wird der Wert <a href="gemdos_errors.html#ENSLOCK">ENSLOCK</a> zurückgeliefert. Zu beachten ist,
daß sich Read-Locks überlappen dürfen, Write-Locks hingegen nicht.
Falls eine gelockte Datei geschlossen wird, oder der entsprechende
Prozess terminiert, werden alle gesetzten Locks automatisch aufgehoben
(d.h. zurückgesetzt).
<br>&nbsp;
<a name="F_SETLKW"></a>
<br><b>F_SETLKW (7):</b>
<br>Analog F_SETLK, mit dem Unterschied, daß wenn der Lock mit
solchen von anderen Prozessen kollidiert, nicht <a href="gemdos_errors.html#ELOCKED">ELOCKED</a>
zurückgeliefert wird, sondern der sperrende Prozess suspendiert wird,
bis das Locking vom anderen Prozess aufgehoben wird.
<br>&nbsp;
<a name="FSTAT"></a>
<br><b>FSTAT (0x4600):</b>
<br>Ermittelt die <a href="gemdos_file.html#Attribute_20einer_20Datei">Attribute einer Datei</a>. Im Parameter <i>arg</i> wird
ein Zeiger auf eine <a href="gemdos_structures.html#XATTR">XATTR</a>-Struktur zurückgeliefert, so als ob ein
Aufruf von <a href="#Fxattr">Fxattr</a> gemacht worden wäre. Das Kommando wird in <a href="magic.html">MagiC</a> ab
Version 3.0 unterstützt.
<br>&nbsp;
<a name="FIONREAD"></a>
<br><b>FIONREAD (0x4601):</b>
<br>Im Parameter <i>arg</i> wird ein Zeiger auf einen Long-Wert
zurückgegeben, in dem die Anzahl der Bytes angegeben ist, die z.Zt.
vom angegebenen Datei-Handle gelesen werden können, ohne daß der
Prozess blockiert wird. Die Angabe ist nicht zwingend korrekt, da die
genaue Anzahl in einigen Fällen nur geschätzt werden kann. Das
Kommando wird in <a href="magic.html">MagiC</a> ab Version 3.0 unterstützt.
<br>&nbsp;
<a name="FIONWRITE"></a>
<br><b>FIONWRITE (0x4602):</b>
<br>Analog FIONREAD, nur wird hier die Anzahl der Bytes, die z.Zt.
geschrieben werden können, ausgegeben. Das Kommando wird in <a href="magic.html">MagiC</a> ab
Version 3.0 unterstützt.
<br>&nbsp;
<a name="FUTIME"></a>
<br><b>FUTIME (0x4603):</b>
<br>z.Zt. keine Informationen bekannt.
<br>&nbsp;
<a name="FTRUNCATE"></a>
<br><b>FTRUNCATE (0x4604):</b>
<br>Der Parameter <i>arg</i> ist ein Zeiger auf einen Long-Wert, der
die neue Länge der zu verkürzenden Datei enthält. Das Kommando wird
in <a href="magic.html">MagiC</a> ab Version 3.0 unterstützt.
<br>&nbsp;
<a name="FIOEXECPT"></a>
<br><b>FIOEXECPT (0x4605):</b>
<br>Im Parameter <i>arg</i> wird ein Zeiger auf einen Long-Wert
zurückgegeben, in dem steht, ob sich die Datei in einem
Ausnahmezustand befindet (1) oder nicht (0).
<br>&nbsp;
<a name="Fcntl_2C_20Terminal-Kommandos_20f_C3_BCr"></a>
<br>Die folgenden Kommandos sind auf alle Terminal-Devices wie die
Console oder ein Pseudo-Terminal anzuwenden:
<br>&nbsp;
<a name="TIOCGETP"></a>
<br><b>TIOCGETP (0x5400):</b>
<br>Dieses Kommando gibt über den Parameter <i>arg</i> einen Zeiger
auf eine <a href="gemdos_structures.html#sgttyb">sgttyb</a>-Struktur zurück, in der die Parameter des Terminals
definiert sind.
<br>&nbsp;
<a name="TIOCSETN"></a>
<br><b>TIOCSETN (0x5401):</b>
<br>Über dieses Kommando kann ein neue <a href="gemdos_structures.html#sgttyb">sgttyb</a>-Struktur gesetzt
werden, welche die Parameter des Terminals festlegt. Es müssen zeurst
die Parameter des Terminals erfragt werden, die gewünschten
verändert und dann mit diesem Kommando gesetzt werden.
<br>&nbsp;
<a name="TIOCGETC"></a>
<br><b>TIOCGETC (0x5402):</b>
<br>Dieses Kommando liefert über den Parameter <i>arg</i> einen
Zeiger auf eine <a href="gemdos_structures.html#tchars">tchars</a>-Struktur zurück, in welcher die
Terminal-Kontrollzeichen definiert sind.
<br>&nbsp;
<a name="TIOCSETC"></a>
<br><b>TIOCSETC (0x5403):</b>
<br>Über dieses Kommando können neue Terminal-Kontrollzeichen
gesetzt werden. Dazu übergibt man in <i>arg</i> einen Zeiger auf
eine <a href="gemdos_structures.html#tchars">tchars</a>-Struktur, in welcher die Kontrollzeichen definiert sind.
Wird ein Zeichen auf 0 gesetzt, so wird die entsprechende Funktion
gesperrt.
<br>&nbsp;
<a name="TIOCGLTC"></a>
<br><b>TIOCGLTC (0x5404):</b>
<br>Dieses Kommando liefert über den Parameter <i>arg</i> einen
Zeiger auf eine <a href="gemdos_structures.html#ltchars">ltchars</a>-Struktur zurück, in welcher die erweiterten
Terminal-Kontrollzeichen definiert sind.
<br>&nbsp;
<a name="TIOCSLTC"></a>
<br><b>TIOCSLTC (0x5405):</b>
<br>Über dieses Kommando können neue erweiterte
Terminal-Kontrollzeichen gesetzt werden. Dazu übergibt man in
<i>arg</i> einen Zeiger auf eine <a href="gemdos_structures.html#ltchars">ltchars</a>-Struktur, in welcher die
Kontrollzeichen definiert sind. Wird ein Zeichen auf 0 gesetzt, so
wird die entsprechende Funktion gesperrt.
<br>&nbsp;
<a name="TIOCGPGRP"></a>
<br><b>TIOCGPGRP (0x5406):</b>
<br>Dieses Kommando liefert über den Parameter <i>arg</i> einen
Zeiger auf die Prozess-Gruppe des Terminals zurück.
<br>&nbsp;
<a name="TIOCSPGRP"></a>
<br><b>TIOCSPGRP (0x5407):</b>
<br>Über dieses Kommando kann die Prozess-Gruppe des Terminals
eingestellt werden. Dazu wird über den Parameter <i>arg</i> ein
Zeiger auf die entsprechende Prozess-Gruppe übergeben. Sollten
Prozesse aus anderen Gruppen versuchen, auf dieses Terminal (lesend
oder schreibend) zuzugreifen, so werden ihnen Job-Control-<a href="gemdos_signals.html">Signale</a>
(<a href="gemdos_signals.html#SIGTSTP">SIGTSTP</a> etc.) gesendet.
<br>&nbsp;
<a name="TIOCFLUSH"></a>
<br><b>TIOCFLUSH (0x5408):</b>
<br>Über dieses Kommando kann die Art des Flushings spezifiziert
werden. Dazu wird über den Parameter <i>arg</i> ein Zeiger auf einen
Long-Wert übergeben, der die gewünschte Art beschreibt. Dabei gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Wert</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top"> Ein- und Ausgabe flushen
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-0 gesetzt</td>
<td valign="top"> Eingabe flushen
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-1 gesetzt</td>
<td valign="top"> Ausgabe flushen

</td></tr>
</table>

<a name="TIOCSTOP"></a>
<br><b>TIOCSTOP (0x5409):</b>
<br>Dieses Kommando unterbricht die Ausgabe auf das Terminal (ähnlich
der Flußkontrolle per Control-S). Der Parameter <i>arg</i> ist in
diesem Zusammenhang ohne Bedeutung.
<br>&nbsp;
<a name="TIOCSTART"></a>
<br><b>TIOCSTART (0x540a):</b>
<br>Dieses Kommando sorgt dafür, daß die Ausgabe des Terminals
wieder aufgenommen wird (ähnlich der Flußkontrolle per Control-Q).
Der Parameter <i>arg</i> ist in diesem Zusammenhang ohne Bedeutung.
<br>&nbsp;
<a name="TIOCGWINSZ"></a>
<br><b>TIOCGWINSZ (0x540b):</b>
<br>Über dieses Kommando kann die Fenstergröße für ein Textfenster
erfragt werden. Dazu wird über den Parameter <i>arg</i> ein Zeiger
auf eine <a href="gemdos_structures.html#winsize">winsize</a>-Struktur zurückgeliefert. Falls eine Komponente
dieser Struktur den Wert 0 besitzt, so bedeutet dies, daß der
entsprechende Wert unbekannt ist.
<br>&nbsp;
<a name="TIOCSWINSZ"></a>
<br><b>TIOCSWINSZ (0x540c):</b>
<br>Über dieses Kommando kann die Fenstergröße gesetzt werden. Dazu
wird über den Parameter <i>arg</i> ein Zeiger auf eine
<a href="gemdos_structures.html#winsize">winsize</a>-Struktur übergeben, die die notwendigen Informationen
enthält. Zu beachten ist in diesem Zusammenhang, daß der Kernel den
Aufruf zwar bearbeitet, die Ausführung aber Window-Managern
überläßt. Diese senden auch das Signal <a href="gemdos_signals.html#SIGWINCH">SIGWINCH</a>, falls notwendig.
<br>&nbsp;
<a name="TIOCGXKEY"></a>
<br><b>TIOCGXKEY (0x540d):</b>
<br>Dieses Kommando ermittelt die Definition einer Funktions- bzw.
Cursortaste. Dazu wird über den Parameter <i>arg</i> ein Zeiger auf
eine <a href="gemdos_structures.html#xkey">xkey</a>-Struktur übergeben. Die Komponente xk_num der Struktur muß
dabei mit der gewünschten Taste gefüllt werden:
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="right" valign="top">xk_num</td>
  <td align="left" valign="top">Taste</td>
</tr>
<tr>
  <td align="right" valign="top">0-9</td>
  <td align="left" valign="top">F1-F10</td>
</tr>
<tr>
  <td align="right" valign="top">10-19</td>
  <td align="left" valign="top">F11-F20 (über shift erreichbar)</td>
</tr>
<tr>
  <td align="right" valign="top">20</td>
  <td align="left" valign="top">Cursor hoch</td>
</tr>
<tr>
  <td align="right" valign="top">21</td>
  <td align="left" valign="top">Cursor runter</td>
</tr>
<tr>
  <td align="right" valign="top">22</td>
  <td align="left" valign="top">Cursor nach rechts</td>
</tr>
<tr>
  <td align="right" valign="top">23</td>
  <td align="left" valign="top">Cursor nach links</td>
</tr>
<tr>
  <td align="right" valign="top">24</td>
  <td align="left" valign="top">Help</td>
</tr>
<tr>
  <td align="right" valign="top">25</td>
  <td align="left" valign="top">Undo</td>
</tr>
<tr>
  <td align="right" valign="top">26</td>
  <td align="left" valign="top">Insert</td>
</tr>
<tr>
  <td align="right" valign="top">27</td>
  <td align="left" valign="top">Clr/Home</td>
</tr>
<tr>
  <td align="right" valign="top">28</td>
  <td align="left" valign="top">Shift + Cursor hoch</td>
</tr>
<tr>
  <td align="right" valign="top">29</td>
  <td align="left" valign="top">Shift + Cursor runter</td>
</tr>
<tr>
  <td align="right" valign="top">30</td>
  <td align="left" valign="top">Shift + Cursor nach rechts</td>
</tr>
<tr>
  <td align="right" valign="top">31</td>
  <td align="left" valign="top">Shift + Cursor nach links</td>
</tr>
</table>
</div>

<br>Der zu der Taste gehörende String (es gilt die Konvention der
Sprache C) wird über die Komponente xk_def zurückgeliefert.
<br>&nbsp;
<a name="TIOCSXKEY"></a>
<br><b>TIOCSXKEY (0x540e):</b>
<br>Über dieses Kommando kann die Definition einer Funktions- bzw.
Cursortaste gesetzt werden. Dazu übergibt man über den Parameter
<i>arg</i> einen Zeiger auf eine <a href="gemdos_structures.html#xkey">xkey</a>-Struktur, in der die
Komponenten xk_num und xk_def bereits gesetzt sein müssen. Nach
Ausführung des Kommandos wird dann per <a href="#Fread">Fread</a> der in xk_def angegebene
String (statt ASCII-0) zurückgeliefert. Diese Übersetzung findet
jedoch nur statt, wenn das Programm per <a href="gemdos_process.html#Pdomain">Pdomain</a> in die <a href="gemdos_process.html#MiNT-Domain">MiNT-Domain</a>
gesetzt wurde und die Zeichen vom Terminal mittels <a href="#Fread">Fread</a> gelesen
werden. Da der in xk_def übergebene String nullterminiert sein muß,
können auf diese Art und Weise maximal 7 Zeichen übergeben werden.
<br>&nbsp;
<a name="TIOCIBAUD"></a>
<br><b>TIOCIBAUD (0x5412):</b>
<br>Über dieses Kommando kann die Baudrate für die Eingabe des
Terminals eingestellt werden. Dazu wird über den Parameter
<i>arg</i> ein Zeiger auf einen Long-Wert übergeben, in dem die
Baudrate angegeben ist.
<br>&nbsp;
<a name="TIOCOBAUD"></a>
<br><b>TIOCOBAUD (0x5413):</b>
<br>Über dieses Kommando kann die Baudrate für die Ausgabe des
Terminals eingestellt werden. Dazu wird über den Parameter
<i>arg</i> ein Zeiger auf einen Long-Wert übergeben, in dem die
Baudrate angegeben ist.
<br>&nbsp;
<a name="TIOCCBRK"></a>
<br><b>TIOCCBRK (0x5414):</b>
<br>Dieses Kommando löscht Bit-3 des TSR-<a href="xbios_dhs.html#Registers">Registers</a> des
Peripherie-Bausteins MFP68901.
<br>&nbsp;
<a name="TIOCSBRK"></a>
<br><b>TIOCSBRK (0x5415):</b>
<br>Dieses Kommando setzt Bit-3 des TSR-<a href="xbios_dhs.html#Registers">Registers</a> des
Peripherie-Bausteins MFP68901. Dadurch wird ein Break gesendet, sobald
das Senderegister leer ist. Der Parameter <i>arg</i> ist in diesem
Zusammenhang ohne Bedeutung.
<br>&nbsp;
<a name="TIOCGFLAGS"></a>
<br><b>TIOCGFLAGS (0x5416):</b>
<br>Dieses Kommando gibt über den Parameter <i>arg</i> einen Zeiger
auf die Terminal-Kontrollflags zurück. Dieses Kommando gibt in den
unteren Bits des LONGS, auf den der Parameter <i>arg</i> zeigt, die
Terminal-Kontrollflags (z.B. Anzahl Stop-Bits und Daten-Bits) zurück.
Folgend Bitmasken sind möglich:
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Maske</td>
  <td align="left" valign="top">Bedeutung</td>
</tr>
<tr>
  <td align="left" valign="top">0x0001</td>
  <td align="left" valign="top">1 Stop-Bit</td>
</tr>
<tr>
  <td align="left" valign="top">0x0002</td>
  <td align="left" valign="top">1.5 Stop-Bits</td>
</tr>
<tr>
  <td align="left" valign="top">0x0003</td>
  <td align="left" valign="top">2 Stop-Bits</td>
</tr>
<tr>
  <td align="left" valign="top">0x0000</td>
  <td align="left" valign="top">8 Daten-Bits</td>
</tr>
<tr>
  <td align="left" valign="top">0x0004</td>
  <td align="left" valign="top">7 Daten-Bits</td>
</tr>
<tr>
  <td align="left" valign="top">0x0008</td>
  <td align="left" valign="top">6 Daten-Bits</td>
</tr>
<tr>
  <td align="left" valign="top">0x000C</td>
  <td align="left" valign="top">5 Daten-Bits</td>
</tr>
</table>
</div>

<a name="TIOCSFLAGS"></a>
<br><b>TIOCSFLAGS (0x5417):</b>
<br>Dieses Kommando setzt neue Terminal-Kontrollflags, die über den
Parameter <i>arg</i> übergeben werden.
<br>&nbsp;
<a name="TIOCOUTQ"></a>
<br><b>TIOCOUTQ (0x5418):</b>
<br>Dieses Kommando gibt in <i>arg</i> einen Zeiger auf einen
Long-Wert zurück, in dem die Anzahl der Bytes im Ausgabepuffer
gespeichert ist.
<br>&nbsp;
<a name="TIOCSETP"></a>
<br><b>TIOCSETP (0x5419):</b>
<br>Funktioniert analog zu TIOCSETN, mit dem Unterschied, daß (wenn
das Terminal TIOCOUTQ unterstützt) die Funktion erst dann
zurückkehrt, wenn der Ausgabepuffer leer ist.
<br>&nbsp;
<a name="TCURSOFF"></a>
<br><b>TCURSOFF (0x6300):</b>
<br>Dieses Kommando schaltet den Cursor des Terminals aus.
<br>&nbsp;
<a name="TCURSON"></a>
<br><b>TCURSON (0x6301):</b>
<br>Dieses Kommando schaltet den Cursor des Terminals ein.
<br>&nbsp;
<a name="TCURSBLINK"></a>
<br><b>TCURSBLINK (0x6302):</b>
<br>Dieses Kommando schaltet den Cursor des Terminals auf Blinken. Die
Blinkrate läßt sich per TCURSSRATE einstellen.
<br>&nbsp;
<a name="TCURSSTEADY"></a>
<br><b>TCURSSTEADY (0x6303):</b>
<br>Dieses Kommando schaltet das Cursor-Blinken des Terminals wieder
aus.
<br>&nbsp;
<a name="TCURSSRATE"></a>
<br><b>TCURSSRATE (0x6304):</b>
<br>Dieses Kommando setzt die Cursor-Blinkrate des Terminals. Dazu
wird in <i>arg</i> ein Zeiger auf einen Word-Wert übergeben, der
angibt, nach wievielen Vertical-Blanks der Cursor einmal invertiert
werden soll.
<br>&nbsp;
<a name="TCURSGRATE"></a>
<br><b>TCURSGRATE (0x6305):</b>
<br>Dieses Kommando ermittelt die Cursor-Blinkrate des Terminals.
Diese wird in einem Word-Wert zurückgegeben, auf den <i>arg</i>
zeigt.
<br>&nbsp;
<a name="Fcntl_2C_20Prozess-Kommandos_20f_C3_BCr"></a>
<br>Die folgenden Kommandos sind nur auf (als Dateien geöffnete)
Prozesse anwendbar. Um den eigenen Prozess als Datei zu öffnen, muß
als Pfad für <a href="#Fopen">Fopen</a> 'U:\PROC\prozessname.-1' angegeben werden. Dabei
wählt die Extension -1 den eigenen, und -2 den Parent-Prozess.
<br>&nbsp;
<a name="PBASEADDR"></a>
<br><b>PBASEADDR (0x5002):</b>
<br>Im Parameter <i>arg</i> wird ein Zeiger auf die Adresse der
<a href="gemdos_structures.html#BASEPAGE">Basepage</a>, des als Datei geöffneten Prozesses zurückgegeben. Das
Kommando wird in <a href="magic.html">MagiC</a> ab Version 3.0 unterstützt.
<br>&nbsp;
<a name="PPROCADDR"></a>
<br><b>PPROCADDR (0x5001):</b>
<br>Im Parameter <i>arg</i> wird ein Zeiger auf die Adresse des PCB
(Prozess-Control-Blocks) zurückgegeben.
<br>&nbsp;
<a name="PCTXTSIZE"></a>
<br><b>PCTXTSIZE (0x5003):</b>
<br>Im Parameter <i>arg</i> wird ein Zeiger auf einen Long-Wert
geliefert, in dem die Länge des Prozess-Context-Blocks angegeben ist.
Zwei dieser Strukturen befinden sich im Speicher vor dem PCB, dessen
Adresse mit PPROCADDR erfragt werden kann. Die erste Struktur ist
dabei für den aktuellen Prozesskontext verantwortlich, während die
zweite den gespeicherten Kontext des letzten Systemaufrufs enthält.
<br>&nbsp;
<a name="PSETFLAGS"></a>
<br><b>PSETFLAGS (0x5004):</b>
<br>Dieses Kommando setzt die Programmflags (entsprechend denen im
<a href="gemdos_programs.html#Programmheader">Programmheader</a>. In <i>arg</i> wird dazu ein Zeiger auf einen
Long-Wert übergeben, dessen untere 16 Bits die Programmflags
darstellen.
<br>&nbsp;
<a name="PGETFLAGS"></a>
<br><b>PGETFLAGS (0x5005):</b>
<br>Dieses Kommando ermittelt die aktuellen <a href="gemdos_programs.html#Die_20Programmflags">Programmflags</a>. Über den
Parameter <i>arg</i> wird dabei ein Zeiger auf diese Flags
zurückgegeben.
<br>&nbsp;
<a name="PTRACESFLAGS"></a>
<br><b>PTRACESFLAGS (0x5006):</b>
<br>Dieses Kommando setzt die Prozess-Tracing-Flags. Im Parameter
<i>arg</i> wird ein Zeiger auf einen Word-Wert übergeben, der die
Flags repräsentiert:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">P_ENABLE</td>
<td valign="top"> = 1 (Tracen einschalten)
</td></tr>

<tr><td nowrap="nowrap" valign="top">P_DOS</td>
<td valign="top"> = 2 (<a href="gemdos_main.html">GEMDOS</a>-Aufrufe tracen)
</td></tr>

<tr><td nowrap="nowrap" valign="top">P_<a href="bios_main.html">BIOS</a></td>
<td valign="top"> = 4 (<a href="bios_main.html">BIOS</a>-Aufrufe tracen)
</td></tr>

<tr><td nowrap="nowrap" valign="top">P_<a href="xbios_main.html">XBIOS</a></td>
<td valign="top"> = 8 (<a href="xbios_main.html">XBIOS</a>-Aufrufe tracen)

</td></tr>
</table>

<a name="PTRACEGFLAGS"></a>
<br><b>PTRACEGFLAGS (0x5007):</b>
<br>Dieses Kommando ermittelt die aktuellen Prozess-Tracing Flags.
Über den Parameter <i>arg</i> wird ein Zeiger auf diese Flags
zurückgegeben.
<br>&nbsp;
<br><b>PTRACEGO (0x5008):</b> (ab MC-68020 Prozessor)
<br><b>PTRACEFLOW (0x5009):</b>
<br><b>PTRACESTEP (0x500a):</b>
<br><b>PTRACE11 (0x500b):</b>
<br>Diese Funktionen sollen einmal das Tracen von Prozessen
ermöglichen. Der zu tracende Prozess muß sich dafür im Zustand
'suspendiert' befinden. Er wird durch die Trace Funktion wieder
aufgeweckt. Diese Funktionen sind z.Zt. jedoch noch nicht
implementiert.
<br>&nbsp;
<a name="PLOADINFO"></a>
<br><b>PLOADINFO (0x500c):</b>
<br>Dieses Kommando gibt in <i>arg</i> einen Zeiger auf die <a href="gemdos_structures.html#ploadinfo">ploadinfo</a>
Struktur zurück, in der Programmname und Kommandozeile gespeichert
sind.
<br>&nbsp;
<a name="PFSTAT"></a>
<br><b>PFSTAT (0x500d):</b>
<br>Dieses Kommando entspricht FSTAT. Es ermittelt die erweiterten
Attribute der zum Prozess gehörenden Programmdatei.
<br>&nbsp;
<a name="Fcntl_2C_20SharedMem-Kommandos_20f_C3_BCr"></a>
<br>Die folgenden Kommandos sind nur auf Dateien anwendbar, die
Shared Memory repräsentieren:
<br>&nbsp;
<a name="SHMGETBLK"></a>
<br><b>SHMGETBLK (0x4d00):</b>
<br>Dieses Kommando liefert die Adresse eines per SHMSETBLK
allozierten Speicherblocks zurück (bzw. einen Nullzeiger bei
Fehlern). Aus Kompatibilitätsgründen muß der Parameter <i>arg</i>
auf den Wert 0 gesetzt werden. <b>Hinweis:</b> Verschiedene Prozesse
können den Speicherblock an unterschiedlichen Stellen in ihrem
Adressraum sehen. Aus diesem Grund darf ein Shared-Memory-Bereich
keine absoluten Zeiger auf Daten enthalten! Das Kommando wird in <a href="magic.html">MagiC</a>
ab Version 3.0 unterstützt.
<br>&nbsp;
<a name="SHMSETBLK"></a>
<br><b>SHMSETBLK (0x4d01):</b>
<br>Im Parameter <i>arg</i> wird ein Zeiger auf einen Speicherblock
übergeben, welcher vorher per <a href="gemdos_memory.html#Malloc">Malloc</a>/<a href="gemdos_memory.html#Mxalloc">Mxalloc</a> alloziert wurde. Der
Speicher wird nun unter dem Dateinamen der Datei mit Handle <i>fh</i>
zum Sharing angeboten. Die Datei muß dazu im Unterverzeichnis U:\SHM
angelegt werden. Der Block wird derart markiert, daß er nicht beim
Beenden des Prozesses freigegeben wird. Die Länge wird ermittelt und
sowohl für die geöffnete Datei verwendet, als auch in das
Verzeichnis eingetragen. Ungültige Blockadressen führen zum
Fehlercode <a href="gemdos_errors.html#EIMBA">EIMBA</a> oder zu einem Bus- oder Adreßfehler. Das Kommando
wird in <a href="magic.html">MagiC</a> ab Version 3.0 unterstützt.
<br>&nbsp;
<a name="Fcntl_2C_20CD-ROM-Kommandos_20f_C3_BCr"></a>
<a name="CD-ROM-Funktionen"></a>
<br>Die folgenden Kommandos sind im Zusammenhang mit CD-ROM's
interessant:
<br>&nbsp;
<a name="CDROMREADOFFSET"></a>
<br><b>CDROMREADOFFSET (0x4300):</b>
<br>Dieses Kommando ermittelt die Blocknummer des ersten Sektors der
letzten Session einer Multi-Session-CD. Der Parameter <i>arg</i>
enthält nach dem Aufruf diese Blocknummer.
<br>&nbsp;
<a name="CDROMPAUSE"></a>
<br><b>CDROMPAUSE (0x4301):</b>
<br>Dieses Kommando veranlaßt ein CD-ROM beim Abspielen einer
Audio-CD in den Status <a href="gemdos_process.html#Pause">Pause</a> zu treten.
<br>&nbsp;
<a name="CDROMRESUME"></a>
<br><b>CDROMRESUME (0x4302):</b>
<br>Dieses Kommando veranlaßt ein CD-ROM das Abspielen einer Audio-CD
fortzusetzen (<a href="gemdos_process.html#Pause">Pause</a> wird aufgehoben).
<br>&nbsp;
<a name="CDROMPLAYMSF"></a>
<br><b>CDROMPLAYMSF (0x4303):</b>
<br>Dieses Kommando startet eine Audio-Wiedergabe. Der Parameter
<i>arg</i> ist ein Zeiger auf eine <a href="gemdos_structures.html#cdrom_msf">cdrom_msf</a>-Struktur, in die
Anfangs- und Endzeit in MSF-Notation einzutragen sind.
<br>&nbsp;
<a name="CDROMPLAYTRKIND"></a>
<br><b>CDROMPLAYTRKIND (0x4304):</b>
<br>Dieses Kommando startet eine Audio-Wiedergabe. Der Parameter
<i>arg</i> ist ein Zeiger auf eine <a href="gemdos_structures.html#cdrom_ti">cdrom_ti</a>-Struktur, in die Start-
und Endposition in Track/<a href="indexudo.html">Index</a>-Schreibweise einzutragen sind. Bei den
meisten Audio-CD's aus dem POP Bereich sind die Tracks nicht weiter
eingeteilt. Viele Klassik-CD's haben aber auch innerhalb der Tracks
noch eine feinere Einstellung in Indices. <b>Achtung:</b> Nicht jedes
CD-ROM kann gezielt Indizes ungleich Eins ansteuern!
<br>&nbsp;
<a name="CDROMREADTOCHDR"></a>
<br><b>CDROMREADTOCHDR (0x4305):</b>
<br>Dieses Kommando erlaubt es, Informationen über den Aufbau einer
CD zu ermitteln. Der Parameter <i>arg</i> ist ein Zeiger auf eine
<a href="gemdos_structures.html#cdrom_tochdr">cdrom_tochdr</a>-Struktur, in welche der erste und letzte Track der CD
eingetragen werden.
<br>&nbsp;
<a name="CDROMREADTOCENTRY"></a>
<br><b>CDROMREADTOCENTRY (0x4306):</b>
<br>Dieses Kommando erlaubt es, Informationen über den Aufbau einer
CD zu ermitteln. Der Parameter <i>arg</i> ist ein Zeiger auf eine
<a href="gemdos_structures.html#cdrom_tocentry">cdrom_tocentry</a>-Struktur, in welche die gewünschten Informationen
eingetragen werden.
<br>&nbsp;
<a name="CDROMSTOP"></a>
<br><b>CDROMSTOP (0x4307):</b>
<br>Dieses Kommando stoppt das entsprechende Laufwerk.
<br>&nbsp;
<a name="CDROMSTART"></a>
<br><b>CDROMSTART (0x4308):</b>
<br>Dieses Kommando startet das entsprechende Laufwerk, und zieht
ggfs. die Schublade wieder ein.
<br>&nbsp;
<a name="CDROMEJECT"></a>
<br><b>CDROMEJECT (0x4309):</b>
<br>Dieses Kommando sorgt für das Ausfahren der Schublade des
entsprechenden Laufwerkes.
<br>&nbsp;
<a name="CDROMVOLCTRL"></a>
<br><b>CDROMVOLCTRL (0x430a):</b>
<br>Dieses Kommando erlaubt es, die Lautstärke und Kanalzuordnungen
der einzelnen Audio-Kanäle zu verändern. Der Parameter <i>arg</i>
ist ein Zeiger auf eine <a href="gemdos_structures.html#cdrom_volctrl">cdrom_volctrl</a>-Struktur. Das Kommando ist zum
entsprechenden SunOS-Aufruf kompatibel. <b>Achtung:</b> Das
Verstellen der Lautstärke ist nicht bei allen Geräten möglich!
<br>&nbsp;
<a name="CDROMSUBCHNL"></a>
<br><b>CDROMSUBCHNL (0x430b):</b>
<br>Dieses Kommando ermittelt die aktuellen Positionsdaten, sowie den
Audio-Status. Der Parameter <i>arg</i> ist ein Zeiger auf eine
<a href="gemdos_structures.html#cdrom_subchnl">cdrom_subchnl</a>-Struktur.
<br>&nbsp;
<a name="CDROMREADMODE2"></a>
<br><b>CDROMREADMODE2 (0x430c):</b>
<br>Dieses Kommando ermöglicht das Lesen von Modus-2 Sektoren. Solche
Sektoren werden bei <a href="wind.html#XA">XA</a>-CDs (Beispiel: Photo-CD ohne Fehlerkorrektur
oder Video-CD) verwendet und enthalten 2336 Bytes. Der Parameter
<i>arg</i> ist ein Zeiger auf eine <a href="gemdos_structures.html#cdrom_read">cdrom_read</a> Struktur.
<b>Achtung:</b> Nicht alle Geräte können diese Sektortypen lesen,
und nicht alle Treiber bieten diese Funktion an.
<br>&nbsp;
<a name="CDROMREADMODE1"></a>
<br><b>CDROMREADMODE1 (0x430d):</b>
<br>Dieses Kommando ermöglicht das Lesen von Modus-1 Sektoren. Solche
Sektoren sind 2048 Bytes groß, und werden auf normalen CD-ROMs
benutzt. Der Parameter <i>arg</i> ist ein Zeiger auf eine
<a href="gemdos_structures.html#cdrom_read">cdrom_read</a>-Struktur. <b>Achtung:</b> Nicht alle Geräte können diese
Sektortypen lesen, und nicht alle Treiber bieten diese Funktion an.
<br>&nbsp;
<a name="CDROMPREVENTREMOVAL"></a>
<br><b>CDROMPREVENTREMOVAL (0x430e):</b>
<br>Dieses Kommando sperrt die Auswurffunktion des entsprechenden
CD-ROMs. Dies kann z.B. nützlich sein, wenn das Gerät an einem
öffentlichen Ort steht, und man dem CD-Klau vorbeugen will.
<br>&nbsp;
<a name="CDROMALLOWREMOVAL"></a>
<br><b>CDROMALLOWRMOVAL (0x430f):</b>
<br>Dieses Kommando gibt den Auswurf des entsprechenden CD-ROMs wieder
frei.
<br>&nbsp;
<a name="CDROMAUDIOCTRL"></a>
<br><b>CDROMAUDIOCTRL (0x4310):</b>
<br>Diese Kommando erlaubt es, die Lautstärke und Kanalzuordnungen
der einzelnen Audio-Kanäle zu verändern. Der Parameter <i>arg</i>
ist ein Zeiger auf eine <a href="gemdos_structures.html#cdrom_audioctrl">cdrom_audioctrl</a>-Struktur. Indem man die
Komponente set dieser Struktur auf den Wert Null setzt, können die
aktuellen Einstellungen erfragt werden. <b>Achtung:</b> Das
Verstellen der Lautstärke ist nicht bei allen Geräten möglich!
<br>&nbsp;
<a name="CDROMREADDA"></a>
<br><b>CDROMREADDA (0x4311):</b>
<br>Dieses Kommando ermöglicht das Lesen von Digital-Audio (DA)
Sektoren. Solche Sektoren sind 2352 Bytes groß, und enthalten pro
Sektor 588 Samples im 16-Bit-Stereo-PCM Format. Der Parameter
<i>arg</i> ist ein Zeiger auf eine <a href="gemdos_structures.html#cdrom_read">cdrom_read</a> Struktur.
<b>Achtung:</b> Nicht alle Geräte können diese Sektortypen lesen,
und nicht alle Treiber bieten diese Funktion an.
<br>&nbsp;
<a name="CDROMGETMCN"></a>
<br><b>CDROMGETMCN (0x4313):</b>
<br>Dieses Kommando ermittelt die Media Catalog Number, die
theoretisch benutzt werden kann, um eine CD einwandfrei zu
identifizieren. Leider ist diese Information auf den allerwenigsten
CDs vorhanden. Der Parameter <i>arg</i> ist ein Zeiger auf eine
<a href="gemdos_structures.html#cdrom_mcn">cdrom_mcn</a>-Struktur.
<br>&nbsp;
<a name="CDROMGETTISRC"></a>
<br><b>CDROMGETTISRC (0x4314):</b>
<br>Dieses Kommando ermittelt den Track-International-Standard
Recording-Code, der eine eindeutige Kennzeichnung für einzelne Tracks
darstellen soll. Der Parameter <i>arg</i> ist ein Zeiger auf eine
<a href="gemdos_structures.html#cdrom_tisrc">cdrom_tisrc</a>-Struktur.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&gt;= 0 :</td>
<td valign="top"> kein Fehler aufgetreten (Abweichungen s.o.)
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> ungültiges Datei-Handle.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EINVFN">EINVFN</a> :</td>
<td valign="top"> Kommando kann mit dem Handle <i>fh</i> nicht ausgeführt
werden.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Seit der ersten in MultiTOS integrierten MiNT Version 1.04 und
<a href="magic.html">MagiC</a> ab Version 3.0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fcntl">Binding</a> &nbsp; <a href="#Fdup">Fdup</a> &nbsp; <a href="#Flock">Flock</a> &nbsp; <a href="#Fopen">Fopen</a> &nbsp; <a href="#Fxattr">Fxattr</a> &nbsp; <a href="gemdos_process.html#Pgetpgrp">Pgetpgrp</a> &nbsp; <a href="gemdos_process.html#Psetpgrp">Psetpgrp</a> &nbsp;
<a href="xbios_drive.html#Metaioctl">Metaioctl</a> &nbsp; <a href="gemdos_structures.html#CD-ROM_20Definitionen">CD-ROM Definitionen</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fcntl">5.9.7.1 Bindings für Fcntl</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fcntl">Fcntl</a> ( int16_t fh, int32_t arg, int16_t cmd );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    cmd,-(sp)    ; Offset 8
move.l    arg,-(sp)    ; Offset 4
move.w    fh,-(sp)     ; Offset 2
move.w    #260,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $A(sp),sp    ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fcreate">5.9.8 Fcreate</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file create« - Datei anlegen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 60
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Fcreate ( const int8_t *fname, int16_t attr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fcreate legt eine neue Datei mit dem
angegebenen Namen und Attributen an oder löscht den Inhalt einer
vorhandenen. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Zeiger auf den Dateinamen
</td></tr>

<tr><td nowrap="nowrap" valign="top">attr</td>
<td valign="top"> Dateiattribute
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Bit-0:</td>
<td valign="top"> Datei ist schreibgeschützt
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-1:</td>
<td valign="top"> Datei ist versteckt
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-2:</td>
<td valign="top"> Systemdatei
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-3:</td>
<td valign="top"> Diskettenname
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-5:</td>
<td valign="top"> Archiv Bit

</td></tr>
</table>


</td></tr>
</table>

<br><b>Hinweis:</b> Im <a href="gemdos_mintnet.html">Netzwerk</a> setzt das Erzeugen einer Datei die
Exclusivität. Ob das zugrundeliegende GEMDOS netzwerkfähig ist, kann
über den Cookie <a href="bios_cookiejar.html#Cookie_2C_20_FLK">_FLK</a> ermittelt werden.
<br>&nbsp;
<br><b>Anmerkung zu MagiC:</b> Ist Bit-3 in attr gesetzt, wird die
XFS-Funktion <a href="magic_xfs.html#xfs_wlabel">xfs_wlabel</a> aufgerufen. Wenn diese Funktion ohne Fehler
ausgeführt werden kann, wird als Rückgabewert 0x0000fffc
zurückgegeben. Dies entspricht einem Handle für die Datei NUL: bzw.
U:\DEV\NULL. Dieses Feature ist jedoch nur noch aus
Kompatibilitätsgründen vorhanden; ab <a href="magic.html">MagiC</a> 3 sollte besser auf die
Funktion <a href="gemdos_directory.html#Dwritelabel">Dwritelabel</a> zurückgegriffen werden.
<br>&nbsp;
<br>Die angegebenen Attribute existieren nur unter DOS-Dateisystemen
und werden von anderen Dateisystemen ignoriert oder simuliert. Beim
Macintosh Dateisystem (HFS) wird z.B. nur Bit-0 von <i>attr</i>
unterstützt.
<br>&nbsp;
<br>Symbolische Links werden übrigens von dieser Funktion
dereferenziert, d.h. wenn die Datei bereits als symb. Link existiert,
wird die von diesem Link referenzierte Datei auf die Länge Null
gesetzt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert folgende Resultate:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EPTHNF">EPTHNF</a> :</td>
<td valign="top"> Zugriffspfad ist unkorrekt
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENHNDL">ENHNDL</a> :</td>
<td valign="top"> keine freien Dateihandles mehr
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> kein Schreibzugriff möglich
</td></tr>

<tr><td nowrap="nowrap" valign="top">sonst :</td>
<td valign="top"> Kennung der Datei

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen. Wird mit <a href="gemdos_main.html">GEMDOS</a> Version 0.13 eine
schreibgeschützte Datei angelegt, wird ein unbrauchbares Handle
zurück geliefert. <a href="gemdos_main.html">GEMDOS</a> Versionen kleiner 0.15 erlauben
fälschlicherweise mehr als einen Diskettenname auf einer Diskette.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fcreate">Binding</a> &nbsp; <a href="#Fopen">Fopen</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fcreate">5.9.8.1 Bindings für Fcreate</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#Fcreate">Fcreate</a> ( const int8_t *fname, int16_t attr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    attr,-(sp)   ; Offset 6
pea       fname        ; Offset 2
move.w    #60,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #8,sp        ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Handle%=Gemos(&amp;H3c,L:fname%,W:attr)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fdatime">5.9.9 Fdatime</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file date and time« - Uhrzeit und Datum einer Datei
ermitteln oder setzen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 87
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> void Fdatime ( <a href="gemdos_structures.html#DOSTIME">DOSTIME</a> *timeptr, int16_t handle, int16_t wflag
);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fdatime liest bzw. setzt <a href="gemdos_datetime.html">Datum und Uhrzeit</a>
der Erstellung einer Datei. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">timeptr</td>
<td valign="top"> Zeiger auf aufnehmende Struktur
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> Dateikennung
</td></tr>

<tr><td nowrap="nowrap" valign="top">wflag</td>
<td valign="top">
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">0 =</td>
<td valign="top"> Werte abfragen
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> Werte setzen

</td></tr>
</table>


</td></tr>
</table>

<br><b>Hinweis:</b> Aufgrund einiger Fehler in älteren Versionen
des GEMDOS, sollte die Funktion wie folgt angewendet werden:
<br>&nbsp;
<ul>
<li> Datei öffnen
</li>
<li> Fdatime aufrufen
</li>
<li> Datei schließen
</li>
</ul>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert kein direktes Ergebnis.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle GEMDOS Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fdatime">Binding</a> &nbsp; <a href="gemdos_datetime.html#Tgettime">Tgettime</a> &nbsp; <a href="gemdos_datetime.html#Tsettime">Tsettime</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fdatime">5.9.9.1 Bindings für Fdatime</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> void <a href="#Fdatime">Fdatime</a> ( <a href="gemdos_structures.html#DOSTIME">DOSTIME</a> *timeptr, int16_t handle, int16_t wflag
);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    wflag,-(sp)   ; Offset 8
move.w    handle,-(sp)  ; Offset 6
pea       timeptr       ; Offset 2
move.w    #87,-(sp)     ; Offset 0
trap      #1            ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $A(sp),sp     ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H57,L:timeptr%,W:handle%,W:wflag%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fdelete">5.9.10 Fdelete</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file delete« - Datei löschen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 65
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Fdelete ( const int8_t *fname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fdelete löscht die mit <i>fname</i>
bezeichnete Datei.
<br>&nbsp;
<br><b>Hinweis:</b> Die Funktion sollte nicht auf geöffnete
Dateien angewendet werden. Ab <a href="magic.html">MagiC</a> 4 funktioniert das Löschen auch
bei Dateien mit den Attributen 'Hidden' und 'System'. In MagiC werden
ferner <i>keine</i> symbolischen Links dereferenziert, d.h. es wird
der Link gelöscht, <i>nicht</i> die Datei oder der Ordner, auf die
der Link verweist.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert folgende Resultate:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a></td>
<td valign="top"> kein Fehler aufgetreten
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a></td>
<td valign="top"> Datei nicht gefunden
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a></td>
<td valign="top"> Zugriff verweigert

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle GEMDOS Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fdelete">Binding</a> &nbsp; <a href="#Fcreate">Fcreate</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fdelete">5.9.10.1 Bindings für Fdelete</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#Fdelete">Fdelete</a> ( const int8_t *fname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       fname        ; Offset 2
move.w    #65,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H41,L:fname%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fdirfd">5.9.11 Fdirfd</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fdirfd« - <a href="VT_52_terminal.html#Return">Return</a> a file descriptor from a directory handle.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 387 (0x0183)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Fdirfd ( int32_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> The function Fdirfd returns a file descriptor from the
specified directory handle.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert die entsprechende Dateikennung, oder eine
negative Fehlermeldung zurück.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Sie steht ab FreeMiNT 1.17 zur Verfügung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fdirfd">Binding</a> &nbsp; <a href="gemdos_directory.html#Dopendir">Dopendir</a> &nbsp; <a href="gemdos_directory.html#Dclosedir">Dclosedir</a> &nbsp; <a href="gemdos_directory.html#Dreaddir">Dreaddir</a> &nbsp; <a href="gemdos_directory.html#Drewinddir">Drewinddir</a> &nbsp;
<a href="#Ffdopendir">Ffdopendir</a> &nbsp; <a href="gemdos_process.html#Pdomain">Pdomain</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fdirfd">5.9.11.1 Bindings für Fdirfd</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#Fdirfd">Fdirfd</a> ( int32_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    handle,-(sp) ; Offset 2
move.w    #387,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fdup">5.9.12 Fdup</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file duplicate« - Datei-Handle duplizieren.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 69
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Fdup ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fdup erzeugt für einen Standardkanal (0-5)
eine Kopie und liefert eine neue Kennung (&gt;6) für einen
Standardkanal. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top"> Tastatur (stdin)
</td></tr>

<tr><td nowrap="nowrap" valign="top">1</td>
<td valign="top"> Bildschirm (stdout)
</td></tr>

<tr><td nowrap="nowrap" valign="top">2</td>
<td valign="top"> serielle Schnittstelle (stdaux)
</td></tr>

<tr><td nowrap="nowrap" valign="top">3</td>
<td valign="top"> parallele Schnittstelle (stdprn)

</td></tr>
</table>

<br><b>Hinweis:</b> In allen bekannten GEMDOS-Versionen (bis
einschließlich 0.19) treten Fehler auf, wenn nach einem Fdup, ein
Programm per <a href="gemdos_process.html#Pexec">Pexec</a> gestartet wird. Ab <a href="magic.html">MagiC</a> 4 kann man mit Hilfe
dieser Funktion auch die Gerätedateien -1,-2, -3 (systemglobal) und
-4 (NULL Device) ermitteln.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert folgende Resultate:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENHNDL">ENHNDL</a> :</td>
<td valign="top"> keine Kennung mehr frei
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> falsche Kennung
</td></tr>

<tr><td nowrap="nowrap" valign="top">sonst :</td>
<td valign="top"> die gewünschte neue Kennung

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fdup">Binding</a> &nbsp; <a href="#Fforce">Fforce</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fdup">5.9.12.1 Bindings für Fdup</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#Fdup">Fdup</a> ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    handle,-(sp)  ; Offset 2
move.w    #69,-(sp)     ; Offset 0
trap      #1            ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #4,sp         ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Phys_channel%=Gemdos(&amp;H45,W:handle%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Ffchmod">5.9.13 Ffchmod</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Ffchmod« - changes access permissions for an open file.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 258 (0x0102)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Ffchmod ( int16_t fd, int16_t mode);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Returns <a href="gemdos_errors.html#E_OK">E_OK</a> on success or a negative <a href="gemdos_main.html">GEMDOS</a> error code
otherwise.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Available as of FreeMiNT version 1.15.2
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Ffchmod">Binding</a> &nbsp; <a href="#Ffchown">Ffchown</a> &nbsp; <a href="#Fchmod">Fchmod</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Ffchmod">5.9.13.1 Bindings für Ffchmod</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Ffchmod">Ffchmod</a> ( int16_t fd, int16_t mode);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    mode,-(sp)   ; Offset 4
move.w    fd,-(sp)     ; Offset 2
move.w    #258,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Ffchown">5.9.14 Ffchown</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Ffchown« - changes ownership of an open file to uid and gid
respectively.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 257 (0x0101)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Ffchown ( int16_t fd, int16_t uid, int16_t gid );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> This function changes ownership of an open file to uid and gid
respectively.
<br>&nbsp;
<br>A non privileged process can only change the ownership of a file
that is owned by this user to the effective group id of the process or
one of its supplementary groups.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Returns <a href="gemdos_errors.html#E_OK">E_OK</a> on success or a negative <a href="gemdos_main.html">GEMDOS</a> error code
otherwise.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Available as of FreeMiNT version 1.15.2
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Ffchown">Binding</a> &nbsp; <a href="#Ffchmod">Ffchmod</a> &nbsp; <a href="#Fchown">Fchown</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Ffchown">5.9.14.1 Bindings für Ffchown</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Ffchown">Ffchown</a> ( int16_t fd, int16_t uid, int16_t gid );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    gid,-(sp)    ; Offset 6
move.w    uid,-(sp)    ; Offset 4
move.w    fd,-(sp)     ; Offset 2
move.w    #257,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #8,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Ffdopendir">5.9.15 Ffdopendir</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Ffdopendir« - Duplicate a directory handle from a file
descriptor.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 386 (0x182)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Ffdopendir ( int16_t fd );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> The function Ffdopendir duplicates a directory handle of a
opened directory by specifying its file descriptor. The <i>flag</i>
of the directory with ID <i>fd</i> is inherited by the new directory
handle.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert im Erfolgsfall eine 32bit
Verzeichnis-Handle. Diese darf auch negativ sein, enthält aber auf
keinen Fall den Wert 0xff im obersten Byte, wodurch es von Fehlern
unterschieden werden kann.
<br>&nbsp;
<br>Im Fehlerfall sind folgende Rückgabewerte möglich:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EPTHNF">EPTHNF</a> :</td>
<td valign="top"> <i>fd</i> ist kein gültiges Verzeichnis
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> Das Verzeichnis ist von diesem Programm nicht ansprechbar.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENSMEM">ENSMEM</a> :</td>
<td valign="top"> Der Kernel kann für diese Operation keinen Speicher
allozieren.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Sie steht ab FreeMiNT 1.17 zur Verfügung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Ffdopendir">Binding</a> &nbsp; <a href="gemdos_directory.html#Dopendir">Dopendir</a> &nbsp; <a href="gemdos_directory.html#Dclosedir">Dclosedir</a> &nbsp; <a href="gemdos_directory.html#Dreaddir">Dreaddir</a> &nbsp; <a href="gemdos_directory.html#Drewinddir">Drewinddir</a> &nbsp; <a href="#Fdirfd">Fdirfd</a>
&nbsp; <a href="gemdos_process.html#Pdomain">Pdomain</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Ffdopendir">5.9.15.1 Bindings für Ffdopendir</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Ffdopendir">Ffdopendir</a> ( int16_t fd );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    fd,-(sp)     ; Offset 2
move.w    #386,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #4,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fforce">5.9.16 Fforce</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file force« - Standard-Datei umleiten.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 70
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Fforce ( int16_t stdh, int16_t nonstdh );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fforce lenkt einen Standardkanal auf einen
beliebigen anderen Kanal um. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">stdh</td>
<td valign="top"> Umzuleitender Kanal
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">0 =</td>
<td valign="top"> Tastatur
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> Bildschirm
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top"> serielle Schnittstelle
</td></tr>

<tr><td nowrap="nowrap" valign="top">3 =</td>
<td valign="top"> parallele Schnittstelle

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">nonstdh</td>
<td valign="top"> Nummer des ersetzenden Kanals

</td></tr>
</table>

<br>Unter MiNT können auch die folgenden Kanäle umgeleitet werden:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">-1 =</td>
<td valign="top"> Verweist auf <a href="About_the_BIOS.html">BIOS</a> Handle 2, leitet BIOS Ausgabe um
</td></tr>

<tr><td nowrap="nowrap" valign="top">-2 =</td>
<td valign="top"> Verweist auf BIOS Handle 1, leitet BIOS Ausgabe um
</td></tr>

<tr><td nowrap="nowrap" valign="top">-3 =</td>
<td valign="top"> Verweist auf BIOS Handle 0, leitet BIOS Ausgabe um
</td></tr>

<tr><td nowrap="nowrap" valign="top">-4 =</td>
<td valign="top"> GEMDOS Handles -4 und -5 verweisen
</td></tr>

<tr><td nowrap="nowrap" valign="top">-5 =</td>
<td valign="top"> auf MIDI Eingabe und Ausgabe. Eine Umleitung dieser Kanäle
beeinflußt BIOS Handle 3.

</td></tr>
</table>

<br><b>Hinweis:</b> Ab <a href="magic.html">MagiC</a> 4 können über diese Funktion auch
die Gerätedateien -1,-2 und -3 (systemglobal) umgelenkt werden. Das
NULL-Device (-4) darf allerdings <i>nicht</i> umgeleitet werden.
<br>&nbsp;
<br>Um etwa Bildschirmausgaben auf einen Drucker umzuleiten kann
eine Konstruktion wie Fforce(1, <a href="#Fdup">Fdup</a>(3)) benutzt werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert folgende Resultate:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> falsche Kennung

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bemerkung:</td>
<td valign="top"> Diese Funktion wird oft benutzt, um die Eingabe oder Ausgabe
eines Child Prozess umzuleiten. Sie sollte zusammen mit <a href="#Fdup">Fdup</a> benutzt
werden, um das Standardhandle wiederherzustellen, bevor sich der Child
Prozess beendet. Dabei muß beachtet werden, daß jedes Dateihandle,
das auf ein Standardhandle (z.B. con:) umgeleitet wird, automatisch
geschlossen wird wenn sich der Child Prozess beendet und nicht vom
Parent geschlossen werden darf.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fforce">Binding</a> &nbsp; <a href="#Fdup">Fdup</a> &nbsp; <a href="magic_driveu.html#Das_20Verzeichnis_20U:_5CDEV">Verzeichnis U:\DEV</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fforce">5.9.16.1 Bindings für Fforce</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#Fforce">Fforce</a> ( int16_t stdh, int16_t nonstdh );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    nonstdh,-(sp)  ; Offset 4
move.w    stdh,-(sp)     ; Offset 2
move.w    #70,-(sp)      ; Offset 0
trap      #1             ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #6,sp          ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H46,W:stdh%,W:nonstdh%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Ffstat64">5.9.17 Ffstat64</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Ffstat64« - erweiterte Fileattribute einer geöffneten Datei
ermitteln.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 349 (0x15d)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Ffstat64 ( int16_t fd, <a href="gemdos_structures.html#STAT">STAT</a> *stat );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion ermittelt die erweiterten Attribute der Datei,
deren Dateihandle in <i>fd</i> angegeben ist, und speichert diese in
<i>stat</i>.
<br>&nbsp;
<br><b>Hinweis:</b> Diese Funktion ist äquivalent zu einem Aufruf
von <a href="#Fcntl">Fcntl</a> (Modus F_STAT64).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a> :</td>
<td valign="top"> Datei nicht gefunden.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EPTHNF">EPTHNF</a> :</td>
<td valign="top"> Pfad zur Datei nicht gefunden.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Sie steht ab FreeMiNT 1.16 zur Verfügung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Ffstat64">Binding</a> &nbsp; <a href="#Fattrib">Fattrib</a> &nbsp; <a href="#Fsnext">Fsnext</a> &nbsp; <a href="#Fstat64">Fstat64</a> &nbsp; <a href="gemdos_structures.html#STAT">STAT</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Ffstat64">5.9.17.1 Bindings für Ffstat64</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Ffstat64">Ffstat64</a> ( int16_t d, <a href="gemdos_structures.html#STAT">STAT</a> *stat );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       stat         ; Offset  4
move.w    fd,-(sp)     ; Offset  2
move.w    #349,-(sp)   ; Offset  0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       8(sp),sp     ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fgetchar">5.9.18 Fgetchar</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fgetchar« - Zeichen aus einer Datei lesen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 263
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fgetchar ( int16_t fh, int16_t mode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion liest ein Zeichen aus der Datei mit der Handle
<i>fh</i>. Der Parameter <i>mode</i> ist nur dann von Interesse,
wenn die geöffnete Datei ein (Pseudo-)Terminal ist. Für diesen Fall
gelten die folgenden Werte:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">mode</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top"> <b>Raw-Mode</b>
<br>keine Auswertung von Kontrollzeichen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">1</td>
<td valign="top"> <b>Cooked-Mode</b>
<br>spezielle Kontrollzeichen (Control-C, Control-Z) werden gesucht
und ggfs. interpretiert. Das selbe gilt für die Flußkontrolle
(Control-S, Control-Q).
</td></tr>

<tr><td nowrap="nowrap" valign="top">2</td>
<td valign="top"> <b>Echo-Mode</b>
<br>Gelesene Zeichen werden auf dem Terminal ausgegeben.

</td></tr>
</table>

<br>Der ASCII-Wert des gelesenen Zeichens wird im Low-Byte des
Funktionsergebnisses abgelegt. Für den Fall, daß die Datei ein
(Pseudo-)Terminal ist, werden Scan-Code und Shift-Status wie bei
<a href="About_the_BIOS.html#Bconin">Bconin</a> zurückgeliefert.
<br>&nbsp;
<br>Die einzelnen Modi von <i>mode</i> können natürlich auch
durch eine ODER-Operation verknüpft werden.
<br>&nbsp;
<br><b>Achtung:</b> Diese Funktion ist optional, daher darf ein
Aufruf mit <a href="gemdos_errors.html#EINVFN">EINVFN</a> beantwortet werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&gt;= 0 :</td>
<td valign="top"> kein Fehler, sondern das gelesene Zeichen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">0xff1a :</td>
<td valign="top"> End-of-File (EOF) wurde erkannt.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> ungültiges Datei-Handle.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Seit der ersten in MultiTOS integrierten MiNT Version 1.04.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fgetchar">Binding</a> &nbsp; <a href="About_the_BIOS.html#Bconin">Bconin</a> &nbsp; <a href="gemdos_chrinout.html#Cconin">Cconin</a> &nbsp; <a href="gemdos_chrinout.html#Cauxin">Cauxin</a> &nbsp; <a href="#Fputchar">Fputchar</a> &nbsp; <a href="#Fread">Fread</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fgetchar">5.9.18.1 Bindings für Fgetchar</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fgetchar">Fgetchar</a> ( int16_t fh, int16_t mode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    mode,-(sp)   ; Offset 4
move.w    fh,-(sp)     ; Offset 2
move.w    #263,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fgetdta">5.9.19 Fgetdta</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »get disk transfer address« - ermittelt den
Übertragungsbereich für Diskettenoperationen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 47
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> <a href="gemdos_structures.html#DTA">DTA</a> *Fgetdta ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fgetdta ermittelt die Adresse eines Buffers
für <a href="#Fsfirst">Fsfirst</a> und <a href="#Fsnext">Fsnext</a>.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert als Ergebnis die Adresse der <a href="gemdos_structures.html#DTA">DTA</a>
(<b>D</b>isk <b>T</b>ransfer <b>A</b>ddress).
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bemerkung:</td>
<td valign="top"> Nach dem Start eines Programms überlappt dessen <a href="gemdos_structures.html#DTA">DTA</a> die
Komamndozeile. Wird keine neue <a href="gemdos_structures.html#DTA">DTA</a> angelegt, überschreibt jeder
Aufruf von <a href="#Fsfirst">Fsfirst</a> oder <a href="#Fsnext">Fsnext</a> die Kommandozeile des Programms. Um
dies zu vermeiden, sollte vor dem ersten Aufruf von <a href="#Fsfirst">Fsfirst</a> oder
<a href="#Fsnext">Fsnext</a> mit <a href="#Fsetdta">Fsetdta</a> eine neue <a href="gemdos_structures.html#DTA">DTA</a> angelegt werden. Vorsicht ist
geboten, wenn die <a href="gemdos_structures.html#DTA">DTA</a> als lokale oder Auto-Variable angelegt wird und
der ursprüngliche Zustand nicht wiederhergestellt wurde, bevor der
Gültigkeitsbereich der Variable verlassen wird.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fgetdta">Binding</a> &nbsp; <a href="#Fsetdta">Fsetdta</a> &nbsp; <a href="#Fsfirst">Fsfirst</a> &nbsp; <a href="#Fsnext">Fsnext</a> &nbsp; <a href="gemdos_structures.html#DTA">DTA</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fgetdta">5.9.19.1 Bindings für Fgetdta</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> <a href="gemdos_structures.html#DTA">DTA</a> *<a href="#Fgetdta">Fgetdta</a> ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    #47,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #2,sp        ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Pointer%=Gemdos(&amp;H2F)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Finstat">5.9.20 Finstat</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Finstat« - Eingabestatus für ein File festlegen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 261
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Finstat ( int16_t fh );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion Finstat gibt die maximale Anzahl der Bytes
zurück, die aus der Datei mit dem Handle <i>fh</i> ohne zu Warten
gelesen werden können.
<br>&nbsp;
<br>Wenn die Anzahl der Bytes nicht genau angegeben werden kann,
wird der Wert 1 zurückgeliefert.
<br>&nbsp;
<br><b>Hinweis:</b> In <a href="magic.html">MagiC</a> versucht der Kernel zunächst, den
Aufruf auf <a href="#Fcntl">Fcntl</a> (<a href="gemdos_file.html#FIONREAD">FIONREAD</a>) zurückzuführen. Wenn diese Subfunktion
von <a href="magic_xfs.html#dev_ioctl">dev_ioctl</a> nicht existiert (d.h. der Dateitreiber liefert <a href="gemdos_errors.html#EINVFN">EINVFN</a>),
wird <a href="magic_xfs.html#dev_stat">dev_stat</a> aufgerufen. In diesem Fall kann nur die Aussage
getroffen werden &quot;Zeichen liegt an&quot; (Rückgabe == 1) bzw.
&quot;kein Zeichen liegt an&quot; (Rückgabe == 0). FAT-Dateien und
Shared Memory liefern die tatsächliche Dateilänge minus der
aktuellen Position. <a href="magic_driveu.html#Pipes">Pipes</a> liefern die Anzahl der vorhandenen Bytes im
Block.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&gt;= 0 :</td>
<td valign="top"> kein Fehler aufgetreten (Anzahl der Bytes).
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> ungültiges Datei-Handle.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Seit der ersten in MultiTOS integrierten MiNT Version 1.04 und
in MagiC ab Version 3.0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Finstat">Binding</a> &nbsp; <a href="gemdos_chrinout.html#Cauxis">Cauxis</a> &nbsp; <a href="gemdos_chrinout.html#Cconis">Cconis</a> &nbsp; <a href="#Fcntl">Fcntl</a> &nbsp; <a href="#Foutstat">Foutstat</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Finstat">5.9.20.1 Bindings für Finstat</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Finstat">Finstat</a> ( int16_t fh );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    fh,-(sp)     ; Offset 2
move.w    #261,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #4,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Flink">5.9.21 Flink</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Flink« - erzeugt einen neuen (Hard-)Link auf ein File.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 301
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Flink ( int8_t *oldname, int8_t *newname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion Flink erzeugt einen neuen Namen (<i>newname</i>)
für die Datei mit dem Namen <i>oldname</i>. Die Datei kann
anschließend unter beiden Namen angesprochen werden, und das Löschen
(per <a href="#Fdelete">Fdelete</a>) eines Namens hat keinen Einfluß auf den anderen.
<br>&nbsp;
<br>Zu beachten ist, daß sich <i>oldname</i> und <i>newname</i>
auf demselben physikalischen Laufwerk befinden müssen, und nicht alle
<a href="gemdos_filesys.html#Filesysteme">Filesysteme</a> die Möglichkeit bieten, Links zu setzen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EINVFN">EINVFN</a> :</td>
<td valign="top"> das Filesystem unterstützt keine Hard-Links.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a> :</td>
<td valign="top"> die Datei <i>oldname</i> existiert nicht.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EXDEV">EXDEV</a> :</td>
<td valign="top"> (siehe unten)
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENSAME">ENSAME</a> :</td>
<td valign="top"> die Dateien <i>oldname</i>/<i>newname</i> befinden sich nicht
auf dem gleichen physikalischen Laufwerk.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Verfügbar, wenn ein 'MiNT' Cookie mit einer Versionsnummer von
mindestens 0.90 existiert und in <a href="magic.html">MagiC</a> ab Version 3.0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Flink">Binding</a> &nbsp; <a href="#Frename">Frename</a> &nbsp; <a href="#Fsymlink">Fsymlink</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Flink">5.9.21.1 Bindings für Flink</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Flink">Flink</a> ( int8_t *oldname, int8_t *newname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       newname      ; Offset 6
pea       oldname      ; Offset 2
move.w    #301,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $A(sp),sp    ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Flock">5.9.22 Flock</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file record locking« - Teile einer Datei sperren oder
freigeben.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 92
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Flock ( int16_t handle, int16_t mode, int32_t start,
int32_t length );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Flock dient dazu, Teile von Dateien gegen
den Zugriff von anderen Prozessen zu schützen. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> Dateikennung
</td></tr>

<tr><td nowrap="nowrap" valign="top">mode</td>
<td valign="top">
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">0 =</td>
<td valign="top"> Blockierung setzen
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> Blockierung aufheben

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">start</td>
<td valign="top"> Startposition in der Datei
</td></tr>

<tr><td nowrap="nowrap" valign="top">length</td>
<td valign="top"> Anzahl der betroffenen Bytes

</td></tr>
</table>

<br><b>Achtung:</b> Diese Funktion ist optional, daher darf ein
Aufruf mit <a href="gemdos_errors.html#EINVFN">EINVFN</a> beantwortet werden. Es sollte insbesondere beachtet
werden, daß Flock nicht auf <i>allen</i> installierten Dateisystemen
zur Verfügung stehen muss.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert folgende Resultate:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ELOCKED">ELOCKED</a> :</td>
<td valign="top"> Blockierung bereits vorhanden
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENSLOCK">ENSLOCK</a> :</td>
<td valign="top"> Zu entfernende Blockierung existiert nicht

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Nur vorhanden wenn der Cookie <a href="bios_cookiejar.html#Cookie_2C_20_FLK">_FLK</a> gesetzt ist.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Flock">Binding</a> &nbsp; <a href="#Fcreate">Fcreate</a> &nbsp; <a href="#Fopen">Fopen</a> &nbsp; <a href="#Fclose">Fclose</a> &nbsp; <a href="#Fdelete">Fdelete</a> &nbsp; <a href="gemdos_process.html#Ptermres">Ptermres</a> &nbsp;
<a href="gemdos_file.html#F_SETLK">F_SETLK</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Flock">5.9.22.1 Bindings für Flock</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Flock">Flock</a> ( int16_t handle, int16_t mode, int32_t start,
int32_t length );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    length,-(sp)  ; Offset 10
move.l    start,-(sp)   ; Offset  6
move.w    mode,-(sp)    ; Offset  4
move.w    handle,-(sp)  ; Offset  2
move.w    #92,-(sp)     ; Offset  0
trap      #1            ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $E(sp),sp     ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fmidipipe">5.9.23 Fmidipipe</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fmidipipe« - MIDI Ein/Ausgabe umlenken.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 294
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fmidipipe ( int16_t pid, int16_t in, int16_t out );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion verändert die <a href="gemdos_main.html">GEMDOS</a>-Handles für MIDI Ein- und
Ausgabe für den Prozeß mit der Kennung <i>pid</i>. Die Parameter
<i>in</i> bzw. <i>out</i> beschreiben die GEMDOS-Handles, welche
für den angegebenen Prozeß die MIDI-Eingabe bzw. -ausgabe
übernehmen.
<br>&nbsp;
<br>Im Fall <i>pid</i> = 0, wird der aktuelle Prozeß benutzt. Dann
ist der Funktionsaufruf äquivalent zu den folgenden beiden Zeilen:
<br>&nbsp;
<pre><a href="#Fforce">Fforce</a> (-4, in);
<a href="#Fforce">Fforce</a> (-5, out);
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a> :</td>
<td valign="top"> der Prozeß <i>pid</i> wurde nicht gefunden.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> <i>in</i>/<i>out</i> sind nicht zum Lesen bzw. Schreiben
geöffnet.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> <i>in</i>/<i>out</i> ist kein gültiges Handle.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Verfügbar, wenn ein 'MiNT' Cookie mit einer Versionsnummer von
mindestens 0.90 existiert.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fmidipipe">Binding</a> &nbsp; <a href="#Fdup">Fdup</a> &nbsp; <a href="#Fforce">Fforce</a> &nbsp; <a href="gemdos_pipes.html">Test auf Pipes</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fmidipipe">5.9.23.1 Bindings für Fmidipipe</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fmidipipe">Fmidipipe</a> ( int16_t pid, int16_t in, int16_t out );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    out,-(sp)    ; Offset 6
move.w    in,-(sp)     ; Offset 4
move.w    pid,-(sp)    ; Offset 2
move.w    #294,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #8,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fopen">5.9.24 Fopen</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file open« - öffnet eine Datei.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 61
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fopen ( const int8_t *fname, int16_t mode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fopen dient dazu, Dateien zu öffnen. Es
gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Name der zu öffnenden Datei
</td></tr>

<tr><td nowrap="nowrap" valign="top">mode</td>
<td valign="top"> Modus als Bitvektor
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Bit-0..2</td>
<td valign="top"> = <b>Zugriffsmodus</b>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">0 =</td>
<td valign="top"> nur lesen
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> nur schreiben
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top"> lesen und schreiben

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-3</td>
<td valign="top"> = reserviert (auf Null setzen)
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-4..6</td>
<td valign="top"> = Sharing-Modus
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-7</td>
<td valign="top"> = Vererbungsflag

</td></tr>
</table>

<br>Die Bits 3..7 stehen nur bei einem GEMDOS mit Filelocking
Erweiterungen (Cookie _FLK testen) zu Verfügung. Das Vererbungsflag
bestimmt, ob vom Prozess gestartete Childs das entsprechende Handle
erben und die gleichen Zugriffsrechte haben. Wenn das Flag gesetzt
ist, muß das Child jede Datei, die es nutzen möchte, erneut öffnen
und hat die gleichen Restriktionen wie jeder andere Prozess. Der
Sharing-Modus legt fest, auf welche Art andere Prozesse auf die Datei
zugreifen dürfen, wenn sie erst einmal geöffnet ist. Es gilt:
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Sharing</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top"> Kompatibilitätsmodus (wird von den Programmen benutzt, die
nichts von den Netzwerkerweiterungen wissen).
</td></tr>

<tr><td nowrap="nowrap" valign="top">1</td>
<td valign="top"> Lesen und Schreiben verbieten (die Datei darf kein zweites Mal
geöffnet werden).
</td></tr>

<tr><td nowrap="nowrap" valign="top">2</td>
<td valign="top"> Schreiben verbieten (die Datei darf nur noch zum Lesen
geöffnet werden).
</td></tr>

<tr><td nowrap="nowrap" valign="top">3</td>
<td valign="top"> Lesen verbieten (die Datei darf nur noch zum Schreiben
geöffnet werden).
</td></tr>

<tr><td nowrap="nowrap" valign="top">4</td>
<td valign="top"> Alles ist erlaubt.

</td></tr>
</table>


</td></tr>
</table>

<br><b>Achtung:</b> Das File-Locking kann beratend implementiert
sein, d.h. daß es möglich sein kann, auf Bereiche trotz eines
vorgenommenen Lockings zuzugreifen. Programme, die File-Locking
unterstützen, sollten daher <i>vor</i> einem Zugriff selbst einen
Lock setzen und diesen unmittelbar <i>nach</i> dem Zugriff wieder
freigeben. So ist garantiert, daß etwaige Locks anderer Seiten
respektiert werden.
<br>&nbsp;
<br>In MiNT und <a href="magic.html">MagiC</a> stehen darüber hinaus die folgenden Modi zur
Verfügung:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">mode</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0x080</td>
<td valign="top"> reserviert für MiNT.
</td></tr>

<tr><td nowrap="nowrap" valign="top">0x100</td>
<td valign="top"> Datei bei I/O nicht blockieren.
</td></tr>

<tr><td nowrap="nowrap" valign="top">0x200</td>
<td valign="top"> Datei erstellen, falls diese nicht exist.
</td></tr>

<tr><td nowrap="nowrap" valign="top">0x400</td>
<td valign="top"> existierende Datei auf Null-Länge setzen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">0x800</td>
<td valign="top"> existierende Datei nicht öffnen.

</td></tr>
</table>

<br><b>Hinweis:</b> Für einige Geräte existieren bereits
Standardkanal-Nummern, so daß es nicht notwendig ist, Fopen
aufzurufen. Im einzelnen:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Kanal</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top"> Tastatur (stdin)
</td></tr>

<tr><td nowrap="nowrap" valign="top">1</td>
<td valign="top"> Bildschirm (stdout)
</td></tr>

<tr><td nowrap="nowrap" valign="top">2</td>
<td valign="top"> serielle Schnittstelle (stdaux)
</td></tr>

<tr><td nowrap="nowrap" valign="top">3</td>
<td valign="top"> parallele Schnittstelle (stdprn)

</td></tr>
</table>

<br>Lt. Atari sind die Standardkanal-Nummern 4 und 5 reserviert, so
daß normale Kanalnummern für Dateien erst bei 6 beginnen.
<br>&nbsp;
<br>Darüber hinaus lassen sich auch die folgenden
zeichenorientierten Geräte öffnen:
<br>&nbsp;
<ul>
<li> PRN: (parallele Schnittstelle, -3)
</li>
<li> AUX: (serielle Schnittstelle, -2)
</li>
<li> CON: (Konsole, -1)
</li>
</ul>

<br>Symbolische Links werden von dieser Funktion automatisch
dereferenziert, d.h. wenn die Datei bereits als symbolischer Link
existiert, wird die davon referenzierte Datei geöffnet bzw., je nach
Modus, auf die Länge Null gebracht.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert die entsprechende Dateikennung, oder eine
negative Fehlermeldung zurück.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fopen">Binding</a> &nbsp; <a href="#Fcreate">Fcreate</a> &nbsp; <a href="bios_channels.html">Ein-/Ausgabekanäle des BIOS</a> &nbsp; <a href="gemdos_file.html#F_SETLK">F_SETLK</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fopen">5.9.24.1 Bindings für Fopen</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fopen">Fopen</a> ( const int8_t *fname, int16_t mode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    mode,-(sp)   ; Offset 6
pea       fname        ; Offset 2
move.w    #61,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #8,sp        ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Handle%=Gemdos(&amp;H3D,L:fname%,W:mode%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Foutstat">5.9.25 Foutstat</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Foutstat« - Ausgabestatus für ein File festlegen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 262
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Foutstat ( int16_t fh );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion Foutstat gibt die Anzahl der Bytes zurück, die in
die Datei mit der Handle <i>fh</i> ausgegeben werden können, ohne
den entsprechenden Prozeß zu blockieren.
<br>&nbsp;
<br>Wenn die Anzahl der Bytes nicht genau angegeben werden kann,
wird der Wert 1 zurückgeliefert.
<br>&nbsp;
<br><b>Hinweis:</b> In <a href="magic.html">MagiC</a> versucht der Kernel zunächst, den
Aufruf auf <a href="#Fcntl">Fcntl</a> (<a href="gemdos_file.html#FIONWRITE">FIONWRITE</a>) zurückzuführen. Wenn diese Subfunktion
von <a href="magic_xfs.html#dev_ioctl">dev_ioctl</a> nicht existiert (d.h. der Dateitreiber liefert <a href="gemdos_errors.html#EINVFN">EINVFN</a>),
wird <a href="magic_xfs.html#dev_stat">dev_stat</a> aufgerufen. In diesem Fall kann nur die Aussage
getroffen werden &quot;ein Zeichen kann geschrieben werden&quot;
(Rückgabe == 1) bzw. &quot;kein Zeichen kann geschrieben werden&quot;
(Rückgabe == 0). FAT-Dateien liefern stets den Wert 1, Shared Memory
die tatsächliche Dateilänge minus der aktuellen Position. <a href="magic_driveu.html#Pipes">Pipes</a>
liefern die Anzahl der noch freien Bytes im Block.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&gt;= 0 :</td>
<td valign="top"> kein Fehler aufgetreten (Anzahl der Bytes).
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> ungültiges Datei-Handle.

</td></tr>
</table>

<br>Derzeit liefert diese Funktion immer 1 für Dateien auf
Massenspeicher zurück.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Seit der ersten in MultiTOS integrierten MiNT Version 1.04 und
in MagiC ab Version 3.0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Foutstat">Binding</a> &nbsp; <a href="gemdos_chrinout.html#Cauxos">Cauxos</a> &nbsp; <a href="gemdos_chrinout.html#Cconos">Cconos</a> &nbsp; <a href="gemdos_chrinout.html#Cprnos">Cprnos</a> &nbsp; <a href="#Fcntl">Fcntl</a> &nbsp; <a href="#Finstat">Finstat</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Foutstat">5.9.25.1 Bindings für Foutstat</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Foutstat">Foutstat</a> ( int16_t fh );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    fh,-(sp)     ; Offset 2
move.w    #262,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #4,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fpipe">5.9.26 Fpipe</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fpipe« - erzeugt eine Pipe.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 256
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fpipe ( int16_t usrh[2] );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion erzeugt eine Pipe, die für
Interprozeß-Kommunikation (IPC) benutzt werden kann. Sie wird
normalerweise von Shells benutzt, die den Input und Output ihres
Childs umleiten möchten. Vor dem Start des Childs leitet die Shell
ihren input und output (falls nötig) auf das Leseende und Schreibende
der neu erzeugten Datei um. Bei erfolgreichem Aufruf werden in
<i>usrh</i> zwei <a href="gemdos_main.html">GEMDOS</a>-Handles geliefert.
<br>&nbsp;
<br><i>usrh</i>[0] ist dabei das Handle für das Leseende der Pipe,
(Read-Only) während <i>usrh</i>[1] das Handle für das Schreibende
(Write-Only) der Pipe kennzeichnet.
<br>&nbsp;
<br>Die auf diese Weise erzeugte Pipe wird im Verzeichnis U:\PIPE
als Pseudo-Datei angelegt und mit dem Namen 'sys$pipe.xxx' versehen,
wobei xxx als dreistellige ganze Zahl aufzufassen ist.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENHNDL">ENHNDL</a> :</td>
<td valign="top"> keine 2 Handles mehr frei.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> keine Pipeline mehr frei (max. 999 verfügbar).
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENSMEM">ENSMEM</a> :</td>
<td valign="top"> nicht genug Speicher vorhanden, um die Pipe zu erzeugen.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Verfügbar, wenn ein 'MiNT' Cookie mit einer Versionsnummer von
mindestens 0.90 existiert und in <a href="magic.html">MagiC</a> ab Version 3.0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fpipe">Binding</a> &nbsp; <a href="#Fmidipipe">Fmidipipe</a> &nbsp; <a href="gemdos_pipes.html">Test auf Pipes</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fpipe">5.9.26.1 Bindings für Fpipe</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fpipe">Fpipe</a> ( int16_t usrh[2] );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       usrh         ; Offset 2
move.w    #256,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fpoll">5.9.27 Fpoll</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fpoll« - Enquiry of the file status with timeout.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 346
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int32_t Fpoll (<a href="gemdos_structures.html#POLLFD">POLLFD</a> *fds, uint32_t nfds, uint32_t timeout );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> Fpoll() performs a similar task to <a href="#Fselect">Fselect</a>: it waits for one of
a set of file descriptors to become ready to perform I/O.
<br>&nbsp;
<br>The set of file descriptors to be monitored is specified in the
fds argument, which is an array of structures of the following form:
<br>&nbsp;
<pre>typedef struct pollfd
{
        int32_t  fd;            /* file descriptor */
        uint16_t events;        /* requested events */
        uint16_t revents;       /* returned events */
} <a href="gemdos_structures.html#POLLFD">POLLFD</a>;
</pre>
<br>The caller should specify the number of items in the fds array
in nfds.
<br>&nbsp;
<br>The field fd contains a file descriptor for an open file. If
this field is negative, then the corresponding events field is ignored
and the revents field returns zero. (This provides an easy way of
ignoring a file descriptor for a single poll() call: simply negate the
fd field.)
<br>&nbsp;
<br>The field events is an input parameter, a bit mask specifying
the events the application is interested in for the file descriptor
fd. If this field is specified as zero, then all events are ignored
for fd and revents returns zero.
<br>&nbsp;
<br>The field revents is an output parameter, filled by the kernel
with the events that actually occurred. The bits returned in revents
can include any of those specified in events, or one of the values
POLLERR, POLLHUP, or POLLNVAL. (These three bits are meaningless in
the events field, and will be set in the revents field whenever the
corresponding condition is true.)
<br>&nbsp;
<br>If none of the events requested (and no error) has occurred for
any of the file descriptors, then poll() blocks until one of the
events occurs.
<br>&nbsp;
<br>The timeout argument specifies the minimum number of
milliseconds that poll() will block. (This interval will be rounded up
to the system clock granularity, and kernel scheduling delays mean
that the blocking interval may overrun by a small amount.) Specifying
a negative value in timeout means an infinite timeout. Specifying a
timeout of zero causes poll() to return immediately, even if no file
descriptors are ready.
<br>&nbsp;
<br>The bits that may be set/returned in events and revents are
defined in &lt;poll.h&gt;:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">POLLIN</td>
<td valign="top"> There is data to read.
</td></tr>

<tr><td nowrap="nowrap" valign="top">POLLPRI</td>
<td valign="top"> There is urgent data to read (e.g., out-of-band data on TCP
socket; pseudoterminal master in packet mode has seen state change in
slave).
</td></tr>

<tr><td nowrap="nowrap" valign="top">POLLOUT</td>
<td valign="top"> Writing now will not block.
</td></tr>

<tr><td nowrap="nowrap" valign="top">POLLRDHUP</td>
<td valign="top"> Stream socket peer closed connection, or shut down writing half
of connection. The _GNU_SOURCE feature test macro must be defined
(before including any header files) in order to obtain this
definition.
</td></tr>

<tr><td nowrap="nowrap" valign="top">POLLERR</td>
<td valign="top"> Error condition (output only).
</td></tr>

<tr><td nowrap="nowrap" valign="top">POLLHUP</td>
<td valign="top"> Hang up (output only).
</td></tr>

<tr><td nowrap="nowrap" valign="top">POLLNVAL</td>
<td valign="top"> Invalid request: fd not open (output only).

</td></tr>
</table>

<br>When compiling with _XOPEN_SOURCE defined, one also has the
following, which convey no further information beyond the bits listed
above:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">POLLRDNORM</td>
<td valign="top"> Equivalent to POLLIN.
</td></tr>

<tr><td nowrap="nowrap" valign="top">POLLRDBAND</td>
<td valign="top"> Priority band data can be read (generally unused on MiNT).
</td></tr>

<tr><td nowrap="nowrap" valign="top">POLLWRNORM</td>
<td valign="top"> Equivalent to POLLOUT.
</td></tr>

<tr><td nowrap="nowrap" valign="top">POLLWRBAND</td>
<td valign="top"> Priority data may be written.

</td></tr>
</table>

<br>MiNT(Lib) also knows about, but does not use POLLMSG.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="VT_52_terminal.html#Return">Return</a> value:</td>
<td valign="top"> The function can return the following results:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">0 :</td>
<td valign="top"> The call timed out and no file descriptors were ready.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&gt;0 :</td>
<td valign="top"> The number of structures which have nonzero revents fields (in
other words, those descriptors with events or errors reported).
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> At least one of the handles is not assigned to an open file.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFAULT">EFAULT</a> :</td>
<td valign="top"> The array given as argument was not contained in the calling
program's address space.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EINTR">EINTR</a> :</td>
<td valign="top"> A signal occurred before any requested event; see <a href="gemdos_process.html#Psignal">Psignal</a>.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EINVAL">EINVAL</a> :</td>
<td valign="top"> The nfds value exceeds the RLIMIT_NOFILE value.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENOMEM">ENOMEM</a> : </td>
<td valign="top"> There was no space to allocate file descriptor tables.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> This function is available as of FreeMiNT 1.15.12.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> File functions
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Fpoll">Binding</a> &nbsp; <a href="#Fselect">Fselect</a> &nbsp; <a href="#Finstat">Finstat</a> &nbsp; <a href="#Foutstat">Foutstat</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Fpoll">5.9.27.1 Bindings for Fpoll</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fpoll">Fpoll</a> (<a href="gemdos_structures.html#POLLFD">POLLFD</a> *fds, uint32_t nfds, uint32_t timeout );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    timeout,-(sp)  ; Offset  10
move.l    nfds,-(sp)     ; Offset  6
pea       fds            ; Offset  2
move.w    #346,-(sp)     ; Offset  0
trap      #1             ; <a href="gemdos_main.html">GEMDOS</a>
lea       14(sp),sp      ; Correct stack
</pre>

</td></tr>
</table>

<h3><a name="Fputchar">5.9.28 Fputchar</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fputchar« - Zeichen in ein File ausgeben.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 264
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fputchar ( int16_t fh, int32_t ch, int16_t mode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion schreibt ein Zeichen in die Datei mit dem Handle
<i>fh</i>. Der Parameter <i>mode</i> ist nur von Bedeutung, wenn die
Datei ein (Pseudo-)Terminal ist:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">mode</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top"> <b>Raw-Mode</b>
<br>keine Auswertung der Sonderzeichen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">1</td>
<td valign="top"> <b>Cooked-Mode</b>
<br>spezielle Kontrollzeichen (Control-C, Control-Z) werden gesucht
und ggfs. interpretiert. Das selbe gilt für die Flußkontrolle
(Control-S, Control-Q).

</td></tr>
</table>

<br>Wenn die Datei ein (Pseudo-)Terminal ist, können alle 4 Bytes
übertragen werden. Auf diese Art und Weise ist es möglich,
simulierte <a href="bios_main.html">BIOS</a>-Scancodes und Shift-Statusmeldungen zu übertragen.
Anderenfalls wird nur das Low-Byte von <i>ch</i> übertragen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">4 :</td>
<td valign="top"> Anzahl geschriebener Bytes, wenn Datei ein Terminal ist.
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 :</td>
<td valign="top"> Ausgabe erfolgreich, aber Datei ist kein Terminal.
</td></tr>

<tr><td nowrap="nowrap" valign="top">0 :</td>
<td valign="top"> Bytes konnten nicht ausgegeben werden.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> ungültiges Datei-Handle.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> Ein negativer BIOS Fehlercode, wenn ein I/O Fehler auftrat.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Seit der ersten in MultiTOS integrierten MiNT Version 1.04.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fputchar">Binding</a> &nbsp; <a href="About_the_BIOS.html#Bconout">Bconout</a> &nbsp; <a href="gemdos_chrinout.html#Cauxout">Cauxout</a> &nbsp; <a href="gemdos_chrinout.html#Cconout">Cconout</a> &nbsp; <a href="gemdos_chrinout.html#Crawio">Crawio</a> &nbsp; <a href="#Fgetchar">Fgetchar</a> &nbsp;
<a href="#Fwrite">Fwrite</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fputchar">5.9.28.1 Bindings für Fputchar</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fputchar">Fputchar</a> ( int16_t fh, int32_t ch, int16_t mode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    mode,-(sp)   ; Offset 8
move.l    ch,-(sp)     ; Offset 4
move.w    fh,-(sp)     ; Offset 2
move.w    #264,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $A(sp),sp    ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fread">5.9.29 Fread</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file read« - Datei lesen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 63
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fread ( int16_t handle, int32_t count, void *buf );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fread liest eine bestimmte Anzahl von Bytes
aus einer Datei. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> Dateikennung
</td></tr>

<tr><td nowrap="nowrap" valign="top">count</td>
<td valign="top"> Anzahl der zu lesenden Bytes
</td></tr>

<tr><td nowrap="nowrap" valign="top">buf</td>
<td valign="top"> Adresse des aufnehmenden Puffers (mindestens Platz für
<i>count</i> Bytes)

</td></tr>
</table>

<br><b>Hinweis:</b> In allen GEMDOS-Versionen &lt; 0.15 kommt es
zum System-Stillstand, wenn der Parameter count den Wert 0 besitzt.
Beim Lesen von Standardkanälen dürfen maximal 16383 Zeichen gelesen
werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert als Ergebnis die Anzahl der gelesenen
Zeichen. Die Anazhl gelesener Bytes kann kleiner als <i>count</i>
sein, wenn ein EOF (end of file) erreicht wird. Im Fehlerfall gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> falsche Dateikennung
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ELOCKED">ELOCKED</a> :</td>
<td valign="top"> Datei-Abschnitt ist markiert

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fread">Binding</a> &nbsp; <a href="#Fwrite">Fwrite</a> &nbsp; <a href="gemdos_file.html#FIONREAD">FIONREAD</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fread">5.9.29.1 Bindings für Fread</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fread">Fread</a> ( int16_t handle, int32_t count, void *buf );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       buf           ; Offset 8
move.l    count,-(sp)   ; Offset 4
move.w    handle,-(sp)  ; Offset 2
move.w    #63,-(sp)     ; Offset 0
trap      #1            ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $C(sp),sp     ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H3F,W:handle%,L:count%,L:buf%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Freadlink">5.9.30 Freadlink</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Freadlink« - symbolischen Link verfolgen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 303
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Freadlink ( int16_t bufsiz, int8_t *buf, int8_t *name
);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion ermittelt den Dateinamen des symbolischen Links
<i>name</i>. Dies ist der Name, der bei <a href="#Fsymlink">Fsymlink</a> als erster Parameter
angegeben wurde.
<br>&nbsp;
<br>Der Name wird im Puffer <i>buf</i> abgelegt, der eine Länge
von <i>bufsiz</i> Zeichen umfaßt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EINVFN">EINVFN</a> :</td>
<td valign="top"> das Filesystem von <i>name</i> erlaubt keine symb. Links.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a> :</td>
<td valign="top"> der symbolische Link <i>name</i> wurde nicht gefunden.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> <i>name</i> ist kein symbolischer Link.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ERANGE">ERANGE</a> :</td>
<td valign="top"> der Puffer <i>buf</i> ist zu klein für den zu ermittelnden
Dateinamen.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Verfügbar, wenn ein 'MiNT' Cookie mit einer Versionsnummer von
mindestens 0.90 existiert und in <a href="magic.html">MagiC</a> ab Version 3.0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Freadlink">Binding</a> &nbsp; <a href="#Fsymlink">Fsymlink</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Freadlink">5.9.30.1 Bindings für Freadlink</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Freadlink">Freadlink</a> ( int16_t bufsiz, int8_t *buf, int8_t *name
);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       Name          ; Offset 10
pea       buf           ; Offset  6
move.w    bufsiz,-(sp)  ; Offset  2
move.w    #303,-(sp)    ; Offset  0
trap      #1            ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $C(sp),sp     ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Frename">5.9.31 Frename</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file rename« - Datei umbenennen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 86
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Frename ( const int8_t *oldname, const int8_t *newname
);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Frename dient zum Umbenennen von Dateien.
Der neue Name darf auch einen kompletten Zugriffspfad innerhalb des
betreffenden Laufwerks enthalten. In diesem Fall wird die Datei
verschoben. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">oldname</td>
<td valign="top"> Zeiger auf bisherigen Namen
</td></tr>

<tr><td nowrap="nowrap" valign="top">newname</td>
<td valign="top"> Zeiger auf neuen Namen

</td></tr>
</table>

<br><b>Hinweis:</b> Ab GEMDOS-Version 0.15 ist es möglich auch den
Namen von Verzeichnissen zu verändern. Diese können jedoch nicht
verschoben werden. Man sollte es vermeiden, Dateien umzubenennen, die
bereits geöffnet sind.
<br>&nbsp;
<br><b>Anmerkung zu <a href="magic.html">MagiC</a>:</b> Es ist Sache des <a href="magic_xfs.html">XFS</a> zu
entscheiden, ob Verzeichnisse umbenannt oder verschoben werden
dürfen. Das integrierte DOS-XFS erlaubt erst seit MagiC 5 ein
Verschieben von Verzeichnissen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert folgende Resultate:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EPTHNF">EPTHNF</a> :</td>
<td valign="top"> Verzeichnis nicht gefunden
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> Zugriff verweigert (Schreibschutz)
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENSAME">ENSAME</a> :</td>
<td valign="top"> Ziel ist nicht das gleiche Laufwerk

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Frename">Binding</a> &nbsp; <a href="#Fdelete">Fdelete</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Frename">5.9.31.1 Bindings für Frename</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Frename">Frename</a> ( const int8_t *oldname, const int8_t *newname
);
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       newname      ; Offset 8
pea       oldname      ; Offset 4
move.w    #0,-(sp)     ; Offset 2
move.w    #86,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $C(sp),sp    ; Stack korrigieren
</pre>
<br><b>Hinweis:</b> Der Null-Parameter wird beim C-Binding
normalerweise automatisch hinzugefügt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H56,W:0,L:oldname%,L:newname%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fseek">5.9.32 Fseek</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file seek« - Dateiposition verschieben.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 66
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fseek ( int32_t offset, int16_t handle, int16_t
seekmode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fseek erlaubt es, den Dateizeiger innerhalb
einer Datei neu zu positionieren. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">offset</td>
<td valign="top"> Anzahl der Bytes, die übersprungen werden sollen
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> Dateikennung
</td></tr>

<tr><td nowrap="nowrap" valign="top">seekmode</td>
<td valign="top"> Art der Positionierung
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">0 =</td>
<td valign="top"> vom Dateianfang
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> ab aktueller Position
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top"> vom Dateiende

</td></tr>
</table>


</td></tr>
</table>

<br><b>Hinweis:</b> Auf Pipes angewandt liefert die Funktion den
Wert <a href="gemdos_errors.html#EACCDN">EACCDN</a>; damit können Applikationen Geräte und <a href="magic_driveu.html#Pipes">Pipes</a>
unterscheiden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert als positives Ergebnis die neue Position
innerhalb der Datei, oder eine negative Fehlermeldung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fseek">Binding</a> &nbsp; <a href="#Fread">Fread</a> &nbsp; <a href="#Fwrite">Fwrite</a> &nbsp; <a href="gemdos_pipes.html">Test auf Pipes</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fseek">5.9.32.1 Bindings für Fseek</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fseek">Fseek</a> ( int32_t offset, int16_t handle, int16_t
seekmode );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    seekmode,-(sp)  ; Offset 8
move.w    handle,-(sp)    ; Offset 6
move.l    offset,-(sp)    ; Offset 2
move.w    #66,-(sp)       ; Offset 0
trap      #1              ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $A(sp),sp       ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H42,L:offset%,W:handle%,W:seekmode%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fseek64">5.9.33 Fseek64</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file seek« - 64 bit Dateiposition verschieben.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 332 (0x014c)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fseek64 ( int32_t hioffset, uint32_t lowoffset, int16_t
handle, int16_t seekmode, int64_t *newpos );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fseek64 erlaubt es, den Dateizeiger
innerhalb einer Datei neu zu positionieren. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">hioffset</td>
<td valign="top"> Anzahl der Bytes, die übersprungen werden sollen (high)
</td></tr>

<tr><td nowrap="nowrap" valign="top">lowoffset</td>
<td valign="top"> Anzahl der Bytes, die übersprungen werden sollen (low)
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> Dateikennung
</td></tr>

<tr><td nowrap="nowrap" valign="top">seekmode</td>
<td valign="top"> Art der Positionierung
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">0 =</td>
<td valign="top"> vom Dateianfang
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> ab aktueller Position
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top"> vom Dateiende

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">newpos</td>
<td valign="top"> Neue Position

</td></tr>
</table>

<br><b>Hinweis:</b> Auf Pipes angewandt liefert die Funktion den
Wert <a href="gemdos_errors.html#EACCDN">EACCDN</a>; damit können Applikationen Geräte und <a href="magic_driveu.html#Pipes">Pipes</a>
unterscheiden.
<br>&nbsp;
<br><b>Hinweis:</b> At the moment Fseek64() is only a wrapper
around <a href="#Fseek">Fseek</a>() as there is no 64bit XFS/XDD support. If the specified
offset is greater than 2147483647L (2^31-1), the call fails and
returns <a href="gemdos_errors.html#EBADARG">EBADARG</a>.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert als positives Ergebnis die neue Position
innerhalb der Datei, oder eine negative Fehlermeldung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Sie steht ab FreeMiNT 1.15.10 zur Verfügung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fseek64">Binding</a> &nbsp; <a href="#Fread">Fread</a> &nbsp; <a href="#Fseek">Fseek</a> &nbsp; <a href="#Fwrite">Fwrite</a> &nbsp; <a href="gemdos_pipes.html">Test auf Pipes</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fseek64">5.9.33.1 Bindings für Fseek64</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fseek64">Fseek64</a> ( int32_t hioffset, uint32_t lowoffset, int16_t
handle, int16_t seekmode, int64_t *newpos );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       newpos          ; Offset 14
move.w    seekmode,-(sp)  ; Offset 12
move.w    handle,-(sp)    ; Offset 10
move.l    lowoffset,-(sp) ; Offset 6
move.l    hioffset,-(sp)  ; Offset 2
move.w    #332,-(sp)      ; Offset 0
trap      #1              ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $12(sp),sp      ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top">
Fehler%=Gemdos(&amp;H14C,L:hioffset%,L:lowoffset%,W:handle%,W:seekmode%,L:newpos%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fselect">5.9.34 Fselect</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fselect« - Abfrage des Dateistatus mit Timeout.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 285
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fselect ( uint16_t timeout, int32_t *rfds, int32_t
*wfds, ((int32_t) 0) );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion kontrolliert, welche geöffneten Dateien zum Lesen
bzw. Schreiben bereit sind. Der Parameter <i>rfds</i> zeigt auf ein
Langwort, welches eine Menge von <a href="gemdos_main.html">GEMDOS</a> File-Deskriptoren
repräsentiert.
<br>&nbsp;
<br>In diesem Langwort ist das Bit n gesetzt, wenn der
<a href="magic_xfs.html#File-Deskriptor">File-Deskriptor</a> n auf Eingabe überprüft werden soll. Eine leere
Menge kann optional auch durch einen Nullzeiger dargestellt werden.
<br>&nbsp;
<br>Analog zeigt <i>wfds</i> auf eine Menge von File-Deskriptoren,
deren Ausgabestatus überprüft werden soll.
<br>&nbsp;
<br>Bei Rückkehr der Funktion werden in <i>rfds</i> und
<i>wfds</i> die Handles der Dateien übergeben, die zum Lesen bzw.
Schreiben bereit sind, und auch überprüft werden sollten.
<br>&nbsp;
<br>Zur Zeit ist das einzige <a href="bios_main.html">BIOS</a> Gerät, das mit Fselect abgefragt
werden kann, die Tastatur.
<br>&nbsp;
<br>Unter <i>timeout</i> kann angegeben werden, wieviele
Millisekunden gewartet werden soll, bevor die Funktion zurückkehrt.
Ein Wert von 0 bedeutet in diesem Zusammenhang, daß die Funktion
wartet, bis eine der angegebenen Dateien zum Lesen bzw. Schreiben
bereit ist.
<br>&nbsp;
<br>Beispiel:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Fselect (0, 0L, 0L, 0L)</td>
<td valign="top"> wartet für immer.
</td></tr>

<tr><td nowrap="nowrap" valign="top">Fselect (1, 0L, 0L, 0L)</td>
<td valign="top"> wartet für eine Millisekunde.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">0 :</td>
<td valign="top"> in der angegebenen Zeit wurde keine der Dateien zum Lesen bzw.
Schreiben bereit (Timeout).
</td></tr>

<tr><td nowrap="nowrap" valign="top">&gt;0 :</td>
<td valign="top"> Summe der gesetzten Bits von <i>rfds</i> und <i>wfds</i>.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> mindestens eine der Handles ist keiner geöffneten Datei
zuzuordnen.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Seit der ersten in MultiTOS integrierten MiNT Version 1.04
sowie <a href="magic.html">MagiC</a> seit Version 3.00.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fselect">Binding</a> &nbsp; <a href="#Finstat">Finstat</a> &nbsp; <a href="#Foutstat">Foutstat</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fselect">5.9.34.1 Bindings für Fselect</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fselect">Fselect</a> ( uint16_t timeout, int32_t *rfds, int32_t
*wfds, ((int32_t) 0) );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    dummy,-(sp)    ; Offset 12
pea       wfds           ; Offset  8
pea       rfds           ; Offset  4
move.w    timeout,-(sp)  ; Offset  2
move.w    #285,-(sp)     ; Offset  0
trap      #1             ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $10(sp),sp     ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fsetdta">5.9.35 Fsetdta</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »set disk transfer address« - Setzen der Adresse für den
Übertragungsbereich für Diskettenoperationen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 26
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> void Fsetdta ( <a href="gemdos_structures.html#DTA">DTA</a> *buf );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fsetdta setzt die Adresse auf einen
Speicherblock, der als neue <a href="gemdos_structures.html#DTA">DTA</a> benutzt wird. Der Parameter
<i>buf</i> ist ein Zeiger auf diese Struktur.
<br>&nbsp;
<br><b>Hinweis:</b> Bei Programmstart wird die DTA ab dem Offset
0x80 in der Basepage eingerichtet.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert kein Ergebnis.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fsetdta">Binding</a> &nbsp; <a href="#Fgetdta">Fgetdta</a> &nbsp; <a href="#Fsfirst">Fsfirst</a> &nbsp; <a href="gemdos_structures.html#BASEPAGE">BASEPAGE</a> &nbsp; <a href="gemdos_structures.html#DTA">DTA</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fsetdta">5.9.35.1 Bindings für Fsetdta</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> void <a href="#Fsetdta">Fsetdta</a> ( <a href="gemdos_structures.html#DTA">DTA</a> *buf );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       buf          ; Offset 2
move.w    #26,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H1A,L:buf%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fsfirst">5.9.36 Fsfirst</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »search first file« - ersten Dateieintrag suchen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 78
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fsfirst ( const int8_t *filename, int16_t attr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fsfirst erlaubt es, Informationen über
Dateien oder Verzeichnisse zu ermitteln. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">filename</td>
<td valign="top"> Zeiger auf den Dateinamen
</td></tr>

<tr><td nowrap="nowrap" valign="top">attr</td>
<td valign="top"> Attribute, die auf den gesuchten Dateityp passen sollen.
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Bit-0:</td>
<td valign="top"> Datei ist schreibgeschützt
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-1:</td>
<td valign="top"> Datei ist versteckt
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-2:</td>
<td valign="top"> Systemdatei
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-3:</td>
<td valign="top"> Diskettenname
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-4:</td>
<td valign="top"> Verzeichnis
</td></tr>

<tr><td nowrap="nowrap" valign="top">Bit-5:</td>
<td valign="top"> Archiv-Bit

</td></tr>
</table>


</td></tr>
</table>

<br>Der Pfadname kann auch die Joker '*' und '?' enthalten. Nach
Abschluß der Funktion steht der Verzeichniseintrag unter der
Diskettenübertragungsadresse <a href="gemdos_structures.html#DTA">DTA</a>, die mit <a href="#Fgetdta">Fgetdta</a> und <a href="#Fsetdta">Fsetdta</a>
ermittelt bzw. festgelegt werden kann. Die Informationen können dann
der Struktur DTA entnommen werden.
<br>&nbsp;
<br>Die DTA muss durch Fsfirst() initialisiert werden!
<br>&nbsp;
<br><b>Hinweis:</b> Falls das Programm in der <a href="gemdos_process.html#MiNT-Domain">MiNT-Domain</a> läuft,
liefert Fsfirst 'lower case' Filenamen. Da es <a href="gemdos_filesys.html#Filesysteme">Filesysteme</a> gibt die
case sensitiv arbeiten, sollten Sie diese Umwandlung auf keinen Fall
manuell durchführen. Wenn Sie hingegen unbedingt 'upper case'
Filenamen benötigen, sollten Sie Ihr Programm per <a href="gemdos_process.html#Pdomain">Pdomain</a> in der
<a href="gemdos_process.html#TOS-Domain">TOS-Domain</a> laufen lassen.
<br>&nbsp;
<br><b>Anmerkung zu MagiC:</b> Ist Bit-3 von attr gesetzt, so ruft
der Kernel die XFS-Funktion <a href="magic_xfs.html#xfs_rlabel">xfs_rlabel</a> auf. Das aufrufende
Anwenderprogramm kann damit leider unter <a href="magic.html">MagiC</a> nicht mehr Datum und
Uhrzeit des Disknamens ermitteln. Der Kernel setzt alle Felder auf 0,
und die Funktion <a href="#Fsnext">Fsnext</a> darf dann nicht ausgeführt werden. Ab MagiC
3 wird stattdessen die Funktion <a href="gemdos_directory.html#Dreadlabel">Dreadlabel</a> benutzt, die auch mit
langen Dateinamen zurechtkommt.
<br>&nbsp;
<br>Ist Bit-3 von attr nicht gesetzt, wird wie in <a href="tos_main.html">TOS</a> nach Dateien
gesucht. Ist eine Datei ein symbolischer Link, ruft der DOS-Kernel die
Funktion <a href="#Fxattr">Fxattr</a> auf, um den Link zu verfolgen. Die von <a href="#Fxattr">Fxattr</a>
gelieferten Werte werden dann in die <a href="gemdos_structures.html#DTA">DTA</a> kopiert.
<br>&nbsp;
<br><b>Achtung:</b> MagiC ist nicht immer in der Lage, relative
symbolische Links während eines Fsfirst/Fsnext korrekt auszuwerten.
Es bieten sich 3 Auswege an:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">(a)</td>
<td valign="top"> Am besten: <a href="gemdos_directory.html#Dxreaddir">Dxreaddir</a> verwenden.
</td></tr>

<tr><td nowrap="nowrap" valign="top">(b)</td>
<td valign="top"> Nur absolute symbolische Links verwenden.
</td></tr>

<tr><td nowrap="nowrap" valign="top">(c)</td>
<td valign="top"> Das Suchverzeichnis jeweils zum aktuellen machen.

</td></tr>
</table>

<br>MiNT behandelt diesen Fall zwar korrekt, jedoch auf Kosten eines
gewaltigen Aufwands. Das Fsfirst/next-Konzept ist grundsätzlich
veraltet, ineffektiv und unsicher, und sollte sowohl in MiNT als auch
in MagiC vermieden werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert folgende Resultate:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a> :</td>
<td valign="top"> Datei nicht gefunden
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ENMFIL">ENMFIL</a> :</td>
<td valign="top"> keine weiteren Dateien

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fsfirst">Binding</a> &nbsp; <a href="#Fgetdta">Fgetdta</a> &nbsp; <a href="#Fsetdta">Fsetdta</a> &nbsp; <a href="#Fsnext">Fsnext</a> &nbsp; <a href="gemdos_structures.html#DTA">DTA</a> &nbsp; <a href="gemdos_structures.html#DTA">rekursive Suche</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fsfirst">5.9.36.1 Bindings für Fsfirst</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fsfirst">Fsfirst</a> ( const int8_t *filename, int16_t attr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    attr,-(sp)   ; Offset 6
pea       filename     ; Offset 2
move.w    #78,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #8,sp        ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H4E,L:filename%,W:attr%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fsnext">5.9.37 Fsnext</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »search next file« - nächsten Dateieintrag suchen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 79
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Fsnext ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fsnext sucht den nächsten Dateieintrag auf
den die von <a href="#Fsfirst">Fsfirst</a> gemachte Spezifizierung paßt. Die Funktion wird
nach einem Aufruf von <a href="#Fsfirst">Fsfirst</a> so oft aufgerufen, wie sie Dateien
findet, die zur angegebenen Spezifizierung passen.
<br>&nbsp;
<br>Diese Funktion benutzt die DTA der Applikation, die nach dem
Start in der Kommandozeile liegt. Fird diese Funktion benutzt, ohne
eine neue DTA zu setzen, wird die Kommandozeile überschrieben.
<br>&nbsp;
<br><b>Hinweis:</b> Falls das Programm in der <a href="gemdos_process.html#MiNT-Domain">MiNT-Domain</a> läuft,
liefert Fsnext 'lower case' Filenamen. Da es <a href="gemdos_filesys.html#Filesysteme">Filesysteme</a> gibt die case
sensitiv arbeiten, sollten Sie diese Umwandlung auf keinen Fall
manuell durchführen. Wenn Sie hingegen unbedingt 'upper case'
Filenamen benötigen, sollten Sie Ihr Programm per <a href="gemdos_process.html#Pdomain">Pdomain</a> in der
<a href="gemdos_process.html#TOS-Domain">TOS-Domain</a> laufen lassen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert als Ergebnis 0, wenn eine Datei gefunden
werden konnte, ansonsten eine negative Fehlermeldung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fsnext">Binding</a> &nbsp; <a href="#Fgetdta">Fgetdta</a> &nbsp; <a href="#Fsetdta">Fsetdta</a> &nbsp; <a href="#Fsfirst">Fsfirst</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fsnext">5.9.37.1 Bindings für Fsnext</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#Fsnext">Fsnext</a> ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    #79,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #2,sp        ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H4F)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fsymlink">5.9.38 Fsymlink</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fsymlink« - symbolischen Link auf ein File erzeugen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 302
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fsymlink ( int8_t *oldname, int8_t *newname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion erzeugt einen symbolischen Link <i>newname</i>
für die Datei mit dem Namen <i>oldname</i>. Bei erfolgreichem Aufruf
kann die Datei anschließend unter beiden Namen angesprochen werden.
Ein Löschen per <a href="#Fdelete">Fdelete</a> für <i>newname</i> berührt die Datei
selbst nicht, sondern nur den symbolischen Link. Wird hingegen Fdelete
auf <i>oldname</i> angewendet, so wird die Datei wie gewohnt
gelöscht, und Zugriffe auf <i>newname</i> sind nicht mehr möglich.
<br>&nbsp;
<br>Der Unterschied zu Hard-Links besteht darin, daß symbolische
Links zwischen verschiedenen physikalischen Geräten (und damit sogar
verschiedenen Filesystem-Typen) bestehen können.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EINVFN">EINVFN</a> :</td>
<td valign="top"> das Filesystem unterstützt keine symbolischen Links.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Verfügbar, wenn ein 'MiNT' Cookie mit einer Versionsnummer von
mindestens 0.90 existiert und in <a href="magic.html">MagiC</a> ab Version 3.0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fsymlink">Binding</a> &nbsp; <a href="#Flink">Flink</a> &nbsp; <a href="#Freadlink">Freadlink</a> &nbsp; <a href="#Frename">Frename</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fsymlink">5.9.38.1 Bindings für Fsymlink</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fsymlink">Fsymlink</a> ( int8_t *oldname, int8_t *newname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       newname      ; Offset 6
pea       oldname      ; Offset 2
move.w    #302,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $A(sp),sp    ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fstat64">5.9.39 Fstat64</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fstat64« - erweiterte Fileattribute ermitteln.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 331 (0x14b)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fstat64 ( int16_t flag, int8_t *name, <a href="gemdos_structures.html#STAT">STAT</a> *stat );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion ermittelt die erweiterten Attribute der Datei,
deren vollständiger Name in <i>name</i> angegeben ist, und speichert
diese in <i>stat</i>.
<br>&nbsp;
<br>Der Parameter <i>flag</i> gibt an, wie symbolische Links
behandelt werden sollen. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">flag</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top"> symbolische Links werden bis zur Ursprungsdatei verfolgt, und
die erweiterten Attribute werden von dieser Datei ermittelt. (Dies
entspricht dem Vorgehen von stat unter UNIX).
</td></tr>

<tr><td nowrap="nowrap" valign="top">1</td>
<td valign="top"> die erweiterten Attribute des symbolischen Links selbst werden
ermittelt. (Dies entspricht dem Vorgehen von lstat unter UNIX).

</td></tr>
</table>

<br><b>Hinweis:</b> Diese Funktion ist äquivalent zu einem Aufruf
von <a href="#Fcntl">Fcntl</a> (Modus F_STAT64) mit dem Unterschied, daß statt eines
Dateinamens das Handle einer bereits geöffneten Datei übergeben
wird.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a> :</td>
<td valign="top"> Datei nicht gefunden.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EPTHNF">EPTHNF</a> :</td>
<td valign="top"> Pfad zur Datei nicht gefunden.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Sie steht ab FreeMiNT 1.15.4 zur Verfügung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fstat64">Binding</a> &nbsp; <a href="#Fattrib">Fattrib</a> &nbsp; <a href="#Fsnext">Fsnext</a> &nbsp; <a href="gemdos_structures.html#STAT">STAT</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fstat64">5.9.39.1 Bindings für Fstat64</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fstat64">Fstat64</a> ( int16_t flag, int8_t *name, <a href="gemdos_structures.html#STAT">STAT</a> *stat );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       stat         ; Offset 10
pea       name         ; Offset  6
move.w    flag,-(sp)   ; Offset  2
move.w    #331,-(sp)   ; Offset  0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $C(sp),sp    ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Fsync">5.9.40 Fsync</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fsync« - Synchronize a file's in-core state with storage
device.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 259 (0x0103)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int16_t Fsync ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top">
<br>&nbsp;
<br>Fsync() transfers (&quot;flushes&quot;) all modified in-core
data of (i.e., modified buffer cache pages for) the file referred to
by the file descriptor fd to the disk device (or other permanent
storage device) so that all changed information can be retrieved even
after the system crashed or was rebooted. This includes writing
through or flushing a disk cache if present. The call blocks until the
device reports that the transfer has completed. It also flushes
metadata information associated with the file (see stat(2)).
<br>&nbsp;
<br>Calling Fsync() does not necessarily ensure that the entry in
the directory containing the file has also reached disk. For that an
explicit Fsync() on a file descriptor for the directory is also
needed.
<br>&nbsp;
<br><b>Warning:</b> In MiNT this function is currently not
implemented and calls <a href="gemdos_system.html#Sync">Sync</a>() instead.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="VT_52_terminal.html#Return">Return</a> value:</td>
<td valign="top"> On success, these system call return zero. Otherwise, it
returns one of the following error codes:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> Incorrect file handle.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EIO">EIO</a> :</td>
<td valign="top"> An error occurred during synchronization.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EROFS">EROFS</a>: </td>
<td valign="top">
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EINVAL">EINVAL</a>: </td>
<td valign="top"> &quot;handle&quot; is bound to a special file which does not
support synchronization.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> Available as of FreeMiNT version 1.15.10.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> File functions
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Fsync">Binding</a> &nbsp; <a href="gemdos_system.html#Sync">Sync</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Fsync">5.9.40.1 Bindings for Fsync</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#Fsync">Fsync</a> ( int16_t handle );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    handle,-(sp)  ; Offset 2
move.w    #259,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>
addq.l    #4,sp        ; Correct stack
</pre>

</td></tr>
</table>

<h3><a name="Fwrite">5.9.41 Fwrite</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »file write« - auf Datei schreiben.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 64
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fwrite ( int16_t handle, int32_t count, void *buf );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Fwrite schreibt eine Anzahl von Bytes in
eine Datei. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">handle</td>
<td valign="top"> Dateikennung
</td></tr>

<tr><td nowrap="nowrap" valign="top">count</td>
<td valign="top"> Anzahl der zu schreibenden Bytes
</td></tr>

<tr><td nowrap="nowrap" valign="top">buf</td>
<td valign="top"> Anfangsadresse des Puffers

</td></tr>
</table>

<br><b>Hinweis zu <a href="magic.html">MagiC</a>:</b> Übergibt man als Anzahl der zu
schreibenden Bytes den Wert 0, und in <i>buf</i> den Wert -1, so wird
die Datei auf die aktuelle Position des Dateizeigers
<i>geschrumpft</i>.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert die Anzahl der tatsächlich geschriebenen
Bytes, oder eine der folgenden Fehlermeldungen:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EACCDN">EACCDN</a> :</td>
<td valign="top"> Zugriff verwehrt
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EBADF">EBADF</a> :</td>
<td valign="top"> falsche Dateikennung
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#ELOCKED">ELOCKED</a> :</td>
<td valign="top"> Datei-Abschnitt ist markiert

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle GEMDOS Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fwrite">Binding</a> &nbsp; <a href="#Fread">Fread</a> &nbsp; <a href="gemdos_file.html#FIONWRITE">FIONWRITE</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fwrite">5.9.41.1 Bindings für Fwrite</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fwrite">Fwrite</a> ( int16_t handle, int32_t count, void *buf );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       buf           ; Offset 8
move.l    count,-(sp)   ; Offset 4
move.w    handle,-(sp)  ; Offset 2
move.w    #64,-(sp)     ; Offset 0
trap      #1            ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $C(sp),sp     ; Stack korrigieren
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top">GFA-Basic</td>
<td valign="top"> Fehler%=Gemdos(&amp;H40,W:handle,L:count%,L:buf%)
<br>&nbsp;

</td></tr>
</table>

<h3><a name="Fxattr">5.9.42 Fxattr</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Fxattr« - erweiterte Fileattribute ermitteln.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 300
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Fxattr ( int16_t flag, int8_t *name, <a href="gemdos_structures.html#XATTR">XATTR</a> *xattr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion ermittelt die erweiterten Attribute der Datei,
deren vollständiger Name in <i>name</i> angegeben ist, und speichert
diese in <i>xattr</i>.
<br>&nbsp;
<br>Der Parameter <i>flag</i> gibt an, wie symbolische Links
behandelt werden sollen. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">flag</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0</td>
<td valign="top"> symbolische Links werden bis zur Ursprungsdatei verfolgt, und
die erweiterten Attribute werden von dieser Datei ermittelt. (Dies
entspricht dem Vorgehen von stat unter UNIX).
</td></tr>

<tr><td nowrap="nowrap" valign="top">1</td>
<td valign="top"> die erweiterten Attribute des symbolischen Links selbst werden
ermittelt. (Dies entspricht dem Vorgehen von lstat unter UNIX).

</td></tr>
</table>

<br><b>Hinweis:</b> Diese Funktion ist äquivalent zu einem Aufruf
von <a href="#Fcntl">Fcntl</a> (Modus F_<a href="gemdos_structures.html#STAT">STAT</a>) mit dem Unterschied, daß statt eines
Dateinamens das Handle einer bereits geöffneten Datei übergeben
wird.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion kann folgende Rückgabewerte liefern:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#E_OK">E_OK</a> :</td>
<td valign="top"> kein Fehler aufgetreten.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EFILNF">EFILNF</a> :</td>
<td valign="top"> Datei nicht gefunden.
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gemdos_errors.html#EPTHNF">EPTHNF</a> :</td>
<td valign="top"> Pfad zur Datei nicht gefunden.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Available when a 'MiNT' cookie with a version of at least 0.90
exists und in <a href="magic.html">MagiC</a> ab Version 3.0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateifunktionen">Dateifunktionen</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Fxattr">Binding</a> &nbsp; <a href="#Fattrib">Fattrib</a> &nbsp; <a href="#Fsnext">Fsnext</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Fxattr">5.9.42.1 Bindings für Fxattr</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Fxattr">Fxattr</a> ( int16_t flag, int8_t *name, <a href="gemdos_structures.html#XATTR">XATTR</a> *xattr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       xattr        ; Offset 10
pea       name         ; Offset  6
move.w    flag,-(sp)   ; Offset  2
move.w    #300,-(sp)   ; Offset  0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $C(sp),sp    ; Stack korrigieren
</pre>

</td></tr>
</table>

<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="gemdos_main.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24">GEMDOS</a>
<a name="UDO_nav_lf_FOOT" href="gemdos_trap.html"><img src="udo_lf.gif" alt="gemdos-Trap" title="gemdos-Trap" border="0" width="24" height="24">gemdos-Trap</a>
<a name="UDO_nav_rg_FOOT" href="gemdos_datetime.html"><img src="udo_rg.gif" alt="Datum und Uhrzeit" title="Datum und Uhrzeit" border="0" width="24" height="24">Datum und Uhrzeit</a>
</body>
</html>
