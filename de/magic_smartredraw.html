<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 02.08.2025 -->
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Der Smart-Redraw in MagiC
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="magic.html"><img src="udo_up.gif" alt="MagiC" title="MagiC" border="0" width="24" height="24">MagiC</a>
<a name="UDO_nav_lf_HEAD" href="magic_shutdown.html"><img src="udo_lf.gif" alt="Allgemeines zum Shutdown" title="Allgemeines zum Shutdown" border="0" width="24" height="24">Allgemeines zum Shutdown</a>
<a name="UDO_nav_rg_HEAD" href="magic_taskmanager.html"><img src="udo_rg.gif" alt="Der Task-Manager in MagiC" title="Der Task-Manager in MagiC" border="0" width="24" height="24">Der Task-Manager in MagiC</a>

<hr>

<h1><a name="Der_20Smart-Redraw_20in_20MagiC">11.15 Der Smart-Redraw in MagiC</a></h1>
<a name="Smart-Redraw"></a>
<p>MagiC verfolgt die Philosophie, daß Geschwindigkeit nicht mit
brutalen Mitteln wie Grafikprozessoren usw. erreicht werden soll,
sondern mit ein wenig Nachdenken. Dazu gehört vor allem, immer nur
soviel zu tun, wie nötig ist. Während <a href="tos_main.html">TOS</a> beim Wechsel des aktuellen
Fensters, beim Schließen oder beim Verschieben mit Vorliebe das
<i>gesamte</i> Fenster oder gar noch völlig unschuldige,
unbeteiligte andere Fenster neu zeichnet, wird dies unter <a href="magic.html">MagiC</a>
wirkungsvoll vermieden. Obwohl diese unschöne Eigenschaft des <a href="tos_main.html">TOS</a>
nirgendwo dokumentiert ist, existieren leider Programme und
Bibliotheken (etwa die aus dem Buch '<i>Vom Anfänger zum
GEM-Profi</i>'), welche die Eigenschaft nutzen, daß <a href="tos_main.html">TOS</a> beim
Vergrößern eines Fensters dieses immer neu zeichnet.
</p>
<p><b>Dazu ein Beispiel:</b> Nehmen wir an, in ein Fenster passen
fünf Spalten nebeneinander, die auch angezeigt werden. Wenn der
Benutzer nun das Fenster so weit verkleinert, daß nur noch vier
Spalten hineinpassen, sortiert das Programm seine Daten um und
veranlaßt anschließend selbständig ein Neuzeichnen des Fensters
(<a href="tos_main.html">TOS</a> zeichnet bei Verkleinerung das Fenster <i>nicht</i> von sich aus
neu). Vergrößert der Benutzer dagegen das Fenster auf eine Breite
von 7 Spalten, sortiert das Anwenderprogramm die Daten ebenfalls um,
veranlaßt jedoch hier <i>kein</i> Neuzeichnen des Fensters. Aufgrund
des eher als Fehlverhalten des <a href="tos_main.html">TOS</a> zu bezeichnenden Verhaltens, das
Fenster für diesen Fall <i>immer ganz</i> neu zu zeichnen, findet
dann die Ausgabe statt.
</p>
<p><a href="magic.html">MagiC</a> zeichnet nun immer nur den minimal nötigen Teil des
Fensters neu; das wären im Fall des Aufziehens eines Fensters
höchstens rechts und unten zwei Rechtecke. Für die Programme, die
den oben beschriebenen Fehler des <a href="tos_main.html">TOS</a> ausnutzen, gibt sich so eine
<i>Diskrepanz zwischen logischem und physikalischem
Bildschirminhalt</i>.
</p>
<p>Viel einfacher wäre es gewesen, einfach auf die
Fallunterscheidung 'Fenster größer oder kleiner als vorher' zu
verzichten und immer im Fall des Umsortierens einen Redraw zu
veranlassen. Da das Betriebssystem auch im <a href="tos_main.html">TOS</a> die Redraws
zusammenfaßt, hat ein eventuell überflüssiger Redraw
<i>niemals</i> irgendwelche Auswirkungen.
</p>
<p>Den gleichen Effekt wie beschrieben hat man übrigens auch beim
Vergrößern des Fensters, wenn bereits die unterste Zeile bzw. die
rechteste Zeile dargestellt wird.
</p>
<p><b>Auch hier ein Beispiel:</b> Ein Text habe 100 Zeilen, das
Fenster habe eine Höhe von 20 Zeilen. Da der Scrollbalken ganz unten
ist, werden also die Zeilen 80 bis 100 im Fenster dargestellt. Wird
nun das Fenster nach unten vergrößert, so daß etwa 30 Zeilen Platz
finden, könnte man eigentlich nur einen weißen Bereich aufziehen, da
unterhalb von Zeile 100 ja keine Daten mehr sind. Um dies zu
verhindern scrollen die meisten Programme in dieser Situation ihre
Daten, in unserem Beispiel um 10 Zeilen nach oben. Folglich zeigt das
Programm jetzt die Zeilen 70 bis 100 an; da es aber auf einem <a href="tos_main.html">TOS</a>-
Fehler aufbaut, wird <i>kein</i> Neuzeichnen veranlaßt, was unter
<a href="magic.html">MagiC</a> natürlich prompt zur Konfusion führt.
</p>
<p>Auch hier wäre ein generelles Neuzeichnen des Fensters beim
Umsortieren auch unter <a href="tos_main.html">TOS</a> nicht nur sauber, sondern auch ohne
Nebenwirkung, da <a href="tos_main.html">TOS</a> auch hier unnötige Redraws vermeidet. Beim
direkten Vergleich zwischen 'Smart Redraw' und '<a href="tos_main.html">TOS</a> Redraw', was hier
durchaus im wörtlichen Sinn als Gegenteil zu verstehen ist, zeigt
sich in ersterem Fall ein wesentlich schnellerer, ruhigerer und
saubererer Bildschirmaufbau, der durchaus mit dem
<i>Macintosh</i>-System konkurrieren kann und unter <a href="tos_main.html">TOS</a> selbst mit
Blitter und 68040 Prozessor in dieser Form nicht möglich wäre. Daher
wird dringend empfohlen, diese elegante Lösung nicht durch Ausnutzen
undokumentierter Eigenschaften des <a href="tos_main.html">TOS</a> zunichte zu machen.
</p>
<p><b>Sollten sie Programme benutzen, die das oben beschriebene
Fehlverhalten aufweisen, so sollten sie wie folgt verfahren:</b>
</p>
<ul>
<li> im MagxConf ACC/CPX den Schalter 'Smart Redraw' deaktivieren
</li>
<li> beim Autor des betreffenden Programmes anregen, daß dieser
Fehler umgehend behoben wird.
</li>
</ul>

<p>Querverweis: <a href="magic_programs.html#Smart-Redraw_20ausschalten">Smart-Redraw ausschalten</a> &nbsp; <a href="gem_about.html">GEM</a> &nbsp; <a href="guidelines_styles.html">Style-Guidelines</a>
</p>
<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="magic.html"><img src="udo_up.gif" alt="MagiC" title="MagiC" border="0" width="24" height="24">MagiC</a>
<a name="UDO_nav_lf_FOOT" href="magic_shutdown.html"><img src="udo_lf.gif" alt="Allgemeines zum Shutdown" title="Allgemeines zum Shutdown" border="0" width="24" height="24">Allgemeines zum Shutdown</a>
<a name="UDO_nav_rg_FOOT" href="magic_taskmanager.html"><img src="udo_rg.gif" alt="Der Task-Manager in MagiC" title="Der Task-Manager in MagiC" border="0" width="24" height="24">Der Task-Manager in MagiC</a>
</body>
</html>
