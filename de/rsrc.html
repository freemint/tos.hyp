<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 02.08.2025 -->
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Resourcefunktionen
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_HEAD" href="prop.html"><img src="udo_lf.gif" alt="Eigenschaft-Funktionen" title="Eigenschaft-Funktionen" border="0" width="24" height="24">Eigenschaft-Funktionen</a>
<a name="UDO_nav_rg_HEAD" href="shel.html"><img src="udo_rg.gif" alt="Shellfunktionen" title="Shellfunktionen" border="0" width="24" height="24">Shellfunktionen</a>

<hr>

<h1><a name="Resourcefunktionen">8.21 Resourcefunktionen</a></h1>
<p>Diese Bibliothek enthält Funktionen, um die Resourcen eines
<a href="gem_about.html">GEM</a>-Programms (Menüzeilen, <a href="guidelines_styles.html#Dialogboxen">Dialogboxen</a>, Icons etc.) in den Speicher
zu laden, und die Adressen der relevanten Objekte zu bestimmen. Für
diesen Zweck stehen die folgenden Routinen zur Verfügung:
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#rsrc_free">rsrc_free</a></td>
<td valign="top"> Resourcespeicher freigeben
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#rsrc_gaddr">rsrc_gaddr</a></td>
<td valign="top"> Adresse einer <a href="proto_gdps.html#Datenstruktur">Datenstruktur</a> ermitteln
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#rsrc_load">rsrc_load</a></td>
<td valign="top"> Resourcedatei laden
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#rsrc_obfix">rsrc_obfix</a></td>
<td valign="top"> Zeichen- in Pixelkoordinaten wandeln
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#rsrc_rcfix">rsrc_rcfix</a></td>
<td valign="top"> Zeichen- in Pixelkoordinaten wandeln
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#rsrc_saddr">rsrc_saddr</a></td>
<td valign="top"> Adresse einer <a href="proto_gdps.html#Datenstruktur">Datenstruktur</a> speichern
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="magic_function.html#sys_recalc_cicon_colours">sys_recalc_cicon_colours</a></td>
<td valign="top">

</td></tr>
</table>

<p><b>Hinweis:</b> Die Auslagerung in eine Resource-Datei hat den
unschätzbaren Vorteil, das optische Erscheinungsbild (und
insbesondere die Sprache) leicht ändern zu können, <i>ohne</i> am
Programm selbst Modifizierungen vornehmen zu müssen.
</p>
<p>Querverweis: <a href="aes_main.html">AES</a> &nbsp; <a href="guidelines_styles.html">Style-Guidelines</a>
</p>
<h3><a name="rsrc_free">8.21.1 rsrc_free</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Resource free« - gibt den Speicher einer Resourcedatei
wieder frei.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 111
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t rsrc_free ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion gibt den durch eine Resourcedatei belegten
Speicherplatz wieder frei.
<br>&nbsp;
<br><b>Hinweis:</b> Man sollte auf keinen Fall vergessen, diese
Funktion am Ende eines Programms aufzurufen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Ein Fehler ist nur dann aufgetreten, wenn als Ergebnis 0
zurückgegeben wird.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Resourcefunktionen">Resourceorganisation</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20rsrc_free">Binding</a> &nbsp; <a href="#rsrc_load">rsrc_load</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20rsrc_free">8.21.1.1 Bindings für rsrc_free</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#rsrc_free">rsrc_free</a> ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#rsrc_free">rsrc_free</a> (void)
{
   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(111) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">111   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">0     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="rsrc_gaddr">8.21.2 rsrc_gaddr</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Resource get Address« - ermittelt die Adresse eines Objekts
in einem Resourceset.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 112
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t rsrc_gaddr ( int16_t re_gtype, int16_t re_gindex, void
*gaddr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion ermittelt die Anfangsadressen verschiedener
Objektstrukturen von im Speicher geladenen Resourcefiles. Es gilt:
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Parameter</td>
  <td align="left" valign="top">Bedeutung</td>
</tr>
<tr>
  <td align="left" valign="top">re_gtype</td>
  <td align="left" valign="top">Typ der gesuchten Struktur</td>
</tr>
<a name="R_TREE"></a>
<a name="R_OBJECT"></a>
<a name="R_TEDINFO"></a>
<a name="R_ICONBLK"></a>
<a name="R_BITBLK"></a>
<a name="R_STRING"></a>
<a name="R_IMAGEDATA"></a>
<a name="R_OBSPEC"></a>
<a name="R_TEPTEXT"></a>
<a name="R_TEPTMPLT"></a>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_TREE      0&nbsp; = Objektbaum</td>
</tr>
<a name="R_TEPVALID"></a>
<a name="R_IBPMASK"></a>
<a name="R_IBPDATA"></a>
<a name="R_IBPTEXT"></a>
<a name="R_BIPDATA"></a>
<a name="R_FRSTR"></a>
<a name="R_FRIMG"></a>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_OBJECT    1&nbsp; = <a href="aes_structures.html#OBJECT">OBJECT</a></td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_TEDINFO   2&nbsp; = <a href="aes_structures.html#TEDINFO">TEDINFO</a></td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_ICONBLK   3&nbsp; = <a href="aes_structures.html#ICONBLK">ICONBLK</a></td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_BITBLK    4&nbsp; = <a href="aes_structures.html#BITBLK">BITBLK</a></td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_STRING    5&nbsp; = String</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_IMAGEDATA 6&nbsp; = imagedata</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_OBSPEC    7&nbsp; = ob_spec</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_TEPTEXT   8&nbsp; = te_ptext</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_TEPTMPLT  9&nbsp; = te_ptmplt</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_TEPVALID  10 = te_pvalid</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_IBPMASK   11 = ib_pmask</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_IBPDATA   12 = ib_pdata</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_IBPTEXT   13 = ib_ptext</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_BIPDATA   14 = bi_pdata</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_FRSTR     15 = ad_frstr</td>
</tr>
<tr>
  <td align="left" valign="top">&nbsp;</td>
  <td align="left" valign="top">R_FRIMG     16 = ad_frimg</td>
</tr>
<tr>
  <td align="left" valign="top">re_gindex</td>
  <td align="left" valign="top"><a href="indexudo.html">Index</a> der gesuchten Struktur</td>
</tr>
<tr>
  <td align="left" valign="top">gaddr</td>
  <td align="left" valign="top">Adresse der gewünschten Struktur</td>
</tr>
</table>
</div>

<br><b>Hinweis:</b> Wenn beispielsweise der Textzeiger innerhalb
einer <a href="aes_structures.html#TEDINFO">TEDINFO</a>-Struktur gesucht werden soll, so muß nicht die Nummer
des zugehörigen Objektes, sondern die Nummer der <a href="aes_structures.html#TEDINFO">TEDINFO</a>-Struktur
übergeben werden. Für andere Codierungen gilt i.w. das gleiche.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Ein Fehler ist nur dann aufgetreten, wenn als Ergebnis 0
zurückgegeben wird.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Resourcefunktionen">Resourceorganisation</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20rsrc_gaddr">Binding</a> &nbsp; <a href="#rsrc_load">rsrc_load</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20rsrc_gaddr">8.21.2.1 Bindings für rsrc_gaddr</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#rsrc_gaddr">rsrc_gaddr</a> ( int16_t re_gtype, int16_t re_gindex, void
*gaddr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#rsrc_gaddr">rsrc_gaddr</a> (int16_t re_gtype, int16_t re_gindex,
                    void *gaddr)
{
   int_in[0]  = re_gtype;
   int_in[1]  = re_gindex;
   control[4] = 1;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (112);

   control[4] = 0;
   *gaddr = addr_out[0];

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">112   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">0     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">1     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">re_gtype</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">re_gindex</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
<tr>
  <td align="left" valign="top">addr_out</td>
  <td align="left" valign="top">addr_out[0]</td>
  <td align="left" valign="top">gaddr</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="rsrc_load">8.21.3 rsrc_load</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Resource load« - lädt eine Resourcedatei in den Speicher.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 110
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t rsrc_load ( CONST int8_t *re_lpfname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion dient zum Laden und Initialisieren einer
Resource-Datei. Der Parameter <i>re_lpfname</i> enthält dabei den
Dateinamen der Resourcedatei.
<br>&nbsp;
<br><b>Hinweis:</b> Die Datei wird in allen Verzeichnissen gesucht,
die dem <a href="aes_main.html">AES</a> bekannt sind.
<br>&nbsp;
<br>Ab PC-<a href="gem_about.html">GEM</a> Version 2.0 wird übrigens bei Objektbäumen, die als
Wurzel eine Box besitzen (z.B. bei allen Dialogboxen) das Flag <a href="aes_fundamentals.html#SHADOWED">SHADOWED</a> im
Objektstatus gesetzt. Das bedeutet, daß alle Dialogboxen statt umrahmt mit
einem Schatten gezeichnet werden. Dies liegt in den
Rechtsstreitigkeiten zwischen <i>Apple</i> und <i>Digital
Research</i> begründet. Allerdings kann das <a href="aes_fundamentals.html#SHADOWED">SHADOWED</a> Bit (nach dem
rsrc_load) zur Laufzeit zurückgesetzt und das normale <a href="aes_fundamentals.html#OUTLINED">OUTLINED</a> Bit
gesetzt werden.
<br>&nbsp;
<br><b>Achtung:</b> Eine Umwandlung von Bit-Images und Icons vom
Standardformat in das geräteabhängige Format geschieht an dieser
Stelle <i>nicht</i>. Dies muss ggfs. vom Programmierer selbst
übernommen werden.
<br>&nbsp;
<br><a href="magic.html">MagiC</a> seit Version 3 und Geneva können Resourcen im sogenannten
<a href="aes_structures.html#RSXHDR">Interface-Format</a> laden. Bei anderen AESen wird diese Möglichkeit durch <a href="appl.html#UDO__25apgi_2">appl_getinfo</a>
(Opcode 2) angezeigt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Ein Fehler ist nur dann aufgetreten, wenn als Ergebnis 0
zurückgegeben wird.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> In allen AES Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Resourcefunktionen">Resourceorganisation</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20rsrc_load">Binding</a> &nbsp; <a href="#rsrc_free">rsrc_free</a> &nbsp; <a href="shel.html#shel_find">shel_find</a> &nbsp; <a href="vdi_raster.html#vr_trnfm">vr_trnfm</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20rsrc_load">8.21.3.1 Bindings für rsrc_load</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#rsrc_load">rsrc_load</a> ( CONST int8_t *re_lpfname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#rsrc_load">rsrc_load</a> (CONST int8_t *re_lpfname)
{
   addr_in[0] = re_lpfname;
   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(110) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">110   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">re_lpfname</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="rsrc_obfix">8.21.4 rsrc_obfix</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Resource Object fix« - wandelt Zeichensatz- in
Pixel-Koordinaten um.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 114
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t rsrc_obfix ( <a href="aes_structures.html#OBJECT">OBJECT</a> *re_otree, int16_t re_oobject );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion konvertiert die Größe und Position eines
Objektes von einer Zeichendarstellung in die Pixeldarstellung. Es
gilt:
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Parameter</td>
  <td align="left" valign="top">Bedeutung</td>
</tr>
<tr>
  <td align="left" valign="top"><i>re_otree</i></td>
  <td align="left" valign="top">Adresse des Objektbaumes</td>
</tr>
<tr>
  <td align="left" valign="top"><i>re_oobject</i></td>
  <td align="left" valign="top">Nummer des Objektes</td>
</tr>
</table>
</div>

<br><b>Hinweis:</b> Ein Aufruf dieser Funktion ist immer dann
notwendig, wenn Objekte zur Laufzeit erzeugt werden, oder nicht per
<a href="#rsrc_load">rsrc_load</a> geladen werden.
<br>&nbsp;
<br>Die Konvertierung erfolgt, indem das untere Byte der
Koordinatenangabe mit der Größe eines Zeichens aus dem
Systemzeichensatz multipliziert, und darauf das (vorzeichenbehaftete)
obere Byte addiert wird. <b>Ein Sonderfall:</b> Bei einer Breite von
genau 80 Zeichen wird die Breite des Bildschirms eingesetzt; dies wird
z.B. beim Hintergrundobjekt des Menübaums benutzt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Als Ergebnis wird immer der Wert 1 zurückgegeben.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Resourcefunktionen">Resourceorganisation</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20rsrc_obfix">Binding</a> &nbsp; <a href="#rsrc_load">rsrc_load</a> &nbsp; <a href="#rsrc_rcfix">rsrc_rcfix</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20rsrc_obfix">8.21.4.1 Bindings für rsrc_obfix</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#rsrc_obfix">rsrc_obfix</a> ( <a href="aes_structures.html#OBJECT">OBJECT</a> *re_otree, int16_t re_oobject );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#rsrc_obfix">rsrc_obfix</a> (<a href="aes_structures.html#OBJECT">OBJECT</a> *re_otree, int16_t re_oobject)
{
   int_in[0]  = re_oobject;
   addr_in[0] = re_otree;

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(114) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">114   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">1     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">re_oobject</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">re_otree</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="rsrc_rcfix">8.21.5 rsrc_rcfix</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Resource Object Fix« - wandelt Zeichenkoordinaten in
Pixelkoordinaten
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 115
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t rsrc_rcfix ( <a href="aes_structures.html#RSHDR">RSHDR</a> *rc_header );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Diese in <a href="magic.html">MagiC</a> und MultiTOS vorhandene Funktion paßt von der
Applikation bereits in den Speicher geladene Resourcedaten an. Dabei
werden die Koordinaten von Zeichen- in Pixelkoordinaten gewandelt.
<br>&nbsp;
<br>Falls die Applikation vor dem Aufruf dieser Funktion bereits
eine RSC-Datei geladen hat, so muß diese vorher mit <a href="#rsrc_free">rsrc_free</a>
freigegeben werden. Das gleiche gilt beim Beenden der Applikation.
<br>&nbsp;
<br>Der Vorteil dieser Funktion besteht darin, daß die
Resource-Datei des Programms in den Programmcode eingebunden werden
kann. Es reicht dann aus, einfach rsrc_rcfix aufzurufen, und ein Laden
via <a href="#rsrc_load">rsrc_load</a> kann entfallen.
<br>&nbsp;
<table class="UDO_env_ilist">
<tr><td nowrap="nowrap" valign="top"><i>rc_header:</i></td>
<td valign="top"> Adresse des RSC-Headers im Speicher; hinter diesem müssen die
RSC-Daten liegen.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> z.Zt. unbekannt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Nur verfügbar in <a href="magic.html">MagiC</a> und <a href="aes_main.html">AES</a> Versions 4.0 und größer. Das
Vorhandensein dieser Funktion kann per <a href="appl.html#UDO__25apgi_4">appl_getinfo</a> (Opcode 4) festgestellt
werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Resourcefunktionen">Resourceorganisation</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20rsrc_rcfix">Binding</a> &nbsp; <a href="#rsrc_load">rsrc_load</a> &nbsp; <a href="#rsrc_obfix">rsrc_obfix</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20rsrc_rcfix">8.21.5.1 Bindings für rsrc_rcfix</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#rsrc_rcfix">rsrc_rcfix</a> ( <a href="aes_structures.html#RSHDR">RSHDR</a> *rc_header );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#rsrc_rcfix">rsrc_rcfix</a> ( <a href="aes_structures.html#RSHDR">RSHDR</a> *rc_header )
{
   addr_in[0] = rc_header;
   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(115) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">115   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">rc_header</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="rsrc_saddr">8.21.6 rsrc_saddr</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Resource store Address« - speichert die Adresse eines
Objektes.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 113
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t rsrc_saddr ( int16_t re_stype, int16_t re_sindex, void
*saddr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion speichert die Anfangsadresse einer <a href="proto_gdps.html#Datenstruktur">Datenstruktur</a>
im Speicher. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">re_stype</td>
<td valign="top"> Typ der Struktur
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">R_TREE</td>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">Objektbaum</td>
</tr>
<tr>
  <td align="left" valign="top">R_OBJECT</td>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">Individual <a href="aes_structures.html#OBJECT">OBJECT</a></td>
</tr>
<tr>
  <td align="left" valign="top">R_TEDINFO</td>
  <td align="left" valign="top">2</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><a href="aes_structures.html#TEDINFO">TEDINFO</a> Struktur</td>
</tr>
<tr>
  <td align="left" valign="top">R_ICONBLK</td>
  <td align="left" valign="top">3</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><a href="aes_structures.html#ICONBLK">ICONBLK</a> Struktur</td>
</tr>
<tr>
  <td align="left" valign="top">R_BITBLK</td>
  <td align="left" valign="top">4</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><a href="aes_structures.html#BITBLK">BITBLK</a> Struktur</td>
</tr>
<tr>
  <td align="left" valign="top">R_STRING</td>
  <td align="left" valign="top">5</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><a href="c_task_royal.html#Free">Free</a> string data</td>
</tr>
<tr>
  <td align="left" valign="top">R_IMAGEDATA</td>
  <td align="left" valign="top">6</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><a href="c_task_royal.html#Free">Free</a> image data</td>
</tr>
<tr>
  <td align="left" valign="top">R_OBSPEC</td>
  <td align="left" valign="top">7</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>ob_spec</i> Feld in <a href="aes_structures.html#OBJECT">OBJECT</a></td>
</tr>
<tr>
  <td align="left" valign="top">R_TEPTEXT</td>
  <td align="left" valign="top">8</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>te_ptext</i> in <a href="aes_structures.html#TEDINFO">TEDINFO</a></td>
</tr>
<tr>
  <td align="left" valign="top">R_TEPTMPLT</td>
  <td align="left" valign="top">9</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>te_ptmplt</i> in <a href="aes_structures.html#TEDINFO">TEDINFO</a></td>
</tr>
<tr>
  <td align="left" valign="top">R_TEPVALID</td>
  <td align="left" valign="top">10</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>te_pvalid</i> in <a href="aes_structures.html#TEDINFO">TEDINFO</a></td>
</tr>
<tr>
  <td align="left" valign="top">R_IBPMASK</td>
  <td align="left" valign="top">11</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>ib_pmask</i> in <a href="aes_structures.html#ICONBLK">ICONBLK</a></td>
</tr>
<tr>
  <td align="left" valign="top">R_IBPDATA</td>
  <td align="left" valign="top">12</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>ib_pdata</i> in <a href="aes_structures.html#ICONBLK">ICONBLK</a></td>
</tr>
<tr>
  <td align="left" valign="top">R_IBPTEXT</td>
  <td align="left" valign="top">13</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>ib_ptext</i> in <a href="aes_structures.html#ICONBLK">ICONBLK</a></td>
</tr>
<tr>
  <td align="left" valign="top">R_BIPDATA</td>
  <td align="left" valign="top">14</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>ib_pdata</i> in <a href="aes_structures.html#BITBLK">BITBLK</a></td>
</tr>
<tr>
  <td align="left" valign="top">R_FRSTR</td>
  <td align="left" valign="top">15</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>ad_frstr</i> free string</td>
</tr>
<tr>
  <td align="left" valign="top">R_FRIMG</td>
  <td align="left" valign="top">16</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top"><i>ad_frimg</i> free image</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">re_sindex</td>
<td valign="top"> Position innerhalb der <a href="proto_gdps.html#Datenstruktur">Datenstruktur</a>
</td></tr>

<tr><td nowrap="nowrap" valign="top">saddr</td>
<td valign="top"> abzuspeichernde Adresse

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Ein Fehler ist nur dann aufgetreten, wenn als Ergebnis 0
zurückgegeben wird.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> All AES versions.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Resourcefunktionen">Resourceorganisation</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20rsrc_saddr">Binding</a> &nbsp; <a href="#rsrc_gaddr">rsrc_gaddr</a> &nbsp; <a href="aes_structures.html#OBJECT">OBJECT</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20rsrc_saddr">8.21.6.1 Bindings für rsrc_saddr</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#rsrc_saddr">rsrc_saddr</a> ( int16_t re_stype, int16_t re_sindex, void
*saddr );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#rsrc_saddr">rsrc_saddr</a> (int16_t re_stype, int16_t re_sindex,
                    void *saddr)
{
   int_in[0]  = re_stype;
   int_in[1]  = re_sindex;
   addr_in[0] = saddr;

   return ( <a href="aes_fundamentals.html#crys_if">crys_if</a>(113) );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">113   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">re_stype</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">re_sindex</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">saddr</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>


</td></tr>
</table>

<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_FOOT" href="prop.html"><img src="udo_lf.gif" alt="Eigenschaft-Funktionen" title="Eigenschaft-Funktionen" border="0" width="24" height="24">Eigenschaft-Funktionen</a>
<a name="UDO_nav_rg_FOOT" href="shel.html"><img src="udo_rg.gif" alt="Shellfunktionen" title="Shellfunktionen" border="0" width="24" height="24">Shellfunktionen</a>
</body>
</html>
