<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 20.12.2025 -->
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Dateiauswahl
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_HEAD" href="appl.html"><img src="udo_lf.gif" alt="Applikationsfunktionen" title="Applikationsfunktionen" border="0" width="24" height="24">Applikationsfunktionen</a>
<a name="UDO_nav_rg_HEAD" href="pdlg.html"><img src="udo_rg.gif" alt="Druckdialoge" title="Druckdialoge" border="0" width="24" height="24">Druckdialoge</a>

<hr>

<h1><a name="Dateiauswahl">8.4 Dateiauswahl</a></h1>
<p>Die Funktionen dieser Bibliothek stellen eine Dateiauswahl zur
Verfügung, mit deren Hilfe sich Dateien laden bzw. abspeichern
lassen. Für diesen Zweck sind die folgenden Routinen vorhanden:
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fsel_boxinput">fsel_boxinput</a></td>
<td valign="top"> Dateinamen per File-Selektor auswählen (Boxkite)
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fsel_exinput">fsel_exinput</a></td>
<td valign="top"> Dateinamen per File-Selektor auswählen
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fsel_input">fsel_input</a></td>
<td valign="top"> Dateinamen per File-Selektor auswählen
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#x_fsel_input">x_fsel_input</a></td>
<td valign="top"> Dateinamen per File-Selektor auswählen (Geneva)

</td></tr>
</table>

<p><b>Hinweis:</b> Leider werden alternative Dateisysteme
(Stichwort: lange Dateinamen) nicht unterstützt; ab <a href="magic.html">MagiC</a> 4 wird dies
jedoch von den Funktionen der FSLX-Library übernommen.
</p>
<p>Querverweis: <a href="fslx.html">Fileselektoren</a> &nbsp; <a href="guidelines_styles.html">Style-Guidelines</a>
</p>
<h3><a name="fsel_boxinput">8.4.1 fsel_boxinput</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File Selection Extended Input« - selektiert Dateinamen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 91
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t fsel_boxinput ( int16_t *global, int8_t *fs_einpath,
int8_t *fs_einsel, int16_t *fs_eexbutton, int8_t *elabel,
<a href="fsel.html#FSEL_CALLBACK">FSEL_CALLBACK</a> callback );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion stellt eine Dateiauswahlbox zur Verfügung, der
auch ein Titel-String übergeben werden kann. Es handelt sich hierbei um
eine erweiterte Version der <a href="#Dateiauswahl">Dateiauswahl</a> BoxKite.
<br>&nbsp;
<br><b>Der Funktion werden folgende Parameter übergeben:</b>
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_einpath</td>
<td valign="top"> Name des Default-Zugriffspfades (absolut) mit angehängter
Suchmaske. Enthält nach dem Aufruf den neuen Pfadnamen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_einsel</td>
<td valign="top"> Name der Default-Datei. Enthält nach dem Aufruf den neuen
Dateinamen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_eexbutton</td>
<td valign="top">
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">es wurde Abbruch gewählt</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">es wurde Ok gewählt</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_elabel</td>
<td valign="top"> Titelzeile
</td></tr>

<tr><td nowrap="nowrap" valign="top">callback</td>
<td valign="top"> Adresse einer Funktion, welche von BoxKite aufgerufen wird
falls eine <a href="gem_about.html">GEM</a>-<a href="proto_ssp.html#Message">Message</a> an die Hauptapplikation übergeben werden soll.
<br>Es handelt sich dabei nicht nur um die <a href="proto_ssp.html#Message">Message</a> <a href="evnt.html#WM_REDRAW">WM_REDRAW</a>. Sondern
z.B. auch um <a href="evnt.html#WM_MOVED">WM_MOVED</a>, da es immerhin Betriebssystemversionen gibt,
die das Verschieben von hintenliegenden Fenstern ermöglichen. Messages,
die implizit neue Fenster öffnen oder vorhandene nach oben bringen,
sollten dagegen ignoriert oder aufgehoben und erst nach der Rückkehr
aus dem Fileselector behandelt werden. <a href="evnt.html#WM_TOPPED">WM_TOPPED</a>-Messages werden nicht
an den <a href="proto_ssp.html#Message">Message</a>-Callback durchgereicht.

</td></tr>
</table>

<br><b>Hinweis:</b> BoxKite stellt ab Version 2.00 auch die
Funktionen der <a href="magic.html">MagiC</a> 4 <a href="fslx.html">Dateiauswahl</a> zur Verfügung. Das Vorhandensein dieser
Funktionen kann per <a href="appl.html#UDO__25apgi_7">appl_getinfo</a> (Opcode 7) festgestellt werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Der Rückgabewert der Funktion (0 = Fehler) sollte unbedingt
beachtet werden, da z.B. bei Speichermangel kein Fileselektor mehr
benutzt werden kann.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Wenn der BoxKite ab Version 1.71 installiert ist. Dazu kann der
Cookie HBFS auf des vorhandensein geprüft werden. Allerdings ist
dieser auch schon vor der Version 1.71 vorhanden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateiauswahl">Dateiauswahl</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20fsel_boxinput">Binding</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20fsel_boxinput">8.4.1.1 Bindings für fsel_boxinput</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top">
<br>&nbsp;
<a name="FSEL_CALLBACK"></a>
<br>/* Prototyp des <a href="proto_ssp.html#Message">Message</a>-Handlers. */
<br>typedef void <a href="proto_xfsl.html#cdecl">cdecl</a> (* FSEL_CALLBACK)(int16_t *msg);
<br>&nbsp;
<br>int16_t <a href="#fsel_boxinput">fsel_boxinput</a> ( int16_t *global, int8_t *fs_einpath,
int8_t *fs_einsel, int16_t *fs_eexbutton, int8_t *elabel,
FSEL_CALLBACK callback );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fsel_boxinput">fsel_boxinput</a> ( int16_t *global, int8_t *fs_einpath,
                        int8_t *fs_einsel,
                        int16_t *fs_eexbutton,
                        int8_t *elabel,
                        FSEL_CALLBACK callback )
{
  void *aespb[6], *addrin[6], *addrout[6];
  int <a href="vdi_bindings.html#contrl">contrl</a>[5], <a href="vdi_bindings.html#intin">intin</a>[16], <a href="vdi_bindings.html#intout">intout</a>[7];

  aespb[0] = <a href="vdi_bindings.html#contrl">contrl</a>;
  aespb[1] = global;
  aespb[2] = <a href="vdi_bindings.html#intin">intin</a>;
  aespb[3] = <a href="vdi_bindings.html#intout">intout</a>;
  aespb[4] = addrin;
  aespb[5] = addrout;

  <a href="vdi_bindings.html#contrl">contrl</a>[0] = 91;
  <a href="vdi_bindings.html#contrl">contrl</a>[1] = 0;
  <a href="vdi_bindings.html#contrl">contrl</a>[2] = 2;
  <a href="vdi_bindings.html#contrl">contrl</a>[3] = 4;
  <a href="vdi_bindings.html#contrl">contrl</a>[4] = 0;

   addr_in[0] = fs_einpath;
   addr_in[1] = fs_einsel;
   addr_in[2] = elabel;
   addr_in[3] = callback;

  _crystal((<a href="aes_structures.html#AESPB">AESPB</a> *)aespb);

   *fs_eexbutton = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">91    # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">4     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fs_einpath</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">fs_einsel</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">elabel</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+12</td>
  <td align="left" valign="top">addr_in[3]</td>
  <td align="left" valign="top">callback</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fs_eexbutton</td>
</tr>
</table>
</div>


</td></tr>
</table>

<p><b>Achtung</b> BoxKite benötigt Informationen aus dem
'global'-Array der Hauptapplikation. Die mitgelieferten <a href="gem_about.html">GEM</a>-Bindings
von Entwicklungssystemen übergeben dieses normalerweise automatisch.
</p>
<h3><a name="fsel_exinput">8.4.2 fsel_exinput</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File Selection Extended Input« - selektiert Dateinamen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 91
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t fsel_exinput ( int8_t *fs_einpath, int8_t *fs_einsel,
int16_t *fs_eexbutton, int8_t *elabel );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion stellt eine Dateiauswahlbox zur Verfügung, der
auch ein Titel-String übergeben werden kann.
<br>&nbsp;
<p><img src="bilder/gif/f_select.gif" alt="" title="" border="0" width="328" height="311"></p>
<br><b>Der Funktion werden folgende Parameter übergeben:</b>
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_einpath</td>
<td valign="top"> Name des Default-Zugriffspfades (absolut) mit angehängter
Suchmaske. Enthält nach dem Aufruf den neuen Pfadnamen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_einsel</td>
<td valign="top"> Name der Default-Datei. Enthält nach dem Aufruf den neuen
Dateinamen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_eexbutton</td>
<td valign="top">
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">es wurde Abbruch gewählt</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">es wurde Ok gewählt</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_elabel</td>
<td valign="top"> Titelzeile

</td></tr>
</table>

<br><b>Hinweis:</b> Die Funktion sollte mit <a href="wind.html#wind_update">wind_update</a> (<a href="wind.html#BEG_MCTRL">BEG_MCTRL</a>
bzw. <a href="wind.html#END_MCTRL">END_MCTRL</a>) geschachtelt werden, um zu verhindern, daß
Doppelklicks an darunter liegende Fenster weitergereicht werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Der Rückgabewert der Funktion (0 = Fehler) sollte unbedingt
beachtet werden, da z.B. bei Speichermangel kein Fileselektor mehr
benutzt werden kann.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Diese Funktion ist erst ab AES 1.4 verfügbar.
<br>&nbsp;
<br>This is also present in FreeGEM. To check for this feature, use
<a href="appl.html#appl_init">appl_init</a> and check that xbuf.arch is nonzero.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateiauswahl">Dateiauswahl</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20fsel_exinput">Binding</a> &nbsp; <a href="#fsel_input">fsel_input</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20fsel_exinput">8.4.2.1 Bindings für fsel_exinput</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fsel_exinput">fsel_exinput</a> ( int8_t *fs_einpath, int8_t *fs_einsel,
int16_t *fs_eexbutton, int8_t *elabel );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fsel_exinput">fsel_exinput</a> (int8_t *fs_einpath, int8_t *fs_einsel,
                      int16_t *fs_eexbutton, int8_t *elabel)
{
   addr_in[0] = fs_einpath;
   addr_in[1] = fs_einsel;
   addr_in[2] = elabel;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (91);

   *fs_eexbutton = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">91    # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">3     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fs_einpath</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">fs_einsel</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">elabel</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fs_eexbutton</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fsel_input">8.4.3 fsel_input</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File Selection Input« - selektiert Dateinamen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 90
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t fsel_input ( int8_t *fs_iinpath, int8_t *fs_iinsel,
int16_t *fs_iexbutton );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion stellt eine Dateiauswahlbox zur Verfügung. Es
gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_iinpath</td>
<td valign="top"> Name des Default-Zugriffspfades (absolut) mit angehängter
Suchmaske. Enthält nach dem Aufruf den neuen Pfadnamen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_iinsel</td>
<td valign="top"> Name der Default-Datei. Enthält nach dem Aufruf den neuen
Dateinamen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fs_iexbutton</td>
<td valign="top">
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">es wurde Abbruch gewählt</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">es wurde Ok gewählt</td>
</tr>
</table>
</div>


</td></tr>
</table>

<br><b>Hinweis:</b> Die Funktion sollte mit <a href="wind.html#wind_update">wind_update</a> (<a href="wind.html#BEG_MCTRL">BEG_MCTRL</a>
bzw. <a href="wind.html#END_MCTRL">END_MCTRL</a>) geschachtelt werden, um zu verhindern, daß
Doppelklicks an darunter liegende Fenster weitergereicht werden.
<br>&nbsp;
<br>In AES-Versionen kleiner als 1.4 können übrigens nur
maximal 100 Dateien angezeigt werden; dort wird dann mit einem
'Ping'-Geräusch gewarnt, wenn nicht alle Dateien angezeigt werden
konnten.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Der Rückgabewert der Funktion (0 = Fehler) sollte unbedingt
beachtet werden, da z.B. bei Speichermangel kein Fileselektor mehr
benutzt werden kann.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> All AES versions, not present in <a href="gem_about.html#ViewMAX">ViewMAX</a>/3, and will crash
<a href="gem_about.html#ViewMAX">ViewMAX</a>/2.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateiauswahl">Dateiauswahl</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20fsel_input">Binding</a> &nbsp; <a href="#fsel_exinput">fsel_exinput</a> &nbsp; <a href="magic_xfs.html">XFS-Konzept in MagiC</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20fsel_input">8.4.3.1 Bindings für fsel_input</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fsel_input">fsel_input</a> ( int8_t *fs_iinpath, int8_t *fs_iinsel,
int16_t *fs_iexbutton );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fsel_input">fsel_input</a> (int8_t *fs_iinpath, int8_t *fs_iinsel,
                    int16_t *fs_iexbutton)
{
   addr_in[0] = fs_iinpath;
   addr_in[1] = fs_iinsel;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (90);

   *fs_iexbutton = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">90    # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">2     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fs_iinpath</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">fs_iinsel</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">fs_iexbutton</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="x_fsel_input">8.4.4 x_fsel_input</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Extended file selector«
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 28960
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t x_fsel_input( int8_t *inpath, int16_t pathlen, int8_t
*files, int16_t sels, int16_t *exbutton, int8_t *label );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top">
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">inpath</td>
<td valign="top"> Pointer to the path (with wildcards) to start selection at
</td></tr>

<tr><td nowrap="nowrap" valign="top">pathlen</td>
<td valign="top"> Maximum length (incl. null) of inpath
</td></tr>

<tr><td nowrap="nowrap" valign="top">files</td>
<td valign="top"> Pointer to the string containing the default filename to be
displayed. Also, holds up to &quot;sels&quot; filenames (each
null-terminated) upon return.
</td></tr>

<tr><td nowrap="nowrap" valign="top">sels</td>
<td valign="top"> Maximum number of items that can be selected upon return from
the call
</td></tr>

<tr><td nowrap="nowrap" valign="top">exbutton</td>
<td valign="top"> Exit Button:
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">es wurde Abbruch gewählt</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">es wurde Ok gewählt</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">label</td>
<td valign="top"> A label of up to 30 characters, which will appear at the top of
the item selector.

</td></tr>
</table>

<br>This function is similar to <a href="#fsel_exinput">fsel_exinput</a>, but has several
extensions:
<br>&nbsp;
<ul>
<li> The <i>inpath</i> parameter can contain not only the
traditional * and ? wildcards, but can also contain regular
expressions using [] and {}:
<ul>
<li> Any characters contained between square brackets
(&quot;[]&quot;) define a list of acceptable characters to substitute
into that one position. This can either be individual characters, like
&quot;[ABCD]&quot;, a range separated by a hyphen like
&quot;[A-D]&quot;, or a mix of the two, like &quot;[A-DXYZ]&quot;.
</li>
<li> A list of words contained within curly brackets
(&quot;{}&quot;) defines one or more acceptable values. The values
must be separated by commas.
</li>
</ul>

</li>
<li> The <i>pathlen</i> parameter defines the maximum length of
inpath. If the user adds too many extensions or the path otherwise
grows too long, an error alert will appear.
</li>
<li> Upon successful return, files can contain up to sels filenames.
Each name in the list is followed by a NULL character (ASCII 0) and
the last filename is followed by a final NULL. The exception to this
rule is when sels is one, in which case the final NULL is not used;
For all other cases, the area pointed to by files must be at least (13
* sels)+1 bytes long.
</li>
</ul>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> 0 = Ein Fehler ist aufgetreten.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Die Funktion steht nur unter Geneva zur Verfügung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Dateiauswahl">Dateiauswahl</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20x_fsel_input">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20x_fsel_input">8.4.4.1 Bindings für x_fsel_input</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#x_fsel_input">x_fsel_input</a>( int8_t *inpath, int16_t pathlen, int8_t
*files, int16_t sels, int16_t *exbutton, int8_t *label );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#x_fsel_input">x_fsel_input</a>( int8_t *inpath, int16_t pathlen, int8_t
*files, int16_t sels, int16_t *exbutton, int8_t *label )
{
   int_in[0] = pathlen;
   int_in[1] = sels;

   addr_in[0] = inpath;
   addr_in[1] = files;
   addr_in[2] = label;

   <a href="aes_fundamentals.html#crys_if">crys_if</a>(28960);

   *exbutton = int_out[1];

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">28960 # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">3     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">pathlen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">sels</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">inpath</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">files</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">label</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">exbutton</td>
</tr>
</table>
</div>


</td></tr>
</table>

<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_FOOT" href="appl.html"><img src="udo_lf.gif" alt="Applikationsfunktionen" title="Applikationsfunktionen" border="0" width="24" height="24">Applikationsfunktionen</a>
<a name="UDO_nav_rg_FOOT" href="pdlg.html"><img src="udo_rg.gif" alt="Druckdialoge" title="Druckdialoge" border="0" width="24" height="24">Druckdialoge</a>
</body>
</html>
