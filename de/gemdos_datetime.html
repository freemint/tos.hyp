<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 02.08.2025 -->
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Datum und Uhrzeit
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="gemdos_main.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24">GEMDOS</a>
<a name="UDO_nav_lf_HEAD" href="gemdos_file.html"><img src="udo_lf.gif" alt="Dateifunktionen" title="Dateifunktionen" border="0" width="24" height="24">Dateifunktionen</a>
<a name="UDO_nav_rg_HEAD" href="gemdos_process.html"><img src="udo_rg.gif" alt="Prozessfunktionen" title="Prozessfunktionen" border="0" width="24" height="24">Prozessfunktionen</a>

<hr>

<h1><a name="Datum_20und_20Uhrzeit">5.10 Datum und Uhrzeit</a></h1>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Tadjtime">Tadjtime</a>&nbsp;&nbsp;</td>
<td valign="top"> Zeit synchronisieren.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Talarm">Talarm</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> Weckfunktion.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Tgetdate">Tgetdate</a>&nbsp;&nbsp;</td>
<td valign="top"> Datum ermitteln.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Tgettime">Tgettime</a>&nbsp;&nbsp;</td>
<td valign="top"> Uhrzeit ermitteln.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Tgettimeofday">Tgettimeofday</a></td>
<td valign="top"> interrogates the state of the internal, high resolution system
clock.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Tmalarm">Tmalarm</a>&nbsp;&nbsp;&nbsp;</td>
<td valign="top"> reads/sets a process alarm for the current process.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Tsetdate">Tsetdate</a>&nbsp;&nbsp;</td>
<td valign="top"> Datum einstellen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Tsetitimer">Tsetitimer</a></td>
<td valign="top"> Steuerung eines periodischen Timers.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Tsettime">Tsettime</a>&nbsp;&nbsp;</td>
<td valign="top"> Uhrzeit einstellen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#Tsettimeofday">Tsettimeofday</a></td>
<td valign="top"> sets the state of the internal, high resolution system clock.

</td></tr>
</table>

<p>Querverweis: <a href="xbios_datetime.html">Datum und Zeit im XBIOS</a>
</p>
<h3><a name="Tadjtime">5.10.1 Tadjtime</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Adjust time« - correct the time to synchronize the system
clock.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Opcode:</td>
<td valign="top"> 343 (0x157)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Syntax:</td>
<td valign="top"> int Tadjtime ( const struct <a href="gemdos_structures.html#timeval">timeval</a> *delta, struct <a href="gemdos_structures.html#timeval">timeval</a>
*olddelta );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Description:</td>
<td valign="top"> The Tadjtime() function gradually adjusts the system clock (as
returned by <a href="#Tgettimeofday">Tgettimeofday</a>). The amount of time by which the clock is
to be adjusted is specified in the structure pointed to by delta.
<br>&nbsp;
<br>If the adjustment in delta is positive, then the system clock is
speeded up by some small percentage (i.e., by adding a small amount of
time to the clock value in each second) until the adjustment has been
completed. If the adjustment in delta is negative, then the clock is
slowed down in a similar fashion.
<br>&nbsp;
<br>If a clock adjustment from an earlier Tadjtime() call is already
in progress at the time of a later Tadjtime() call, and delta is not
NULL for the later call, then the earlier adjustment is stopped, but
any already completed part of that adjustment is not undone.
<br>&nbsp;
<br>If olddelta is not NULL, then the buffer that it points to is
used to return the amount of time remaining from any previous
adjustment that has not yet been completed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="VT_52_terminal.html#Return">Return</a> value:</td>
<td valign="top"> A return value 0 if the setting was successful, otherwise a
negative error code is returned.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Notes:</td>
<td valign="top"> The adjustment that Tadjtime() makes to the clock is carried
out in such a manner that the clock is always monotonically
increasing. Using Tadjtime() to adjust the time prevents the problems
that can be caused for certain applications (e.g., make(1)) by abrupt
positive or negative jumps in the system time.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Availability:</td>
<td valign="top"> This function is available as of FreeMiNT 1.16.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Group:</td>
<td valign="top"> Date and Time
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">See also:</td>
<td valign="top"> <a href="#Bindings_20for_20Tadjtime">Binding</a> &nbsp; <a href="#Tsetdate">Tsetdate</a> &nbsp; <a href="#Tsettime">Tsettime</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20for_20Tadjtime">5.10.1.1 Bindings for Tadjtime</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int <a href="#Tadjtime">Tadjtime</a> ( const struct <a href="gemdos_structures.html#timeval">timeval</a> *delta, struct <a href="gemdos_structures.html#timeval">timeval</a>
*olddelta );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    olddelta,-(sp)   ; Offset 6
move.l    delta,-(sp)  ; Offset 2
move.w    #343,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a>
lea       10(sp),sp    ; Correct stack
</pre>

</td></tr>
</table>

<h3><a name="Talarm">5.10.2 Talarm</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Talarm« - Lesen/setzen eines Alarms für den aktuellen
Prozess.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 288 (0x0120)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Talarm ( int32_t time );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion sendet dem aufrufenden Prozess nach <i>time</i>
Sekunden ein <a href="gemdos_signals.html#SIGALRM">SIGALRM</a>-Signal.
<br>&nbsp;
<br>Falls für dieses Signal kein Signal-Handler per <a href="gemdos_process.html#Psignal">Psignal</a>
installiert wurde, wird der Prozess sofort (d.h. beim Eintreffen des
Signals) terminiert.
<br>&nbsp;
<br>Durch einen Wert von <i>time</i> = 0, kann ein früher
gesetzter Alarm storniert werden. Ist <i>time</i> negativ, so hat die
Funktion keine Auswirkungen und lediglich der Rückgabewert wird
geliefert.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert die Zeit bis zum Eintreffen des
SIGALRM-Signals (wenn ein Alarm aktiviert wurde) in Sekunden zurück,
und anderenfalls den Wert 0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Seit der ersten in MultiTOS integrierten MiNT Version 1.04.
<br>&nbsp;
<br>Diese Funktion wurde mit MiNT Version 0.8pl8 eingeführt, aber
für Versionen vor 1.12 enthält der Code einen Fehler, der die
Funktionalität beeinträchtigt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Talarm">Binding</a> &nbsp; <a href="#Tmalarm">Tmalarm</a> &nbsp; <a href="gemdos_process.html#Pause">Pause</a> &nbsp; <a href="gemdos_process.html#Psignal">Psignal</a> &nbsp; <a href="gemdos_signals.html">Signale</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Talarm">5.10.2.1 Bindings für Talarm</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Talarm">Talarm</a> ( int32_t time );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    time,-(sp)   ; Offset 2
move.w    #288,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Tgetdate">5.10.3 Tgetdate</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »get date« - Tagesdatum ermitteln.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 42
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> uint16_t Tgetdate ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Tgetdate ermittelt das aktuelle Tagesdatum.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert als Ergebnis eine uint32_t-Zahl mit dem
Tagesdatum. Das Datum ist wie folgt codiert:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Bits</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0-4</td>
<td valign="top"> Tag (1-31)
</td></tr>

<tr><td nowrap="nowrap" valign="top">5-8</td>
<td valign="top"> Monat (1-12)
</td></tr>

<tr><td nowrap="nowrap" valign="top">9-15</td>
<td valign="top"> Jahr (0-119, 0= 1980)

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tgetdate">Binding</a> &nbsp; <a href="#Tsetdate">Tsetdate</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tgetdate">5.10.3.1 Bindings für Tgetdate</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> uint16_t <a href="#Tgetdate">Tgetdate</a> ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    #42,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #2,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Tgettime">5.10.4 Tgettime</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »get time« - ermittelt die Uhrzeit.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 44
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> uint16_t Tgettime ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Tgettime ermittelt die Uhrzeit.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert als Ergebnis die Uhrzeit. Sie ist wie
folgt codiert:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Bits</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0-4</td>
<td valign="top"> Sekunden im Zweierschritt (0-29)
</td></tr>

<tr><td nowrap="nowrap" valign="top">5-10</td>
<td valign="top"> Minuten (0-59)
</td></tr>

<tr><td nowrap="nowrap" valign="top">11-15</td>
<td valign="top"> Stunden (0-23)

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle GEMDOS Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tgettime">Binding</a> &nbsp; <a href="#Tsettime">Tsettime</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tgettime">5.10.4.1 Bindings für Tgettime</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> uint16_t <a href="#Tgettime">Tgettime</a> ( void );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    #44,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #2,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Tgettimeofday">5.10.5 Tgettimeofday</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Tgettimeofday« - erfragt den Status der internen,
hochauflösenden Systemzeit.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 341 (0x0155)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Tgettimeofday ( <a href="gemdos_structures.html#timeval">timeval</a> *tv, <a href="gemdos_structures.html#timezone">timezone</a> *tzp );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Diese Funktion erfragt den Status der internen,
hochauflösenden Systemzeit.
<br>&nbsp;
<br>Das Argument <i>tv</i> ist ein Zeiger auf eine <a href="gemdos_structures.html#timeval">timeval</a>
Struktur.
<br>&nbsp;
<br>Das Argument <i>tzp</i> ist ein Zeiger auf eine <a href="gemdos_structures.html#timezone">timezone</a>
Struktur.
<br>&nbsp;
<br>Es kann für jeden der beiden Argumente NULL übergeben werden.
Dies wird nicht als Fehler angesehen.
<br>&nbsp;
<br>Entwickler von Bibliotheken sollten beachten, daß die
Definition der Struktur timezone nicht konform zu der anderer Strukturen
ist. Die Member sind vom Datentyp int und nicht long (Dies trifft nur
für die Struktur timezone zu, die Member der Struktur timeval sind vom
Datentyp long). 16-Bit Bibliotheken müssen den Inhalt der Struktur,
auf die tzp zeigt, kopieren.
<br>&nbsp;
<br>Der <a href="gemdos_system.html#Ssystem">Ssystem</a>() Aufruf hat ein Kommando S_CLOCKMODE. Dieses
Kommando erlaubt es, den Modus des Kernel Zeitgebers zu setzen oder
anzufragen. Z.B. festzulegen, ob die Hardware Uhr UTC oder die local
time anzeigt.
<br>Es ist geplant, MiNT kompatibel zu dem kernel time keeping model
aus der RFC1305 zu machen. Dieses Modell wurde erfolgreich in
Betriebssystemen wie SunOS, Ultrix, OSF/1, HP-UX und Linux umgesetzt.
Es ist zu erwarten, daß sich die interen Realsierung in Zukunft
ändert.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Der Aufruf kann nicht fehlschlagen, es wird immer <a href="gemdos_errors.html#E_OK">E_OK</a>
zurückgeliefert.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Verfügbar, wenn ein MiNT Kernel mit einer Versionsnummer von
mindestens 1.15.0 erkannt wird.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tgettimeofday">Binding</a> &nbsp; <a href="gemdos_system.html#Ssystem">Ssystem</a> &nbsp; <a href="#Tsettimeofday">Tsettimeofday</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tgettimeofday">5.10.5.1 Bindings für Tgettimeofday</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Tgettimeofday">Tgettimeofday</a> ( <a href="gemdos_structures.html#timeval">timeval</a> *tv, <a href="gemdos_structures.html#timezone">timezone</a> *tzp );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       tzp          ; Offset 6
pea       tv           ; Offset 2
move.w    #341,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $0a(sp),sp   ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Tmalarm">5.10.6 Tmalarm</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Tmalarm« - interrogates the state of the internal, high
resolution system clock.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 317 (0x013d)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Tmalarm( int32_t time );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> This function reads/sets a process alarm for the current
process.
<br>&nbsp;
<br><i>time</i> specifies the length of time (in milliseconds) to
wait before a <a href="gemdos_signals.html#SIGALRM">SIGALRM</a> signal is delivered. If time is 0 then any
previously set alarm is cancelled. If time is negative the function
does not modify any alarm currently set.
<br>&nbsp;
<br>If no SIGALRM signal handler has been set up when the alarm is
triggered, the process will be killed.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Returns 0 if no alarm was scheduled prior to this call or the
amount of time remaining (in milliseconds) before the alarm is
triggered.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Available when a 'MiNT' cookie with a version of at least 1.10
exists.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tmalarm">Binding</a> &nbsp; <a href="#Talarm">Talarm</a> &nbsp; <a href="gemdos_process.html#Pause">Pause</a> &nbsp; <a href="gemdos_process.html#Psignal">Psignal</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tmalarm">5.10.6.1 Bindings für Tmalarm</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Tmalarm">Tmalarm</a>( int32_t time );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    time,-(sp)   ; Offset 2
move.w    #341,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #6,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Tsetdate">5.10.7 Tsetdate</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »set date« - Tagesdatum setzen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 43
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Tsetdate ( uint16_t date );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Tsetdate setzt das aktuelle Tagesdatum. Der
Parameter <i>date</i> ist wie folgt codiert:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Bits</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0-4</td>
<td valign="top"> Tag (1-31)
</td></tr>

<tr><td nowrap="nowrap" valign="top">5-8</td>
<td valign="top"> Monat (1-12)
</td></tr>

<tr><td nowrap="nowrap" valign="top">9-15</td>
<td valign="top"> Jahr (0-119, 0= 1980)

</td></tr>
</table>

<br><b>Hinweis:</b> Ab dem Blitter-<a href="tos_main.html">TOS</a> wird das Datum auch in der
jeweils vorhandenen Hardware-Uhr gesetzt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Ein Rückgabewert von -1 kennzeichnet ein ungültiges Format
des Datums.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle <a href="gemdos_main.html">GEMDOS</a> Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tsetdate">Binding</a> &nbsp; <a href="#Tgetdate">Tgetdate</a> &nbsp; <a href="#Tadjtime">Tadjtime</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tsetdate">5.10.7.1 Bindings für Tsetdate</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Tsetdate">Tsetdate</a> ( uint16_t date );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    date,-(sp)   ; Offset 2
move.w    #43,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #4,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Tsetitimer">5.10.8 Tsetitimer</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Tsetitimer« - steuert einen periodischen Timer.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 329 (0x0149)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Tsetitimer ( int16_t which, int32_t *interval, int32_t
*value, int32_t *ointerval, int32_t *ovalue );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Tsetitimer steuert einen von insgesamt drei
möglichen periodischen Timern. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">which</td>
<td valign="top"> gewünschter Timer
<table class="UDO_env_xlist">
<a name="ITIMER_REAL"></a>
<tr><td nowrap="nowrap" valign="top">0 =</td>
<td valign="top"> Dieser Timer arbeitet in Echtzeit, und sendet nach Ablauf das
Signal <a href="gemdos_signals.html#SIGALRM">SIGALRM</a>.
<a name="ITIMER_VIRTUAL"></a>
</td></tr>

<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> Dieser Timer arbeitet in 'virtueller Prozess-Zeit', und sendet
nach Ablauf das Signal <a href="gemdos_signals.html#SIGVTALRM">SIGVTALRM</a>. Der Timer läuft in diesem Fall nur,
wenn der Prozess, welcher den Timer steuert, aktuell die CPU besitzt.
<a name="ITIMER_PROF"></a>
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top"> Dieser Timer arbeitet sowohl in 'virtueller Prozess-Zeit' als
auch dann, wenn das Betriebssystem selbst aktiv ist. Nach Ablauf des
Timers wird das Signal <a href="gemdos_signals.html#SIGPROF">SIGPROF</a> gesendet.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">interval</td>
<td valign="top"> Adresse eines Long-Wertes, welcher den Wert enthält, auf den
der Timer nach Ablauf gesetzt werden soll. Ein NULL-Zeiger bedeutet,
daß der entsprechende alte Wert nicht verändert werden soll. Falls
der int32_t-Wert den Wert 0 besitzt, wird der Timer nach seinem Ablauf
deaktiviert.
</td></tr>

<tr><td nowrap="nowrap" valign="top">value</td>
<td valign="top"> Adresse eines Long-Wertes, welcher den Initialwert des Timers
in Millisekunden beschreibt. Ein NULL-Zeiger läßt den aktuellen
Timer unangetastet. Falls der int32_t-Wert den Wert 0 besitzt, wird
der Timer deaktiviert.
</td></tr>

<tr><td nowrap="nowrap" valign="top">ointerval</td>
<td valign="top"> Adresse eines Long-Wertes, welcher das aktuelle Intervall des
Timers aufnimmt, bzw. NULL, wenn dieser Wert nicht von Interesse ist.
</td></tr>

<tr><td nowrap="nowrap" valign="top">ovalue</td>
<td valign="top"> Adresse eines Long-Wertes, welcher den aktuellen Wert des
Timers aufnimmt oder NULL, wenn dieser Wert nicht von Interesse ist.

</td></tr>
</table>

<br>Da alle internen Berechnungen in Millisekunden gemessen werden,
ist es nicht möglich einen Timer auf beliebige (sehr große,
zukünftige) Werte zu setzen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert bei korrekter Ausführung 0, und im
Fehlerfall einen negativen Wert zurück.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Diese Funktion ist optional, daher darf ein Aufruf mit <a href="gemdos_errors.html#EINVFN">EINVFN</a>
beantwortet werden. Sie ist verfügbar, wenn 'MiNT' Cookie mit einer
Versionsnummer von mindestens 1.11 existiert.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tsetitimer">Binding</a> &nbsp; <a href="gemdos_process.html#Pause">Pause</a> &nbsp; <a href="gemdos_process.html#Psignal">Psignal</a> &nbsp; <a href="#Talarm">Talarm</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tsetitimer">5.10.8.1 Bindings für Tsetitimer</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Tsetitimer">Tsetitimer</a> ( int16_t which, int32_t *interval, int32_t
*value, int32_t *ointerval, int32_t *ovalue );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.l    ovalue,-(sp)    ; Offset 16
move.l    ointerval,-(sp) ; Offset 12
move.l    value,-(sp)     ; Offset  8
move.l    interval,-(sp)  ; Offset  4
move.w    which,-(sp)     ; Offset  2
move.w    #329,-(sp)      ; Offset  0
trap      #1              ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       20(sp),sp       ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Tsettime">5.10.9 Tsettime</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »set time« - setzt die Uhrzeit.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 45
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t Tsettime ( uint16_t time );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die <a href="gemdos_main.html">GEMDOS</a>-Routine Tsettime setzt die Uhrzeit. Der Parameter
<i>time</i> muß wie folgt codiert werden:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Bits</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">0-4</td>
<td valign="top"> Sekunden im Zweierschritt (0-29)
</td></tr>

<tr><td nowrap="nowrap" valign="top">5-10</td>
<td valign="top"> Minuten (0-59)
</td></tr>

<tr><td nowrap="nowrap" valign="top">11-15</td>
<td valign="top"> Stunden (0-23)

</td></tr>
</table>

<br><b>Hinweis:</b> Ab dem Blitter-<a href="tos_main.html">TOS</a> 1.02 wird die Zeit auch in
der jeweils vorhandenen Hardware-Uhr gesetzt.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Ein Rückgabewert von -1 kennzeichnet ein ungültiges
Zeitformat.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Alle GEMDOS Versionen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tsettime">Binding</a> &nbsp; <a href="#Tgettime">Tgettime</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tsettime">5.10.9.1 Bindings für Tsettime</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Tsettime">Tsettime</a> ( uint16_t time );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>move.w    time,-(sp)   ; Offset 2
move.w    #45,-(sp)    ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
addq.l    #4,sp        ; Stack korrigieren
</pre>

</td></tr>
</table>

<h3><a name="Tsettimeofday">5.10.10 Tsettimeofday</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »Tsettimeofday« - sets the state of the internal, high
resolution system clock.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gemdosnummer:</td>
<td valign="top"> 342 (0x0156)
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int32_t Tsettimeofday ( <a href="gemdos_structures.html#timeval">timeval</a> *tv, <a href="gemdos_structures.html#timezone">timezone</a> *tzp );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> This function sets the state of the internal, high resolution
system clock.
<br>&nbsp;
<br>The argument <i>tv</i> is a pointer to the <a href="gemdos_structures.html#timeval">timeval</a> structure.
<br>&nbsp;
<br>The argument <i>tzp</i> is a pointer to the <a href="gemdos_structures.html#timezone">timezone</a> structure.
<br>&nbsp;
<br>You may safely pass NULL for either argument. This isn't
considered an error.
<br>&nbsp;
<br>Implementors of library bindings should be aware that the
definition of struct timezone is non-standard. The members are actually
int and not long int (this applies only to struct timezone; the members
of struct timeval are always long). 16-bit libraries will have to copy
the contents of the structure that tzp points to.
<br>&nbsp;
<br>The tz_dsttime member of timezone is stored, but not evaluated
within the kernel. Beware not to misunderstand its meaning: if
non-zero it simply signifies that daylight savings time apply during
some part of the year, not necessarily now. In other words: if it is
non-zero someday, it should be non-zero during the entire year. The
<a href="gemdos_system.html#Ssystem">Ssystem</a>() call has a command S_CLOCKMODE. This command allows to
retrieve or set the kernel clock mode, i.e. to specify whether the
hardware clock is meant to run in UTC or in local time.
<br>It is planned to make MiNT compliant with the kernel time keeping
model described in RFC1305. This model is already successfully
implemented in operating systems such as SunOS, Ultrix, OSF/1, HP-UX
and Linux. Please expect the internal realization to change in the
future.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> The following error conditions are defined:
<br>&nbsp;
<br><a href="gemdos_errors.html#EPERM">EPERM</a> - an attempt was made by a user without super-user
privileges to change the system time or system time zone information.
<br>&nbsp;
<br><a href="gemdos_errors.html#EBADARG">EBADARG</a> - one of the arguments is out of range. Note that the
kernel time cannot be set to dates before Jan 1 1980 00:00:00 and
after some day in 2038 (yep, MAX_LONG seconds since the epoch).
Timezone offsets must be in the range of +/- 720 minutes.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Available when a MiNT kernel of a version at least 1.15.0
release is detected.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Datum_20und_20Uhrzeit">Datum und Uhrzeit</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20Tsettimeofday">Binding</a> &nbsp; <a href="gemdos_system.html#Ssystem">Ssystem</a> &nbsp; <a href="#Tgettimeofday">Tgettimeofday</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20Tsettimeofday">5.10.10.1 Bindings für Tsettimeofday</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int32_t <a href="#Tsettimeofday">Tsettimeofday</a> ( <a href="gemdos_structures.html#timeval">timeval</a> *tv, <a href="gemdos_structures.html#timezone">timezone</a> *tzp );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Assembler:</td>
<td valign="top">
<br>&nbsp;
<pre>pea       tzp          ; Offset 6
pea       tv           ; Offset 2
move.w    #342,-(sp)   ; Offset 0
trap      #1           ; <a href="gemdos_main.html">GEMDOS</a> aufrufen
lea       $0a(sp),sp   ; Stack korrigieren
</pre>

</td></tr>
</table>

<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="gemdos_main.html"><img src="udo_up.gif" alt="GEMDOS" title="GEMDOS" border="0" width="24" height="24">GEMDOS</a>
<a name="UDO_nav_lf_FOOT" href="gemdos_file.html"><img src="udo_lf.gif" alt="Dateifunktionen" title="Dateifunktionen" border="0" width="24" height="24">Dateifunktionen</a>
<a name="UDO_nav_rg_FOOT" href="gemdos_process.html"><img src="udo_rg.gif" alt="Prozessfunktionen" title="Prozessfunktionen" border="0" width="24" height="24">Prozessfunktionen</a>
</body>
</html>
