<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 02.08.2025 -->
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Fileselektoren
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_HEAD" href="wind.html"><img src="udo_lf.gif" alt="Fensterverwaltung" title="Fensterverwaltung" border="0" width="24" height="24">Fensterverwaltung</a>
<a name="UDO_nav_rg_HEAD" href="form.html"><img src="udo_rg.gif" alt="Formularfunktionen" title="Formularfunktionen" border="0" width="24" height="24">Formularfunktionen</a>

<hr>

<h1><a name="Fileselektoren">8.10 Fileselektoren</a></h1>
<p>Die folgenden Funktionen wurden mit <a href="magic.html">MagiC</a> 4 eingeführt, und
ermöglichen die Verwaltung der <a href="fsel.html">Dateiauswahl</a> (Fileselektor):
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_close">fslx_close</a></td>
<td valign="top"> Auswahl schließen und Speicher freigeben.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_do">fslx_do</a></td>
<td valign="top"> Schneller Aufruf des Fileselektors.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_evnt">fslx_evnt</a></td>
<td valign="top"> Auswahl zur Benutzung freigeben.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_getnxtfile">fslx_getnxtfile</a></td>
<td valign="top"> Alle weiteren selekt. Einträge ermitteln.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_open">fslx_open</a></td>
<td valign="top"> Auswahl initialisieren und öffnen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">&#x2022; <a href="#fslx_set_flags">fslx_set_flags</a></td>
<td valign="top"> Setzt bestimmte Flags für das ganze System.

</td></tr>
</table>

<p><b>Hinweis:</b> Die Existenz dieser Funktionen kann per <a href="appl.html#UDO__25apgi_7">appl_getinfo</a>
(Opcode 7) festgestellt werden.
</p>
<p>Der Hauptvorteil bei der Verwendung dieser Routinen ist darin zu
sehen, daß die hier angegebenen Funktionen auch mit alternativen
Dateisystemen (Stichwort: lange Dateinamen) zurechtkommen.
</p>
<p>Querverweis:
<br><a href="#Fileselektor_20als_20Dialog">Fileselektor als Dialog</a> &nbsp; <a href="#Fileselektor_20im_20Fenster">Fileselektor im Fenster</a> &nbsp; <a href="#Die_20Bedienung_20des_20File-Selektors_20ab_20MagiC_204">Bedienung der Dateiauswahl</a>
</p>
<h3><a name="fslx_close">8.10.1 fslx_close</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File SelectionX Close« - Auswahl schließen und Speicher
freigeben.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 191
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t fslx_close ( void *fsd );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion schließt die Dateiauswahl, und gibt den angegebenen
Deskriptor wieder frei. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fsd</td>
<td valign="top"> Deskriptor, der beim erfolgreichen Öffnen eines
Dateiauswahlfensters übergeben wurde

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert bei fehlerfreier Ausführung den Wert 1
zurück, anderenfalls den Wert 0.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Das Vorhandensein dieser Funktion kann per <a href="appl.html#UDO__25apgi_7">appl_getinfo</a> (Opcode 7)
festgestellt werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Fileselektoren">Fileselektoren</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20fslx_close">Binding</a> &nbsp; <a href="#fslx_open">fslx_open</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20fslx_close">8.10.1.1 Bindings für fslx_close</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fslx_close">fslx_close</a> ( void *fsd );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fslx_close">fslx_close</a> ( void *fsd )
{
   addr_in[0] = fsd;
   <a href="aes_fundamentals.html#crys_if">crys_if</a> (191);

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">191   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">1     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fsd</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_do">8.10.2 fslx_do</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File SelectionX Do« - schneller Aufruf des Fileselektors.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 194
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> void *fslx_do ( int8_t *title, int8_t *path, int16_t pathlen,
int8_t *fname, int16_t fnamelen, int8_t *patterns, <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a>
*filter, int8_t *paths, int16_t *sort_mode, int16_t flags, int16_t
*button, int16_t *nfiles, int8_t **pattern );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion stellt eine Dateiauswahlbox auf dem Bildschirm
dar, und übernimmt deren Bearbeitung. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">title</td>
<td valign="top"> Titel der Auswahl oder NULL
</td></tr>

<tr><td nowrap="nowrap" valign="top">path</td>
<td valign="top"> vollständiger Pfad, welcher mit dem Laufwerk beginnt, und mit
'\' endet.
</td></tr>

<tr><td nowrap="nowrap" valign="top">pathlen</td>
<td valign="top"> Länge des aufnehmenden Pfad-Puffers.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Puffer für den Dateinamen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fnamelen</td>
<td valign="top"> Länge des aufnehmenden Dateinamen-Puffers.
</td></tr>

<tr><td nowrap="nowrap" valign="top">patterns</td>
<td valign="top"> Dateinamensmuster wie &quot;*.TXT&quot;, &quot;*.PRG&quot; oder
&quot;*.IMG&quot;. Diese alternativ anwählbaren Muster sind durch EOS
getrennt und durch EOS, EOS abgeschlossen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">filter</td>
<td valign="top"> <b>Filterfunktion</b>, die vor dem Mustervergleich aufgerufen
wird (oder NULL). Gibt diese den Wert 0 zurück, so ist die Datei
ungültig; bei einem Wert von 1 wird der Dateiname angezeigt.
</td></tr>

<tr><td nowrap="nowrap" valign="top">paths</td>
<td valign="top"> Pfad-History. Die alternativ anwählbaren Pfade sind durch EOS
getrennt, und durch EOS, EOS abgeschlossen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">sort_mode</td>
<td valign="top"> <b>Sortiermodus für die Anzeige</b>
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">nach Namen</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">nach Datum</td>
</tr>
<tr>
  <td align="left" valign="top">2</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">nach Größe</td>
</tr>
<tr>
  <td align="left" valign="top">3</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">nach Typ</td>
</tr>
<tr>
  <td align="left" valign="top">4</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">unsortiert (physik. Reihenfolge)</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">flags</td>
<td valign="top"> <b>verschiedene Einstellungen</b>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> <a href="fslx.html#DOSMODE">DOSMODE</a>. Dies ist der Kompatibilitätsmodus, der auch von
fsel_(ex)input verwendet wird, und Dateinamen grundsätzlich im Format
8+3 liefert. Dazu werden alle Unterverzeichnisse per <a href="gemdos_directory.html#Dopendir">Dopendir</a> (name,
1) aufgerufen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top"> symbolische Links <i>nicht</i> verfolgen. In diesem Fall
gehören also Datum, Uhrzeit sowie die <a href="gemdos_structures.html#XATTR">XATTR</a>-Struktur, die filter
übergeben wird, zum Link selbst.
</td></tr>

<tr><td nowrap="nowrap" valign="top">8 =</td>
<td valign="top"> Mehrfachauswahl. In diesem Fall können mehrere Dateien auf
einmal ausgewählt und übergeben werden.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">button</td>
<td valign="top"> Nummer des ausgewählten Buttons
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">Abbruch-Button</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">Ok-Button</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">nfiles</td>
<td valign="top"> Anzahl der ausgewählten Dateien
</td></tr>

<tr><td nowrap="nowrap" valign="top">pattern</td>
<td valign="top"> ausgewähltes Dateinamensmuster wie &quot;*.TXT&quot;

</td></tr>
</table>

<br><b>Hinweis:</b> Die Funktion ist eine Kombination aus <a href="#fslx_open">fslx_open</a>
und <a href="#fslx_evnt">fslx_evnt</a>, benutzt aber eine Dialogbox ohne Fenster.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert einen Zeiger auf einen Deskriptor zurück,
der bei den anderen Routinen anzugeben ist.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Das Vorhandensein dieser Funktion kann per <a href="appl.html#UDO__25apgi_7">appl_getinfo</a> (Opcode 7)
festgestellt werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Fileselektoren">Fileselektoren</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20fslx_do">Binding</a> &nbsp; <a href="#fslx_open">fslx_open</a> &nbsp; <a href="#fslx_evnt">fslx_evnt</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20fslx_do">8.10.2.1 Bindings für fslx_do</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> void *<a href="#fslx_do">fslx_do</a> ( int8_t *title, int8_t *path, int16_t pathlen,
int8_t *fname, int16_t fnamelen, int8_t *patterns, <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a>
*filter, int8_t *paths, int16_t *sort_mode, int16_t flags, int16_t
*button, int16_t *nfiles, int8_t **pattern );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>void *<a href="#fslx_do">fslx_do</a> ( int8_t *title, int8_t *path, int16_t pathlen,
                int8_t *fname, int16_t fnamelen,
                int8_t *patterns,
                <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a> *filter, int8_t *paths,
                int16_t *sort_mode, int16_t flags,
                int16_t *button,
                int16_t *nfiles, int8_t **pattern )
{
   addr_in[0] = title;
   addr_in[1] = path;
   addr_in[2] = fname;
   addr_in[3] = patterns;
   addr_in[4] = filter;
   addr_in[5] = paths;

   int_in[0] = pathlen;
   int_in[1] = fnamelen;
   int_in[2] = *sort_mode;
   int_in[3] = flags;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (194);

   *button    = int_out[1];
   *nfiles    = int_out[2];
   *sort_mode = int_out[3];
   *pattern   = addr_out[1];

   return ( (void *) addr_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">194   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">4     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">4     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">6     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">2     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">title</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">path</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">fname</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+12</td>
  <td align="left" valign="top">addr_in[3]</td>
  <td align="left" valign="top">patterns</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+16</td>
  <td align="left" valign="top">addr_in[4]</td>
  <td align="left" valign="top">filter</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+20</td>
  <td align="left" valign="top">addr_in[5]</td>
  <td align="left" valign="top">paths</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">pathlen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">fnamelen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">sort_mode</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+6</td>
  <td align="left" valign="top">int_in[3]</td>
  <td align="left" valign="top">flags</td>
</tr>
<tr>
  <td align="left" valign="top">addr_out</td>
  <td align="left" valign="top">addr_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
<tr>
  <td align="left" valign="top">addr_out+4</td>
  <td align="left" valign="top">addr_out[1]</td>
  <td align="left" valign="top">pattern</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">1</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">button</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+4</td>
  <td align="left" valign="top">int_out[2]</td>
  <td align="left" valign="top">nfiles</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+6</td>
  <td align="left" valign="top">int_out[3]</td>
  <td align="left" valign="top">sort_mode</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_evnt">8.10.3 fslx_evnt</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File SelectionX Event« - übernimmt die Bearbeitung der
Dateiauswahl.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 193
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t fslx_evnt ( void *fsd, <a href="aes_structures.html#EVNT">EVNT</a> *events, int8_t *path,
int8_t *fname, int16_t *button, int16_t *nfiles, int16_t *sort_mode,
int8_t **pattern );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion übernimmt die Bearbeitung einer auf dem
Bildschirm dargestellten Dateiauswahl. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fsd</td>
<td valign="top"> Deskriptor, der beim Öffnen der Auswahl zurückgeliefert
wurde.
</td></tr>

<tr><td nowrap="nowrap" valign="top">events</td>
<td valign="top"> <a href="aes_structures.html#EVNT">EVNT</a>-Struktur. Die Ereignisse werden von der Auswahl
bearbeitet, wenn sie für das entsprechende Fenster bestimmt sind.
</td></tr>

<tr><td nowrap="nowrap" valign="top">path</td>
<td valign="top"> Zeiger auf den ausgewählten Pfad.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Zeiger auf den ausgewählten Dateipfad.
</td></tr>

<tr><td nowrap="nowrap" valign="top">button</td>
<td valign="top"> Nummer des ausgewählten Buttons
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">0</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">Abbruch-Button</td>
</tr>
<tr>
  <td align="left" valign="top">1</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">Ok-Button</td>
</tr>
</table>
</div>

</td></tr>

<tr><td nowrap="nowrap" valign="top">nfiles</td>
<td valign="top"> Anzahl der ausgewählten Dateien.
</td></tr>

<tr><td nowrap="nowrap" valign="top">sort_mode</td>
<td valign="top"> ausgewählter Sortiermodus.
</td></tr>

<tr><td nowrap="nowrap" valign="top">pattern</td>
<td valign="top"> ausgewähltes Dateinamensmuster wie &quot;*.TXT&quot;

</td></tr>
</table>

<br><b>Hinweis:</b> Ereignisse werden zunächst an die Dateiauswahl
übermittelt, und von dieser dann ggfs. verarbeitet. Sobald ein
Ereignis bearbeitet wurde, wird das entsprechende Bit in der
<a href="aes_structures.html#EVNT">EVNT</a>-Struktur gelöscht.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert den Wert 0, wenn der Dialog beendet werden
soll und anderenfalls den Wert 1.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Das Vorhandensein dieser Funktion kann per <a href="appl.html#UDO__25apgi_7">appl_getinfo</a> (Opcode 7)
festgestellt werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Fileselektoren">Fileselektoren</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20fslx_evnt">Binding</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20fslx_evnt">8.10.3.1 Bindings für fslx_evnt</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fslx_evnt">fslx_evnt</a> ( void *fsd, <a href="aes_structures.html#EVNT">EVNT</a> *events, int8_t *path,
int8_t *fname, int16_t *button, int16_t *nfiles, int16_t *sort_mode,
int8_t **pattern );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fslx_evnt">fslx_evnt</a> ( void *fsd, <a href="aes_structures.html#EVNT">EVNT</a> *events, int8_t *path,
                    int8_t *fname, int16_t *button,
                    int16_t *nfiles,
                    int16_t *sort_mode, int8_t **pattern )
{
   addr_in[0] = fsd;
   addr_in[1] = events;
   addr_in[2] = path;
   addr_in[3] = fname;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (193);

   *button    = int_out[1];
   *nfiles    = int_out[2];
   *sort_mode = int_out[3];
   *pattern   = addr_out[0];

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">193   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">4     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">4     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">1     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fsd</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">events</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">path</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+12</td>
  <td align="left" valign="top">addr_in[3]</td>
  <td align="left" valign="top">fname</td>
</tr>
<tr>
  <td align="left" valign="top">addr_out</td>
  <td align="left" valign="top">addr_out[0]</td>
  <td align="left" valign="top">pattern</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">button</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+4</td>
  <td align="left" valign="top">int_out[2]</td>
  <td align="left" valign="top">nfiles</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+6</td>
  <td align="left" valign="top">int_out[3]</td>
  <td align="left" valign="top">sort_mode</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_getnxtfile">8.10.4 fslx_getnxtfile</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File SelectionX GetNextFile« - ermittelt alle weiteren
selektierten Einträge der Dateiauswahl.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 192
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t fslx_getnxtfile ( void *fsd, int8_t *fname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion ermittelt alle weiteren, selektierten Einträge
der Dateiauswahl. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">fsd</td>
<td valign="top"> Deskriptor, der beim Öffnen der Auswahl zurückgeliefert wurde
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Name des ermittelten Eintrags

</td></tr>
</table>

<br><b>Hinweis:</b> Wurde das Flag <a href="fslx.html#GETMULTI">GETMULTI</a> bei <a href="#fslx_do">fslx_do</a> oder
<a href="#fslx_open">fslx_open</a> übergeben, wird durch fslx_do bzw. <a href="#fslx_evnt">fslx_evnt</a> im Parameter
<i>nfiles</i> die Anzahl der Dateien zurückgegeben, die zusätzlich
zu dem in <i>fname</i> zurückgegebenen noch selektiert sind. Man
kann die weiteren Dateien mit fslx_getnxtfile abrufen. Erst danach
darf man <a href="#fslx_close">fslx_close</a> aufrufen.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert den Wert 0, wenn keine weitere Datei
ausgewählt ist, bzw. den Wert 1, falls noch ein Dateiname kopiert
wurde.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Das Vorhandensein dieser Funktion kann per <a href="appl.html#UDO__25apgi_7">appl_getinfo</a> (Opcode 7)
festgestellt werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Fileselektoren">Fileselektoren</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20fslx_getnxtfile">Binding</a> &nbsp; <a href="#fslx_open">fslx_open</a> &nbsp; <a href="#fslx_close">fslx_close</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20fslx_getnxtfile">8.10.4.1 Bindings für fslx_getnxtfile</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fslx_getnxtfile">fslx_getnxtfile</a> ( void *fsd, int8_t *fname );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fslx_getnxtfile">fslx_getnxtfile</a> ( void *fsd, int8_t *fname )
{
   addr_in[0] = fsd;
   addr_in[1] = fname;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (192);

   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">192   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">0     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">2     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">fsd</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">fname</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_open">8.10.5 fslx_open</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File SelectionX Open« - initialisiert und öffnet die
Dateiauswahl.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 190
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> void *fslx_open ( int8_t *title, int16_t x, int16_t y, int16_t
*whdl, int8_t *path, int16_t pathlen, int8_t *fname, int16_t fnamelen,
int8_t *patterns, <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a> *filter, int8_t *paths, int16_t
sort_mode, int16_t flags );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion initialisiert und öffnet die Dateiauswahlbox. Es
gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">title</td>
<td valign="top"> Fenstertitel der Auswahl oder NULL
</td></tr>

<tr><td nowrap="nowrap" valign="top">x</td>
<td valign="top"> x-Koordinate
</td></tr>

<tr><td nowrap="nowrap" valign="top">y</td>
<td valign="top"> y-Koordinate der linken oberen Ecke des Fensters. Falls diese
den Wert -1 besitzen, so wird das Fenster zentriert dargestellt.
</td></tr>

<tr><td nowrap="nowrap" valign="top">whdl</td>
<td valign="top"> Fensterkennung nach erfolgreichem Öffnen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">path</td>
<td valign="top"> vollständiger Pfad, welcher mit dem Laufwerk beginnt, und mit
'\' endet.
<br>Seit <a href="magic.html">MagiC</a> 6.10 darf der Pfad, wie bei fsel_xxx(), unvollständig
initialisiert werden, z.B. als Leer-String. <a href="magic.html">MagiC</a> komplettiert dann
den Pfad sinnvoll.
</td></tr>

<tr><td nowrap="nowrap" valign="top">pathlen</td>
<td valign="top"> Länge des aufnehmenden Pfad-Puffers.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fname</td>
<td valign="top"> Puffer für den Dateinamen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">fnamelen</td>
<td valign="top"> Länge des aufnehmenden Dateinamen-Puffers.
</td></tr>

<tr><td nowrap="nowrap" valign="top">patterns</td>
<td valign="top"> Dateinamensmuster wie &quot;*.TXT&quot;, &quot;*.PRG&quot; oder
&quot;*.IMG&quot;. Diese alternativ anwählbaren Muster sind durch EOS
getrennt und durch EOS,EOS abgeschlossen.
<br>Seit <a href="magic.html">MagiC</a> 6.10 darf hier ein Nullzeiger übergeben werden, <a href="magic.html">MagiC</a>
verwendet dann &quot;*\0&quot;.
</td></tr>

<tr><td nowrap="nowrap" valign="top">filter</td>
<td valign="top"> <b>Filterfunktion</b>, die vor dem Mustervergleich aufgerufen
wird (oder NULL). Gibt diese den Wert 0 zurück, so ist die Datei
ungültig; bei einem Wert von 1 wird der Dateiname angezeigt.
</td></tr>

<tr><td nowrap="nowrap" valign="top">paths</td>
<td valign="top"> Pfad-History. Die alternativ anwählbaren Pfade sind durch EOS
getrennt, und durch EOS,EOS abgeschlossen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">sort_mode</td>
<td valign="top"> <b>Sortiermodus für die Anzeige</b>
<a name="SORTBYNAME"></a>
<a name="SORTBYDATE"></a>
<a name="SORTBYSIZE"></a>
<a name="SORTBYTYPE"></a>
<a name="SORTBYNONE"></a>
<a name="SORTDEFAULT"></a>
<br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">SORTBYNAME (0)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">nach Namen</td>
</tr>
<tr>
  <td align="left" valign="top">SORTBYDATE (1)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">nach Datum</td>
</tr>
<tr>
  <td align="left" valign="top">SORTBYSIZE (2)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">nach Größe</td>
</tr>
<tr>
  <td align="left" valign="top">SORTBYTYPE (3)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">nach Typ</td>
</tr>
<tr>
  <td align="left" valign="top">SORTBYNONE (4)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">unsortiert (physik. Reihenfolge)</td>
</tr>
<tr>
  <td align="left" valign="top">SORTDEFAULT (-1)</td>
  <td align="left" valign="top">=</td>
  <td align="left" valign="top">default</td>
</tr>
</table>
</div>

<br>SORTDEFAULT existiert seit <a href="magic.html">MagiC</a> 6.10 und bedeutet, daß der im
System gespeicherte Sortiermodus verwendet wird.
<a name="DOSMODE"></a>
<a name="NFOLLOWSLKS"></a>
<a name="GETMULTI"></a>
</td></tr>

<tr><td nowrap="nowrap" valign="top">flags</td>
<td valign="top"> <b>verschiedene Einstellungen</b>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> (DOSMODE) Dies ist der Kompatibilitätsmodus, der auch von
fsel_(ex)input verwendet wird, und Dateinamen grundsätzlich im Format
8+3 liefert. Dazu werden alle Unterverzeichnisse per <a href="gemdos_directory.html#Dopendir">Dopendir</a>
(DOPEN_COMPAT) aufgerufen.
</td></tr>

<tr><td nowrap="nowrap" valign="top">2 =</td>
<td valign="top"> (NFOLLOWSLKS) symbolische Links <i>nicht</i> verfolgen. In
diesem Fall gehören also Datum, Uhrzeit sowie die <a href="gemdos_structures.html#XATTR">XATTR</a>-Struktur, die
<i>filter</i> übergeben wird, zum Link selbst.
</td></tr>

<tr><td nowrap="nowrap" valign="top">8 =</td>
<td valign="top"> Ist GETMULTI gesetzt, können mehrere Dateien auf einmal
ausgewählt und übergeben werden. Dazu wird <a href="#fslx_getnxtfile">fslx_getnxtfile</a>
verwendet, wenn <a href="#fslx_evnt">fslx_evnt</a> bzw. <a href="#fslx_do">fslx_do</a> im Parameter <i>nfiles</i>
signalisieren, daß noch weitere Dateien selektiert sind.

</td></tr>
</table>


</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert einen Deskriptor für die weiteren
Aktionen, bzw. den Wert NULL, wenn ein Fehler aufgetreten ist.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Das Vorhandensein dieser Funktion kann per <a href="appl.html#UDO__25apgi_7">appl_getinfo</a> (Opcode 7)
festgestellt werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Fileselektoren">Fileselektoren</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20fslx_open">Binding</a> &nbsp; <a href="#fslx_close">fslx_close</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20fslx_open">8.10.5.1 Bindings für fslx_open</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> void *<a href="#fslx_open">fslx_open</a> ( int8_t *title, int16_t x, int16_t y, int16_t
*whdl, int8_t *path, int16_t pathlen, int8_t *fname, int16_t fnamelen,
int8_t *patterns, <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a> *filter, int8_t *paths, int16_t
sort_mode, int16_t flags );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>void *<a href="#fslx_open">fslx_open</a> ( int8_t *title, int16_t x, int16_t y,
                  int16_t *whdl, int8_t *path,
                  int16_t pathlen, int8_t *fname,
                  int16_t fnamelen, int8_t *patterns,
                  <a href="aes_structures.html#XFSL_FILTER">XFSL_FILTER</a> *filter, int8_t *paths,
                  int16_t sort_mode, int16_t flags )
{
   addr_in[0] = title;
   addr_in[1] = path;
   addr_in[2] = fname;
   addr_in[3] = patterns;
   addr_in[4] = filter;
   addr_in[5] = paths;

   int_in[0] = x;
   int_in[1] = y;
   int_in[2] = pathlen;
   int_in[3] = fnamelen;
   int_in[4] = sort_mode;
   int_in[5] = flags;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (190);

   *whdl = int_out[0];
   return ( (void *) addr_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">190   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">6     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">1     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">6     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">1     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in</td>
  <td align="left" valign="top">addr_in[0]</td>
  <td align="left" valign="top">title</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+4</td>
  <td align="left" valign="top">addr_in[1]</td>
  <td align="left" valign="top">path</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+8</td>
  <td align="left" valign="top">addr_in[2]</td>
  <td align="left" valign="top">fname</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+12</td>
  <td align="left" valign="top">addr_in[3]</td>
  <td align="left" valign="top">patterns</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+16</td>
  <td align="left" valign="top">addr_in[4]</td>
  <td align="left" valign="top">filter</td>
</tr>
<tr>
  <td align="left" valign="top">addr_in+20</td>
  <td align="left" valign="top">addr_in[5]</td>
  <td align="left" valign="top">paths</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">x</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">y</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+4</td>
  <td align="left" valign="top">int_in[2]</td>
  <td align="left" valign="top">pathlen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+6</td>
  <td align="left" valign="top">int_in[3]</td>
  <td align="left" valign="top">fnamelen</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+8</td>
  <td align="left" valign="top">int_in[4]</td>
  <td align="left" valign="top">sort_mode</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+10</td>
  <td align="left" valign="top">int_in[5]</td>
  <td align="left" valign="top">flags</td>
</tr>
<tr>
  <td align="left" valign="top">addr_out</td>
  <td align="left" valign="top">addr_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top">whdl</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="fslx_set_flags">8.10.6 fslx_set_flags</a></h3>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Name:</td>
<td valign="top"> »File SelectionX SetFlags« - setzt bestimmte Flags der
<a href="fsel.html">Dateiauswahl</a> für das ganze System.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="aes_main.html">AES</a>-Nummer:</td>
<td valign="top"> 195
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Deklaration:</td>
<td valign="top"> int16_t fslx_set_flags ( int16_t flags, int16_t *oldval );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Beschreibung:</td>
<td valign="top"> Die Funktion setzt bestimmte Flags der Dateiauswahlbox für das
ganze System. Es gilt:
<br>&nbsp;
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Parameter</td>
<td valign="top"> Bedeutung
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">flags</td>
<td valign="top"> verschiedene Flags
<table class="UDO_env_xlist">
<a name="SHOW8P3"></a>
<tr><td nowrap="nowrap" valign="top">1 =</td>
<td valign="top"> Format 8+3: Dies gilt nur für die Darstellung von
Verzeichnissen auf DOS-Laufwerken. Entspricht dem Schalter
&quot;<a href="tos_main.html">TOS</a>-Dateien als 8+3&quot; in MagXDesk.

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">oldval</td>
<td valign="top"> vorheriger Wert

</td></tr>
</table>

</td></tr>

<tr><td nowrap="nowrap" valign="top">Ergebnis:</td>
<td valign="top"> Die Funktion liefert im Fehlerfall den Wert 0, und den Wert 1
bei fehlerfreier Ausführung.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Verfügbar:</td>
<td valign="top"> Das Vorhandensein dieser Funktion kann per <a href="appl.html#UDO__25apgi_7">appl_getinfo</a> (Opcode 7)
festgestellt werden.
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Gruppe:</td>
<td valign="top"> <a href="#Fileselektoren">Fileselektoren</a>
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Querverweis:</td>
<td valign="top"> <a href="#Bindings_20f_C3_BCr_20fslx_set_flags">Binding</a> &nbsp; <a href="#fslx_open">fslx_open</a> &nbsp; <a href="#fslx_close">fslx_close</a>
<br>&nbsp;

</td></tr>
</table>

<h4><a name="Bindings_20f_C3_BCr_20fslx_set_flags">8.10.6.1 Bindings für fslx_set_flags</a></h4>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">C:</td>
<td valign="top"> int16_t <a href="#fslx_set_flags">fslx_set_flags</a> ( int16_t flags, int16_t *oldval );
<br>&nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Umsetzung:</td>
<td valign="top">
<br>&nbsp;
<pre>int16_t <a href="#fslx_set_flags">fslx_set_flags</a> ( int16_t flags, int16_t *oldval )
{
   int_in[0] = 0;
   int_in[1] = flags;

   <a href="aes_fundamentals.html#crys_if">crys_if</a> (195);

   *oldval = int_out[1];
   return ( int_out[0] );
}
</pre>
</td></tr>

<tr><td nowrap="nowrap" valign="top"><a href="gem_about.html">GEM</a>-Arrays:</td>
<td valign="top">
<br>&nbsp;
<br><br>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Adresse</td>
  <td align="left" valign="top">Feldelement</td>
  <td align="left" valign="top">Belegung</td>
</tr>
<tr>
  <td align="left" valign="top">control</td>
  <td align="left" valign="top">control[0]</td>
  <td align="left" valign="top">195   # Opcode der Funktion</td>
</tr>
<tr>
  <td align="left" valign="top">control+2</td>
  <td align="left" valign="top">control[1]</td>
  <td align="left" valign="top">2     # Einträge in int_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+4</td>
  <td align="left" valign="top">control[2]</td>
  <td align="left" valign="top">2     # Einträge in int_out</td>
</tr>
<tr>
  <td align="left" valign="top">control+6</td>
  <td align="left" valign="top">control[3]</td>
  <td align="left" valign="top">0     # Einträge in addr_in</td>
</tr>
<tr>
  <td align="left" valign="top">control+8</td>
  <td align="left" valign="top">control[4]</td>
  <td align="left" valign="top">0     # Einträge in addr_out</td>
</tr>
<tr>
  <td align="left" valign="top">int_in</td>
  <td align="left" valign="top">int_in[0]</td>
  <td align="left" valign="top">0</td>
</tr>
<tr>
  <td align="left" valign="top">int_in+2</td>
  <td align="left" valign="top">int_in[1]</td>
  <td align="left" valign="top">flags</td>
</tr>
<tr>
  <td align="left" valign="top">int_out</td>
  <td align="left" valign="top">int_out[0]</td>
  <td align="left" valign="top"><a href="VT_52_terminal.html#Return">Return</a>-Wert</td>
</tr>
<tr>
  <td align="left" valign="top">int_out+2</td>
  <td align="left" valign="top">int_out[1]</td>
  <td align="left" valign="top">oldval</td>
</tr>
</table>
</div>


</td></tr>
</table>

<h3><a name="Die_20Bedienung_20des_20File-Selektors_20ab_20MagiC_204">8.10.7 Die Bedienung des File-Selektors ab MagiC 4</a></h3>
<p><a href="magic.html">MagiC</a> stellt ab Version 4.0 eine eigene Dateiauswahlbox zur
Verfügung, die neben der Unterstützung von langen Dateinamen auch
einiges an Bedienungskomfort bietet, welcher sonst nur von
alternativen Selektoren bekannt war. Die folgende Tabelle gibt eine
Übersicht über die wichtigsten Shortcuts:
</p>
<table class="UDO_env_xlist">
<tr><td nowrap="nowrap" valign="top">Tasten-Kombination</td>
<td valign="top"> Funktion
</td></tr>

<tr><td nowrap="nowrap" valign="top">&nbsp;</td>
<td valign="top"> &nbsp;
</td></tr>

<tr><td nowrap="nowrap" valign="top">Return</td>
<td valign="top"> <b>Keine Datei ausgewählt:</b> Gibt den Text im Editfeld an
das Programm zurück.
<br><b>Datei ausgewählt:</b> Gibt ausgewählte Datei zurück.
<br><b>Ordner ausgewählt:</b> Öffnet den Ordner.
</td></tr>

<tr><td nowrap="nowrap" valign="top">Alt-A..Z</td>
<td valign="top"> Öffnet das jeweilige Laufwerk im aktuellen Verzeichnis.
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-Esc</td>
<td valign="top"> Verzeichnis neu einlesen
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-Backspace</td>
<td valign="top"> oder
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-H</td>
<td valign="top"> Geht eine Verzeichnisebene zurück.
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-D</td>
<td valign="top"> Deselektiert alle Einträge. Damit kann man erzwingen, daß der
eingegebene Dateiname statt der selektierten Datei zurückgegeben
wird.
</td></tr>

<tr><td nowrap="nowrap" valign="top">Cursor up,down</td>
<td valign="top"> Auswahl verschieben
</td></tr>

<tr><td nowrap="nowrap" valign="top">Ctrl-Cursor up,down</td>
<td valign="top"> scrollen
</td></tr>

<tr><td nowrap="nowrap" valign="top">Sh-Cursor up,down</td>
<td valign="top"> Auswahl seitenweise verschieben
</td></tr>

<tr><td nowrap="nowrap" valign="top">Sh-Ctrl-Cursor up,down</td>
<td valign="top"> seitenweise scrollen
</td></tr>

<tr><td nowrap="nowrap" valign="top">Home</td>
<td valign="top"> selektiert oberstes Element
</td></tr>

<tr><td nowrap="nowrap" valign="top">Sh-Home</td>
<td valign="top"> selektiert unterstes Element

</td></tr>
</table>

<p><b>Auch bei der Bedienung der Buttons gibt es einiges zu
beachten:</b> Ein Doppelklick auf das 'parent'-Feld geht zurück aufs
Wurzelverzeichnis. Ein Klick auf eine Zeile selektiert das
entsprechende Objekt. Für den Fall, daß mehrere Dateien auswählbar
sind (dies ist durch den Systemaufruf beeinflußbar), werden diese
durch Shift-Klick ausgewählt. In jedem Fall kann man eine Datei mit
Shift-Klick deselektieren.
</p>
<p><b>Zu beachten ist ferner:</b>
</p>
<ul>
<li><p> Lange Dateinamen werden nur dann zurückgegeben, wenn der
Aufrufer zuvor mit <a href="gemdos_process.html#Pdomain">Pdomain</a>(1) angekündigt hat, daß er damit auch
etwas anfangen kann.
<br>&nbsp;
</p></li>
<li><p> Bei Auswahl eines Ordners durch [Return] wird das Eingabefeld
gelöscht. Wenn nichts selektiert ist, selektiert &quot;Cursor
runter&quot; die erste Zeile, &quot;Cursor hoch&quot; die letzte.
<br>&nbsp;
</p></li>
<li><p> Bei den alten Aufrufen fsel_(ex)input() wird der eingestellte
Sortiermodus beim Booten auf &quot;nach Namen&quot; gesetzt und
später in einer globalen Variablen gemerkt, d.h. der letzte
eingestellte Sortiermodus wird bis zum nächsten Bootvorgang
gespeichert.
<br>&nbsp;
</p></li>
<li><p> Bei den alten Funktionen fsel_(ex)input() wird ggf. das Muster
&quot;*.*&quot; statt &quot;*&quot; zurückgegeben.
<br>&nbsp;
</p></li>
</ul>

<p>Querverweis: <a href="guidelines_styles.html#Tastaturbelegung">Tastaturbelegung</a>
</p>
<h3><a name="Fileselektor_20als_20Dialog">8.10.8 Fileselektor als Dialog</a></h3>
<pre>fsel = <a href="#fslx_do">fslx_do</a>(..., &amp;button, &amp;nfiles, ...);

if (fsel) /* war der Selektor offen? */
{
   if (button)
   {
      while (--nfiles) /* mehrere Files? */
         <a href="#fslx_getnxtfile">fslx_getnxtfile</a>(...);   /* alle abholen */
   }

   <a href="#fslx_close">fslx_close</a>(fsel); /* alles wieder freigeben */
}
</pre>
<h3><a name="Fileselektor_20im_20Fenster">8.10.9 Fileselektor im Fenster</a></h3>
<pre>fsel = <a href="#fslx_open">fslx_open</a>(...);
if (fsel)
{
   do {
      evnt.mwhich = <a href="evnt.html#evnt_multi">evnt_multi</a>(...);
      rv = <a href="#fslx_evnt">fslx_evnt</a>(fsel, &amp;evnt, ..., &amp;nfiles, ...);

      /* Bits für eigene Fenster/Menüs auswerten */
   } while (rv);

   while (--nfiles) <a href="#fslx_getnxtfile">fslx_getnxtfile</a>(...);
   <a href="#fslx_close">fslx_close</a>(fsel);
}
</pre>
<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="aes_main.html"><img src="udo_up.gif" alt="AES" title="AES" border="0" width="24" height="24">AES</a>
<a name="UDO_nav_lf_FOOT" href="wind.html"><img src="udo_lf.gif" alt="Fensterverwaltung" title="Fensterverwaltung" border="0" width="24" height="24">Fensterverwaltung</a>
<a name="UDO_nav_rg_FOOT" href="form.html"><img src="udo_rg.gif" alt="Formularfunktionen" title="Formularfunktionen" border="0" width="24" height="24">Formularfunktionen</a>
</body>
</html>
