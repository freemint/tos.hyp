<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- last modified on 02.08.2025 -->
<html lang="de">
<head>
<title>
Die Anleitung zum TOS: Virtual-Screen-Protokoll
</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="de">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="Generator" content="UDO Version 7.12 (1248) for Linux">
</head>
<body style="position: relative;">

<a name="UDO_nav_hm_HEAD" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_HEAD" href="protocols.html"><img src="udo_up.gif" alt="Protokolle" title="Protokolle" border="0" width="24" height="24">Protokolle</a>
<a name="UDO_nav_lf_HEAD" href="proto_view.html"><img src="udo_lf.gif" alt="View protocol" title="View protocol" border="0" width="24" height="24">View protocol</a>
<a name="UDO_nav_rg_HEAD" href="proto_xacc.html"><img src="udo_rg.gif" alt="XAcc" title="XAcc" border="0" width="24" height="24">XAcc</a>

<hr>

<h1><a name="Virtual-Screen-Protokoll">15.12 Virtual-Screen-Protokoll</a></h1>
<a name="Protokoll_2C_20Virtual-Screen-Protokoll"></a>
<p>Ein echtes Problem bei Benutzung einer Großbildschirm-Emulation
ist, daß Dialog- und Alertboxen oft außerhalb des sichtbaren
Bildschirmausschnitts erscheinen. Daran können auch Programme wie
<i>BigScreen</i> nichts ändern. Als Lösung bietet sich eine
Möglichkeit an, mit der man sich darüber informieren kann, welcher
Teil des Bildschirms zur Zeit sichtbar ist.
</p>
<p>Dazu wird der <a href="bios_cookiejar.html">Cookie-Jar</a> benutzt, der genau für solche Zwecke
vorgesehen ist. In unserem Fall heißt der Cookie VSCR, was für
Virtual-Screen steht. Er zeigt auf eine Struktur, die insbesondere
Informationen über den dargestellten Bildschirmausschnitt enthält.
Anwendungsprogramme können diese Information beispielsweise dazu
benutzen, um Dialogboxen auf dem tatsächlich sichtbaren Teil des
Bildschirms zu zentrieren. Die Struktur ist wie folgt definiert:
</p>
<a name="VSCR"></a>
<pre>typedef struct
{
  int32_t cookie;   /* muß 'VSCR' sein                       */
  int32_t product;  /* Analog zur XBRA-Kennung               */
  int16_t version;  /* Version des VSCR-Protokolls           */
  int16_t x,y,w,h;  /* Sichtbarer Ausschnitt des Bildschirms */
} INFOVSCR;
</pre>
<p><b>Zur Beschreibung der einzelnen Komponenten:</b>
<i>cookie</i> muß den Wert $56534352 ('VSCR') haben. Sinn der Sache
ist, daß ein Großbildschirm-Simulator die Informationsstruktur auf
'ungültig' setzen kann, ohne erst den Cookie entfernen zu müssen.
<i>BigScreen</i> beispielsweise kann je nach gewählter Auflösung
aktiv oder inaktiv sein und benutzt diesen Mechanismus, um beim
<a href="shel.html#Aufl_C3_B6sungswechsel">Auflösungswechsel</a> die Struktur ein- oder auszuschalten.
</p>
<p>In <i>product</i> kann ein Großbildschirm-Simulator eine
eigene Kennung eintragen. Die vier Bytes sollten genauso wie bei einer
XBRA-Kennung aus vier druckbaren Zeichen (ASCII-Code 32 bis 126)
bestehen.
</p>
<div align="left"><table border="0" class="UDO_env_table">
<tr>
  <td align="left" valign="top">Programm</td>
  <td align="left" valign="top">Kennung</td>
</tr>
<tr>
  <td align="left" valign="top">BigScreen</td>
  <td align="left" valign="top">BIGS</td>
</tr>
<tr>
  <td align="left" valign="top">BlowUP030</td>
  <td align="left" valign="top">BLOW</td>
</tr>
<tr>
  <td align="left" valign="top">LaceScan</td>
  <td align="left" valign="top">LEmu</td>
</tr>
<tr>
  <td align="left" valign="top">NOVA <a href="vdi_main.html">VDI</a></td>
  <td align="left" valign="top">IMNE</td>
</tr>
</table>
</div>

<p>Die Komponente <i>version</i> kennzeichnet die Version des
VSCR-Protokolls und soll es erlauben, später einmal die Struktur um
neue Felder zu ergänzen. <i>x, y, w</i> und <i>h</i> schließlich
geben Position, Breite und Höhe des sichtbaren Ausschnitts an. Das
Protokoll ist absichtlich so ausgelegt, daß es auch von anderen
Simulatoren benutzt und bei Bedarf erweitert werden kann.
</p>
<hr>

<a name="UDO_nav_hm_FOOT" href="index.html"><img src="udo_hm.gif" alt="Home" title="Home" border="0" width="24" height="24"></a>
<a name="UDO_nav_up_FOOT" href="protocols.html"><img src="udo_up.gif" alt="Protokolle" title="Protokolle" border="0" width="24" height="24">Protokolle</a>
<a name="UDO_nav_lf_FOOT" href="proto_view.html"><img src="udo_lf.gif" alt="View protocol" title="View protocol" border="0" width="24" height="24">View protocol</a>
<a name="UDO_nav_rg_FOOT" href="proto_xacc.html"><img src="udo_rg.gif" alt="XAcc" title="XAcc" border="0" width="24" height="24">XAcc</a>
</body>
</html>
