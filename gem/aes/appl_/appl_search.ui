!iflang [english]

!begin_node appl_search
(!begin_liste) [Availability]
!item [Name:]
¯Application search® - im System vorhandene Applikationen suchen.
!item [Opcode:]
18
!item [Syntax:]
int16_t appl_search ( int16_t ap_smode, int8_t *ap_sname, int16_t *ap_stype,
                   int16_t *ap_sid );

!item [Description:]
Je nach Parameter sucht die Funktion verschiedene im System vorhandene
Applikationen. Es bedeuten:
!begin_xlist !short [Parameter]
!item [Parameter]
Bedeutung
!item [~]
~
!item [ap_smode]
(!B)Suche(!b)
!begin_table [l l l]
0 !! = !! erste Applikation
1 !! = !! n„chste Applikation
2 !! = !! System Shell
!end_table
!item [ap_sname]
Puffer der den Namen der gefundenen Applikation aufnimmt (mindestens
9 Bytes).
!item [ap_stype]
(!B)Typ des Prozesses als Bitvektor(!b)
!begin_table [l l l]
Bit-0 !! = !! System-Proze
Bit-1 !! = !! Applikation
Bit-2 !! = !! Accessory
Bit-3 !! = !! System Shell
!end_table
!item [ap_sid]
ID der gefundenen Applikation
!end_xlist

Bei N.AES kann der Langname einer Applikation ermittelt werden, wenn 
man ihre Applikations-ID kennt.

Der Langname ist derjenige, der von der Applikation bei einem menu_register()- 
Aufruf bergeben wurde und auch in der Menleiste dargestellt wird.

Kennt man die Applikations-ID apid einer Anwendung, so wird ihr Langname vom 
(!nolink [N.AES]) durch folgenden Aufruf von appl_search in den Buffer langname
bertragen:

     appl_search(-apid, &langname[0], &typ, &pid)

typ ist hierbei die auch normalerweise gelieferte Bitmaske des Applikationstyps,
pid die MiNT-pid (nicht: apid) der Applikation.

Als erster Parameter ist also der negative Wert der Applikations-ID zu 
bergeben, um den Langnamen eben dieser Applikation zu ermitteln. Dieser Name 
kann maximal 32 Zeichen lang sein (31 Zeichen plus ein Nullbyte), man sollte 
also einen entsprechend groen Buffer fr langname reservieren.

(!B)Hinweis:(!b) Mit dieser Routine k”nnen (!I)keine(!i) Threads gefunden
werden.
!item [(!nolink [Return]) Value:]
Die Funktion liefert den Wert 1, wenn kein Fehler aufgetreten ist, bzw. den
Wert 0, wenn keine weiteren Applikationen vorhanden sind.

!item [Availability:]
Das Vorhandensein dieser Funktion kann per (!link [appl_getinfo][%apgi_4])
(Opcode 4) festgestellt werden. Die Ermittlung des Langname erkennt man an
(!link [appl_getinfo][%apgi_64]) (Opcode 64).

!item [Group:]
(!link [Applications][Applikationsfunktionen])
!item [See Also:]
(!link [Binding] [Bindings for appl_search]) ~ appl_find ~  appl_getinfo ~
(!link [Broadcasting][AES-Broadcasting])

(!ende_liste)



!begin_node Bindings for appl_search
!ignore_index
(!begin_liste) [GEM-Arrays]
!item [C:]
int16_t appl_search ( int16_t ap_smode, int8_t *ap_sname, int16_t *ap_stype,
                   int16_t *ap_sid );
!item [Binding:]
!begin_verbatim
int16_t appl_search (int16_t ap_smode, int8_t *ap_sname,
                     int16_t *ap_stype, int16_t *ap_sid)
{
   int_in[0]  = ap_smode;
   addr_in[0] = ap_sname;

  crys_if(18);
  
  *ap_stype = int_out[1];
  *ap_sid   = int_out[2];
  
   return ( int_out[0] ); 
} 
!end_verbatim
!item [GEM-Arrays:]
!begin_table [l l l]
Adresse !! Feldelement !! Belegung
!hline
control !! control[0] !! 18    # Function Opcode
control+2 !! control[1] !! 1     # entry in int_in
control+4 !! control[2] !! 3     # entry in int_out
control+6 !! control[3] !! 1     # entry in addr_in
control+8 !! control[4] !! 0     # entry in addr_out
int_in !! int_in[0]  !! ap_smode
addr_in !! addr_in[0] !! ap_sname
int_out !! int_out[0] !! Return-Wert
int_out+2 !! int_out[1] !! ap_stype
int_out+4 !! int_out[2] !! ap_sid
!end_table
(!ende_liste)
!end_node
!end_node

!else

!begin_node appl_search
(!begin_liste) [Beschreibung]
!item [Name:]
¯Application search® - im System vorhandene Applikationen suchen.
!item [AES-Nummer:]
18
!item [Deklaration:]
int16_t appl_search ( int16_t ap_smode, int8_t *ap_sname, int16_t *ap_stype,
                   int16_t *ap_sid );

!item [Beschreibung:]
Je nach Parameter sucht die Funktion verschiedene im System vorhandene
Applikationen. Es bedeuten:
!begin_xlist !short [Parameter]
!item [Parameter]
Bedeutung
!item [~]
~
!item [ap_smode]
(!B)Suche(!b)
!begin_table [l l l]
0 !! = !! erste Applikation
1 !! = !! n„chste Applikation
2 !! = !! System Shell
!end_table
!item [ap_sname]
Puffer der den Namen der gefundenen Applikation aufnimmt (mindestens
9 Bytes).
!item [ap_stype]
(!B)Typ des Prozesses als Bitvektor(!b)
!begin_table [l l l]
Bit-0 !! = !! System-Proze
Bit-1 !! = !! Applikation
Bit-2 !! = !! Accessory
Bit-3 !! = !! System Shell
!end_table
!item [ap_sid]
ID der gefundenen Applikation
!end_xlist

Bei N.AES kann der Langname einer Applikation ermittelt werden, wenn 
man ihre Applikations-ID kennt.

Der Langname ist derjenige, der von der Applikation bei einem menu_register()- 
Aufruf bergeben wurde und auch in der Menleiste dargestellt wird.

Kennt man die Applikations-ID apid einer Anwendung, so wird ihr Langname vom 
(!nolink [N.AES]) durch folgenden Aufruf von appl_search in den Buffer langname
bertragen:

     appl_search(-apid, &langname[0], &typ, &pid)

typ ist hierbei die auch normalerweise gelieferte Bitmaske des Applikationstyps,
pid die MiNT-pid (nicht: apid) der Applikation.

Als erster Parameter ist also der negative Wert der Applikations-ID zu 
bergeben, um den Langnamen eben dieser Applikation zu ermitteln. Dieser Name 
kann maximal 32 Zeichen lang sein (31 Zeichen plus ein Nullbyte), man sollte 
also einen entsprechend groen Buffer fr langname reservieren.

(!B)Hinweis:(!b) Mit dieser Routine k”nnen (!I)keine(!i) Threads gefunden
werden.
!item [Ergebnis:]
Die Funktion liefert den Wert 1, wenn kein Fehler aufgetreten ist, bzw. den
Wert 0, wenn keine weiteren Applikationen vorhanden sind.

!item [Verfgbar:]
Das Vorhandensein dieser Funktion kann per (!link [appl_getinfo][%apgi_4])
(Opcode 4) festgestellt werden. Die Ermittlung des Langname erkennt man an
(!link [appl_getinfo][%apgi_64]) (Opcode 64).

!item [Gruppe:]
(!link [Applikationen][Applikationsfunktionen])
!item [Querverweis:]
(!link [Binding] [Bindings fr appl_search]) ~ appl_find ~  appl_getinfo ~
(!link [Broadcasting][AES-Broadcasting])

(!ende_liste)



!begin_node Bindings fr appl_search
!ignore_index
(!begin_liste) [GEM-Arrays]
!item [C:]
int16_t appl_search ( int16_t ap_smode, int8_t *ap_sname, int16_t *ap_stype,
                   int16_t *ap_sid );
!item [Umsetzung:]
!begin_verbatim
int16_t appl_search (int16_t ap_smode, int8_t *ap_sname,
                     int16_t *ap_stype, int16_t *ap_sid)
{
   int_in[0]  = ap_smode;
   addr_in[0] = ap_sname;

  crys_if(18);
  
  *ap_stype = int_out[1];
  *ap_sid   = int_out[2];
  
   return ( int_out[0] ); 
} 
!end_verbatim
!item [GEM-Arrays:]
!begin_table [l l l]
Adresse !! Feldelement !! Belegung
!hline
control !! control[0] !! 18    # Opcode der Funktion
control+2 !! control[1] !! 1     # Eintr„ge in int_in
control+4 !! control[2] !! 3     # Eintr„ge in int_out
control+6 !! control[3] !! 1     # Eintr„ge in addr_in
control+8 !! control[4] !! 0     # Eintr„ge in addr_out
int_in !! int_in[0]  !! ap_smode
addr_in !! addr_in[0] !! ap_sname
int_out !! int_out[0] !! Return-Wert
int_out+2 !! int_out[1] !! ap_stype
int_out+4 !! int_out[2] !! ap_sid
!end_table
(!ende_liste)
!end_node
!end_node

!endif
