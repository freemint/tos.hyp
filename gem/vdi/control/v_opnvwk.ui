!iflang [english]

!begin_node v_opnvwk

(!begin_liste) [Availability]

!item [Name:]
ØOpen virtual Screen WorkstationÆ - îffnet eine Bildschirm-Workstation

!item [Opcode:]
100

!item [Syntax:]
void v_opnvwk ( int16_t *work_in, int16_t *handle, int16_t *work_out );

!item [Description:]
Die Funktion îffnet ein virtuelles ArbeitsgerÑt, auf einem bereits
geîffneten physikalischen GerÑt. Nach dem Aufruf enthÑlt der Parameter
(!I)handle(!i) die Kennung des virtuellen GerÑtes bzw. den Wert Null im
Fehlerfall. Es gilt:

!begin_xlist !short [work_out+00+]

!item [Parameter]
Meaning

!item [~]
~

!item [work_in]
Zeiger auf ein Integerfeld mit den genaueren Spezifikationen des zu ladenden
GerÑtetreibers

!item [work_in[0!]]
Nummer des (!link [GerÑtetreibers][GDOS-Treiber]) wie im ASSIGN.SYS File angegeben. FÅr den
Bildschirm gilt:
!begin_xlist !short
!item [1 =]
current resolution
!item [2 =]
320*200, 16 colors
!item [3 =]
640*200,  4 colors
!item [4 =]
640*400, monochrome
!item [6 =]
640*480, 16 colors  (Atari-TT)
!item [8 =]
1280*960, monochrome  (Atari-TT)
!item [9 =]
320*480, 256 colors (Atari-TT)
!end_xlist

!item [work_in[1!]]
Line type

!item [work_in[2!]]
Line color index

!item [work_in[3!]]
Marker type

!item [work_in[4!]]
Marker color index

!item [work_in[5!]]
font id

!item [work_in[6!]]
text color index

!item [work_in[7!]]
fill interior style

!item [work_in[8!]]
fill style index

!item [work_in[9!]]
fill color index

!item [work_in[10!]]
transformation flag:
!begin_xlist !short
!item [0 =]
NDC
!item [2 =]
RC
!end_xlist

!item [work_in[11!]]
(!B)Seitenformat(!b)
!begin_xlist !short [20 =]
!item [0 =]
use default setting
!item [1 =]
DIN A3
!item [2 =]
DIN A4
!item [3 =]
DIN A5
!item [4 =]
DIN B5
!item [16 =]
Letter size
!item [17 =]
Half size
!item [18 =]
Legal size
!item [19 =]
Double size
!item [20 =]
Broad sheet size
!end_xlist

!item [work_in[12!]]
~

!item [+]
~

!item [work_in[13!]]
pointer to a GEMDOS file name (C string) or 0L

!item [work_in[14!]]
0, reserved

!item [work_in[15!]]
0, reserved

!item [work_out]
Zeiger auf ein Integerfeld, das genauere Informationen Åber den geladenen
GerÑtetreiber enthÑlt

!item [work_out[0!]]
Maximum addressable width (0 - xmax)

!item [work_out[1!]]
Maximum addressable height (0 - ymax)

!item [work_out[2!]]
(!B)Device Coordinate units fla:(!b)
!begin_xlist !short
!item [0 =]
Device capable of producing a precisely scaled
image (e.g. screen)
!item [1 =]
Device not capable of producing a precisely scaled
image (e.g. film recorder)
!end_xlist

!item [work_out[3!]]
Pixel width in microns

!item [work_out[4!]]
Pixel height in microns

!item [work_out[5!]]
Number of character heights (0: continous scaling)

!item [work_out[6!]]
Number of line types

!item [work_out[7!]]
Number of line widths (0: continous scaling)

!item [work_out[8!]]
Number of marker types

!item [work_out[9!]]
Number of marker heights (0: continous scaling)

!item [work_out[10!]]
Number of accessible fonts

!item [work_out[11!]]
Number of patterns

!item [work_out[12!]]
Number of hatch styles

!item [work_out[13!]]
Number of simultaneously displayed colors
(e.g. 256 on an 8 bit screen)

!item [work_out[14!]]
Number of GDPs (GENERAL DRAWING PRIMITIV, GDP)

!item [work_out[15!]]
List of the supported GDPs. -1 indicates the end
of the list.
!begin_xlist !short [10 =]
!item [1 =]
v_bar
!item [2 =]
v_arc
!item [3 =]
v_pieslice
!item [4 =]
v_circle
!item [5 =]
v_ellipse
!item [6 =]
v_ellarc
!item [7 =]
v_ellpie
!item [8 =]
v_rbox
!item [9 =]
v_rfbox
!item [10 =]
v_justified
!end_xlist

!item [:]
~

!item [work_out[24!]]
~

!item [work_out[25!]]
(!B)List of attributes associated with each GDP:(!b)
!begin_xlist !short
!item [0 =]
Line
!item [1 =]
Marker
!item [2 =]
Text
!item [3 =]
Fill area
!item [4 =]
no attributes
!end_xlist

!item [:]
~

!item [work_out[34!]]
~

!item [work_out[35!]]
Color capability flag

!item [work_out[36!]]
Text rotation capability flag

!item [work_out[37!]]
Fill area capability flag

!item [work_out[38!]]
CELLARRAY flag

!item [work_out[39!]]
Number of color levels
!begin_xlist !short
!item [0 =]
more than 32767
!item [2 =]
monochrome
!end_xlist

!item [work_out[40!]]
Number of locator devices available
!begin_xlist !short
!item [0 =]
none
!item [1 =]
Keyboard
!item [2 =]
Keyboard and mouse (or other devices)
!end_xlist

!item [work_out[41!]]
Number of valuator devices available
!begin_xlist !short
!item [0 =]
none
!item [1 =]
Keyboard
!item [2 =]
another device is available
!end_xlist

!item [work_out[42!]]
Number of choice devices available
!begin_xlist !short
!item [0 =]
none
!item [1 =]
Function keys
!item [2 =]
another button pad
!end_xlist

!item [work_out[43!]]
Number of string devices available
!begin_xlist !short
!item [0 =]
none
!item [1 =]
Keyboard
!end_xlist

!item [work_out[44!]]
(!B)Device type:(!b)
!begin_xlist !short
!item [0 =]
Output only
!item [1 =]
Input only
!item [2 =]
Input and Output
!item [3 =]
reserved
!item [4 =]
Metafile output
!end_xlist

!item [work_out[45!]]
minimum character width

!item [work_out[46!]]
minimum character height

!item [work_out[47!]]
maximum character width

!item [work_out[48!]]
maximum character height

!item [work_out[49!]]
maximum character height

!item [work_out[50!]]
0

!item [work_out[51!]]
maximum line width

!item [work_out[52!]]
0

!item [work_out[53!]]
minimum marker width

!item [work_out[54!]]
minimum marker height

!item [work_out[55!]]
maximum marker width

!item [work_out[56!]]
maximum marker height

!end_xlist

(!B)Hinweis:(!b) Das VDI besitzt leider keinen Mechanismus, um bei mehreren
virtuellen Workstations die EingabegerÑte zu verwalten. Dies muû deshalb von
der Applikation Åbernommen werden, die die physikalische Workstation des
Bildschirms geîffnet hat.

(!B)Wichtig:(!b) Die Kennung der aktuellen (!I)physikalischen(!i)
Bildschirm-Workstation muû beim AES per graf_handle erfragt werden.

!label VDIFIX, Patchprogramm
!label Patch, VDIFIX-
(!B)Achtung:(!b) In den TOS-Versionen 1.00, 1.04, 1.06, 1.62 und 2.05 gibt
es einen Fehler bei der Verwaltung der virtuellen Workstations. Dies kann
sich darin Ñuûern daû Kennungen (!I)mehrfach(!i) vergeben werden, und
deshalb u.U. Workstation-Attribute verstellt werden. Dieser Fehler tritt
genau dann auf, wenn in der internen Workstationliste des Bildschirmtreibers
(!I)LÅcken(!i) entstehen. Abhilfe: das Patch-Programm (!B)VDIFIX(!b) in den
AUTO-Ordner legen.

!item [(!nolink [Return]) Value:]
Die Funktion liefert kein direktes Funktionsergebnis.

!item [Availability:]
Supported by all drivers.

!item [Group:]
Control Function

!item [See Also:]
(!link [Binding] [Bindings for v_opnvwk]) ~  v_opnwk ~ v_clsvwk ~ graf_handle

(!ende_liste)
!end_node

!begin_node Bindings for v_opnvwk
!ignore_index

(!begin_liste) [GEM-Arrays]

!item [C:]
void v_opnvwk ( int16_t *work_in, int16_t *handle, int16_t *work_out );

!item [Binding:]
!begin_verbatim
void v_opnvwk (int16_t *work_in, int16_t *handle,
               int16_t *work_out)
{
   intin[0..10] = work_in[0..10]

   contrl[0] = 100;
   contrl[1] = 0;
   contrl[3] = 11;
   contrl[6] = *handle;

   vdi ();

   *handle = contrl[6];
   work_out[0..44]  = intout[0..44];
   work_out[45..56] = ptsout[0..11];
}
!end_verbatim

!item [GEM-Arrays:]
!begin_table [l l l]
Address !! Element !! Contents
!hline
contrl    !! contrl[0]     !! 100   Function Opcode
contrl+2  !! contrl[1]     !! 0     # entry in ptsin
contrl+4  !! contrl[2]     !! 6     # entry in ptsout
contrl+6  !! contrl[3]     !! 11    # entry in intin
contrl+8  !! contrl[4]     !! 45    # entry in intout
contrl+12 !! contrl[6]     !! handle
intin     !! intin[0..10]  !! work_in[0..10]
intout    !! intout[0..44] !! work_out[0..44]
ptsout    !! ptsout[0..11] !! work_out[45..56]
!end_table

(!ende_liste)
!end_node

!else

!begin_node v_opnvwk

(!begin_liste) [Beschreibung]

!item [Name:]
ØOpen virtual Screen WorkstationÆ - îffnet eine Bildschirm-Workstation

!item [VDI-Nummer:]
100

!item [Deklaration:]
void v_opnvwk ( int16_t *work_in, int16_t *handle, int16_t *work_out );

!item [Beschreibung:]
Die Funktion îffnet ein virtuelles ArbeitsgerÑt, auf einem bereits
geîffneten physikalischen GerÑt. Nach dem Aufruf enthÑlt der Parameter
(!I)handle(!i) die Kennung des virtuellen GerÑtes bzw. den Wert Null im
Fehlerfall. Es gilt:

!begin_xlist !short [work_out+00+]

!item [Parameter]
Bedeutung

!item [~]
~

!item [work_in]
Zeiger auf ein Integerfeld mit den genaueren Spezifikationen des zu ladenden
GerÑtetreibers

!item [work_in[0!]]
Nummer des (!link [GerÑtetreibers][GDOS-Treiber]) wie im ASSIGN.SYS File angegeben. FÅr den
Bildschirm gilt:
!begin_xlist !short
!item [1 =]
aktuelle Auflîsung
!item [2 =]
320*200, 16 Farben
!item [3 =]
640*200,  4 Farben
!item [4 =]
640*400, monochrom
!item [6 =]
640*480, 16 Farben  (Atari-TT)
!item [8 =]
1280*960, monochrom  (Atari-TT)
!item [9 =]
320*480, 256 Farben (Atari-TT)
!end_xlist

!item [work_in[1!]]
Linientyp

!item [work_in[2!]]
Linienfarbe

!item [work_in[3!]]
Markertyp

!item [work_in[4!]]
Markerfarbe

!item [work_in[5!]]
Zeichensatznummer

!item [work_in[6!]]
Textfarbe

!item [work_in[7!]]
FÅlltyp

!item [work_in[8!]]
FÅllmuster-Index

!item [work_in[9!]]
FÅllmusterfarbe

!item [work_in[10!]]
welche Koordinaten sollen benutzt werden:
!begin_xlist !short
!item [0 =]
NDC-Koordinaten
!item [2 =]
RC-Koordinaten
!end_xlist

!item [work_in[11!]]
(!B)Seitenformat(!b)
!begin_xlist !short [20 =]
!item [0 =]
Voreinstellung benutzen
!item [1 =]
DIN A3
!item [2 =]
DIN A4
!item [3 =]
DIN A5
!item [4 =]
DIN B5
!item [16 =]
Letter Size
!item [17 =]
Half Size
!item [18 =]
Legal Size
!item [19 =]
Double Size
!item [20 =]
Broad Sheet Size
!end_xlist

!item [work_in[12!]]
~

!item [+]
~

!item [work_in[13!]]
Zeiger auf einen GEMDOS-Dateinamen in C-Konvention (null-terminiert), oder
NULL

!item [work_in[14!]]
reserviert, sollte 0 sein

!item [work_in[15!]]
reserviert, sollte 0 sein

!item [work_out]
Zeiger auf ein Integerfeld, das genauere Informationen Åber den geladenen
GerÑtetreiber enthÑlt

!item [work_out[0!]]
Anzahl der maximal ansprechbaren Rastereinheiten in der Horizontalen

!item [work_out[1!]]
Anzahl der maximal ansprechbaren Rastereinheiten in der Vertikalen

!item [work_out[2!]]
(!B)Skalierungsflag:(!b)
!begin_xlist !short
!item [0 =]
GerÑt kann exakt skalieren
!item [1 =]
GerÑt kann nicht exakt skalieren
!end_xlist

!item [work_out[3!]]
Breite einer Rastereinheit in Mikrometern

!item [work_out[4!]]
Hîhe einer Rastereinheit in Mikrometern

!item [work_out[5!]]
Anzahl der Zeichensatzhîhen oder Null, falls die Hîhe kontinuierlich
verÑndert werden kann

!item [work_out[6!]]
Anzahl der Linientypen

!item [work_out[7!]]
Anzahl der Linienbreiten oder Null, falls die StrichstÑrke kontinuierlich
verÑndert werden kann

!item [work_out[8!]]
Anzahl der Markertypen

!item [work_out[9!]]
Anzahl der Markergrîûen oder Null, falls die Grîûe kontinuierlich verÑndert
werden kann

!item [work_out[10!]]
Anzahl der ZeichensÑtze

!item [work_out[11!]]
Anzahl der FÅllmuster

!item [work_out[12!]]
Anzahl der Schraffurarten

!item [work_out[13!]]
Anzahl der vordefinierten Farben

!item [work_out[14!]]
Anzahl der verfÅgbaren Grafikgrundfunktionen (GENERAL DRAWING PRIMITIV, GDP)

!item [work_out[15!]]
(!B)Liste der auf dem GerÑt verfÅgbaren GDP's.(!b) Sind es weniger als zehn
wird die Liste durch -1 beendet. Das VDI unterstÅtzt folgende GDP's:
!begin_xlist !short [10 =]
!item [1 =]
v_bar
!item [2 =]
v_arc
!item [3 =]
v_pieslice
!item [4 =]
v_circle
!item [5 =]
v_ellipse
!item [6 =]
v_ellarc
!item [7 =]
v_ellpie
!item [8 =]
v_rbox
!item [9 =]
v_rfbox
!item [10 =]
v_justified
!end_xlist

!item [:]
~

!item [work_out[24!]]
~

!item [work_out[25!]]
(!B)Liste aller Attribute der GDP's:(!b)
!begin_xlist !short
!item [0 =]
Linie
!item [1 =]
Marker
!item [2 =]
Text
!item [3 =]
FÅllbereich
!item [4 =]
kein Attribut
!end_xlist

!item [:]
~

!item [work_out[34!]]
~

!item [work_out[35!]]
das GerÑt ist farbtÅchtig (1) oder nicht (0)

!item [work_out[36!]]
das GerÑt kann Text rotieren (1) oder nicht (0)

!item [work_out[37!]]
das GerÑt kann eine FÅlloperation ausfÅhren (1) oder nicht (0)

!item [work_out[38!]]
das GerÑt unterstÅtzt CELL ARRAY (1) oder nicht (0)

!item [work_out[39!]]
Anzahl der verfÅgbaren Farben oder
!begin_xlist !short
!item [0 =]
mehr als 32767 Farben verfÅgbar
!item [2 =]
monochrom
!end_xlist

!item [work_out[40!]]
Grafik-Cursor-Kontrolle
!begin_xlist !short
!item [0 =]
keine
!item [1 =]
nur die Tastatur
!item [2 =]
Tastatur und andere GerÑte
!end_xlist

!item [work_out[41!]]
EingabegerÑt fÅr variierende Eingaben
!begin_xlist !short
!item [0 =]
keine
!item [1 =]
nur die Tastatur
!item [2 =]
anderes GerÑt
!end_xlist

!item [work_out[42!]]
Auswahltasten
!begin_xlist !short
!item [0 =]
keine
!item [1 =]
Funktionstasten auf der Tastatur
!item [2 =]
zusÑtzliches Tastenfeld
!end_xlist

!item [work_out[43!]]
alphanumerische Eingabe
!begin_xlist !short
!item [0 =]
keine
!item [1 =]
Tastatur
!end_xlist

!item [work_out[44!]]
(!B)GerÑtetyp:(!b)
!begin_xlist !short
!item [0 =]
reines AusgabegerÑt
!item [1 =]
reines EingabegerÑt
!item [2 =]
Ein/AusgabegerÑt
!item [3 =]
reserviert
!item [4 =]
Metafile Ausgabe
!end_xlist

!item [work_out[45!]]
kleinste Buchstabenbreite

!item [work_out[46!]]
kleinste Buchstabenhîhe

!item [work_out[47!]]
grîûte Buchstabenbreite

!item [work_out[48!]]
grîûte Buchstabenhîhe

!item [work_out[49!]]
kleinste darstellbare Linienbreite

!item [work_out[50!]]
immer Null

!item [work_out[51!]]
grîûte Linienbreite

!item [work_out[52!]]
immer Null

!item [work_out[53!]]
kleinste darstellbare Markerbreite

!item [work_out[54!]]
kleinste darstellbare Markerhîhe

!item [work_out[55!]]
grîûte Markerbreite

!item [work_out[56!]]
grîûte Markerhîhe

!end_xlist

(!B)Hinweis:(!b) Das VDI besitzt leider keinen Mechanismus, um bei mehreren
virtuellen Workstations die EingabegerÑte zu verwalten. Dies muû deshalb von
der Applikation Åbernommen werden, die die physikalische Workstation des
Bildschirms geîffnet hat.

(!B)Wichtig:(!b) Die Kennung der aktuellen (!I)physikalischen(!i)
Bildschirm-Workstation muû beim AES per graf_handle erfragt werden.

!label VDIFIX, Patchprogramm
!label Patch, VDIFIX-
(!B)Achtung:(!b) In den TOS-Versionen 1.00, 1.04, 1.06, 1.62 und 2.05 gibt
es einen Fehler bei der Verwaltung der virtuellen Workstations. Dies kann
sich darin Ñuûern daû Kennungen (!I)mehrfach(!i) vergeben werden, und
deshalb u.U. Workstation-Attribute verstellt werden. Dieser Fehler tritt
genau dann auf, wenn in der internen Workstationliste des Bildschirmtreibers
(!I)LÅcken(!i) entstehen. Abhilfe: das Patch-Programm (!B)VDIFIX(!b) in den
AUTO-Ordner legen.

!item [Ergebnis:]
Die Funktion liefert kein direktes Funktionsergebnis.

!item [VerfÅgbar:]
Supported by all drivers.

!item [Gruppe:]
Kontrollfunktionen

!item [Querverweis:]
(!link [Binding] [Bindings fÅr v_opnvwk]) ~  v_opnwk ~ v_clsvwk ~ graf_handle

(!ende_liste)
!end_node



!begin_node Bindings fÅr v_opnvwk
!ignore_index

(!begin_liste) [Umsetzung]

!item [C:]
void v_opnvwk ( int16_t *work_in, int16_t *handle, int16_t *work_out );

!item [Umsetzung:]
!begin_verbatim
void v_opnvwk (int16_t *work_in, int16_t *handle,
               int16_t *work_out)
{
   intin[0..10] = work_in[0..10]

   contrl[0] = 100;
   contrl[1] = 0;
   contrl[3] = 11;
   contrl[6] = *handle;

   vdi ();

   *handle = contrl[6];
   work_out[0..44]  = intout[0..44];
   work_out[45..56] = ptsout[0..11];
}
!end_verbatim

!item [GEM-Arrays:]
!begin_table [l l l]
Adresse !! Feldelement !! Belegung
!hline
contrl    !! contrl[0]     !! 100   Opcode der Funktion
contrl+2  !! contrl[1]     !! 0     # EintrÑge in ptsin
contrl+4  !! contrl[2]     !! 6     # EintrÑge in ptsout
contrl+6  !! contrl[3]     !! 11    # EintrÑge in intin
contrl+8  !! contrl[4]     !! 45    # EintrÑge in intout
contrl+12 !! contrl[6]     !! handle
intin     !! intin[0..10]  !! work_in[0..10]
intout    !! intout[0..44] !! work_out[0..44]
ptsout    !! ptsout[0..11] !! work_out[45..56]
!end_table

(!ende_liste)
!end_node

!endif
