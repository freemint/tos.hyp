!iflang [english]

!begin_node Mshrink
(!begin_liste) [Availability]
!item [Name:]
¯memory shrink® - Speicherbereich verkrzen oder vergr”ern.
!item [Opcode:]
74
!item [Syntax:]
int32_t Mshrink ( void *block, int32_t newsiz );

!item [Description:]
Die GEMDOS-Routine Mshrink verkrzt oder vergr”ert einen bereits
reservierten Speicherbereich. Es gilt:
!begin_xlist !short [Parameter]
!item [Parameter]
Bedeutung
!item [~]
~
!item [block]
Anfangsadresse des Speicherblocks
!item [newsiz]
neue (ge„nderte) L„nge des Blocks; (!B)in (!nolink [MagiC]) zus„tzlich:(!b)
!begin_xlist !short [-1 =]
!item [-1 =]
 ermitteln der gr”tm”glichen Gr”e des Speicherblocks
!item [~0 =]
 Block freigeben
!end_xlist
!end_xlist
(!B)Hinweis:(!b) Es wird i.d.R. nicht berprft, ob der Speicherblock dem
Aufrufer berhaupt geh”rt. Die M”glichkeit einen Speicherblock zu
(!I)vergr”ern(!i), steht z.Zt. nur in MagiC zur Verfgung. Allerdings
funktioniert dies nur, wenn ber dem betreffenden Block ein gengend groer
freier Block vorhanden ist, und die TOS-Kompatibilit„t deaktiviert wurde.

!item [(!nolink [Return]) Value:]
Die Funktion liefert folgende Resultate:
!begin_xlist !short [EIMBA :]
!item [E_OK :]
kein Fehler aufgetreten
!item [EIMBA :]
falsche Blockadresse
!item [EGSBF :]
Block wrde vergr”ert
!end_xlist

!item [Availability:] All GEMDOS versions.

!item [Group:]
Memory Management

!item [See Also:] (!link [Binding] [Bindings for Mshrink]) ~ Malloc ~  Mfree
(!ende_liste)


!begin_node Bindings for Mshrink
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
int32_t Mshrink ( void *block, int32_t newsiz );
!item [Assembler:]
!begin_verbatim
move.l    newsiz,-(sp)  ; Offset 8
pea       block         ; Offset 4
move.w    #0,-(sp)      ; Offset 2
move.w    #74,-(sp)     ; Offset 0
trap      #1            ; GEMDOS
lea       $C(sp),sp     ; correct stack
!end_verbatim
(!B)Hinweis:(!b) Der Null-Parameter wird beim C-Binding normalerweise
automatisch hinzugefgt.
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7gd.htm">GFA-H-Util GEMDOS</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node

!else

!begin_node Mshrink
(!begin_liste) [Beschreibung]
!item [Name:]
¯memory shrink® - Speicherbereich verkrzen oder vergr”ern.
!item [Gemdosnummer:]
74
!item [Deklaration:]
int32_t Mshrink ( void *block, int32_t newsiz );

!item [Beschreibung:]
Die GEMDOS-Routine Mshrink verkrzt oder vergr”ert einen bereits
reservierten Speicherbereich. Es gilt:
!begin_xlist !short [Parameter]
!item [Parameter]
Bedeutung
!item [~]
~
!item [block]
Anfangsadresse des Speicherblocks
!item [newsiz]
neue (ge„nderte) L„nge des Blocks; (!B)in (!nolink [MagiC]) zus„tzlich:(!b)
!begin_xlist !short [-1 =]
!item [-1 =]
 ermitteln der gr”tm”glichen Gr”e des Speicherblocks
!item [~0 =]
 Block freigeben
!end_xlist
!end_xlist
(!B)Hinweis:(!b) Es wird i.d.R. nicht berprft, ob der Speicherblock dem
Aufrufer berhaupt geh”rt. Die M”glichkeit einen Speicherblock zu
(!I)vergr”ern(!i), steht z.Zt. nur in MagiC zur Verfgung. Allerdings
funktioniert dies nur, wenn ber dem betreffenden Block ein gengend groer
freier Block vorhanden ist, und die TOS-Kompatibilit„t deaktiviert wurde.

!item [Ergebnis:]
Die Funktion liefert folgende Resultate:
!begin_xlist !short [EIMBA :]
!item [E_OK :]
kein Fehler aufgetreten
!item [EIMBA :]
falsche Blockadresse
!item [EGSBF :]
Block wrde vergr”ert
!end_xlist

!item [Verfgbar:] Alle GEMDOS Versionen.

!item [Gruppe:]
Speicherverwaltung

!item [Querverweis:] (!link [Binding] [Bindings fr Mshrink]) ~ Malloc ~  Mfree
(!ende_liste)


!begin_node Bindings fr Mshrink
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
int32_t Mshrink ( void *block, int32_t newsiz );
!item [Assembler:]
!begin_verbatim
move.l    newsiz,-(sp)  ; Offset 8
pea       block         ; Offset 4
move.w    #0,-(sp)      ; Offset 2
move.w    #74,-(sp)     ; Offset 0
trap      #1            ; GEMDOS aufrufen
lea       $C(sp),sp     ; Stack korrigieren
!end_verbatim
(!B)Hinweis:(!b) Der Null-Parameter wird beim C-Binding normalerweise
automatisch hinzugefgt.
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7gd.htm">GFA-H-Util GEMDOS</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node

!endif
