!iflang [english]

!begin_node Psetlimit
(!begin_liste) [Availability]
!item [Name:]
¯Psetlimit® - Limits der Systemresourcen setzen/erfragen.
!item [Opcode:]
287
!item [Syntax:]
int32_t Psetlimit ( int16_t lim, int32_t value );

!item [Description:]
Die Funktion dient dem Setzen/Abfragen einer Resourcenbegrenzung fr den
aktuellen Prozess. Der Parameter (!I)lim(!i) bestimmt die gewnschte
Resource-Art:
!begin_xlist !short [lim]
!item [lim]
Bedeutung
!item [~]
~
!item [1]
max. CPU-Zeit fr den Prozess (Millisekunden)
!item [2]
max. Gesamtspeicher des Prozesses in Bytes
!item [3]
max. allozierbarer Speicher fr den Prozess (in Bytes).
!end_xlist
Der Unterschied zwischen 2 und 3 besteht darin, da der Gesamtspeicher auch
die TEXT-, DATA- und BSS-Segmente des Prozesses umfat.

Mit Hilfe dieser Funktion werden die Resource-Begrenzungen sowohl fr den
aktuellen Prozess, als auch fr alle sp„ter erzeugten Childs einzeln
eingestellt. Wenn ein Prozess also ein CPU-Limit einstellt, und danach
mehrere Child-Prozesse erzeugt, dann gilt dieses CPU-Limit auch fr jeden
einzelnen Child, und nicht etwa fr alle Childs zusammen.

Der Parameter (!I)value(!i) bestimmt den Wert, den eine Resource annehmen
soll. Ein Wert von 0 bedeutet in diesem Zusammenhang, da die Resource
unbegrenzt ist. Ein negativer Wert l„t die Resource unver„ndert.

(!B)Hinweis:(!b) Es gibt keine Restriktionen beim Vergr”ern der
Begrenzungen. Jeder Prozess kann jede seiner Begrenzungen beliebig ver„ndern
oder sogar auf unbegrenzt setzen.

Speicherbegrenzungen kommen bei Pexec nicht zur Anwendung. Ist z.B. ein
Prozess auf 256Kbyte begrenzt, kann er dennoch mit (!nolink [Pexec]) einen
Tochterprozess starten, der mehr Speicher verbraucht. (!B)Achtung:(!b) Dies
gilt (!I)nicht(!i) in MagiC; hier werden Speicherbegrenzungen bei (!nolink [Pexec])
vererbt!

Speicherbegrenzungen sind nicht rckwirkend gltig. Besitzt ein Prozess z.B.
256Kbyte und ruft dann Psetlimit auf, um seinen Bedarf auf 128Kbyte zu
reduzieren, dann wird er zwar nicht beendet, aber er kann keinen Speicher
mehr allozieren, bis seine Gr”e unter die angegebenen 128Kbyte f„llt.

Begrenzungen der CPU-Zeit wirken hingegen rckwirkend. Verkrzt ein Prozess
seine CPU-Zeit unter den bisher gltigen Wert, dann empf„ngt er sofort ein
SIGXCPU-Signal.

(!B)Achtung:(!b) Ungltige Funktionsnummern und solche, die von MagiC nicht 
untersttzt werden, liefern EINVFN.

(!B)Hinweis zu (!nolink [MagiC]):(!b) Ist ein Programm mit dem Dienstprogramm LIMITMEM
modifiziert worden, hat diese Einstellung Vorrang vor dem Speicherlimit des
aufrufenden Prozesses. Psetlimit wird vom erweiterten shel_write()-Modus
untersttzt; damit k”nnen speicherbeschr„nkte Applikationen auch parallel
gestartet werden.
!item [(!nolink [Return]) Value:]
Die Funktion liefert den alten Begrenzungswert zurck.

!item [Availability:] MagiC ab Version 4.0 (17.09.1996)

!item [Group:]
Process Functions

!item [See Also:] (!link [Binding] [Bindings for Psetlimit]) ~ Prusage ~ Signale
(!ende_liste)


!begin_node Bindings for Psetlimit
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
int32_t Psetlimit ( int16_t lim, int32_t value );
!item [Assembler:]
!begin_verbatim
move.l    value,-(sp)  ; Offset 4
move.w    lim,-(sp)    ; Offset 2
move.w    #287,-(sp)   ; Offset 0
trap      #1           ; GEMDOS
addq.l    #8,sp        ; correct stack
!end_verbatim
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7gd.htm">GFA-H-Util GEMDOS</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node

!else

!begin_node Psetlimit
(!begin_liste) [Beschreibung]
!item [Name:]
¯Psetlimit® - Limits der Systemresourcen setzen/erfragen.
!item [Gemdosnummer:]
287
!item [Deklaration:]
int32_t Psetlimit ( int16_t lim, int32_t value );

!item [Beschreibung:]
Die Funktion dient dem Setzen/Abfragen einer Resourcenbegrenzung fr den
aktuellen Prozess. Der Parameter (!I)lim(!i) bestimmt die gewnschte
Resource-Art:
!begin_xlist !short [lim]
!item [lim]
Bedeutung
!item [~]
~
!item [1]
max. CPU-Zeit fr den Prozess (Millisekunden)
!item [2]
max. Gesamtspeicher des Prozesses in Bytes
!item [3]
max. allozierbarer Speicher fr den Prozess (in Bytes).
!end_xlist
Der Unterschied zwischen 2 und 3 besteht darin, da der Gesamtspeicher auch
die TEXT-, DATA- und BSS-Segmente des Prozesses umfat.

Mit Hilfe dieser Funktion werden die Resource-Begrenzungen sowohl fr den
aktuellen Prozess, als auch fr alle sp„ter erzeugten Childs einzeln
eingestellt. Wenn ein Prozess also ein CPU-Limit einstellt, und danach
mehrere Child-Prozesse erzeugt, dann gilt dieses CPU-Limit auch fr jeden
einzelnen Child, und nicht etwa fr alle Childs zusammen.

Der Parameter (!I)value(!i) bestimmt den Wert, den eine Resource annehmen
soll. Ein Wert von 0 bedeutet in diesem Zusammenhang, da die Resource
unbegrenzt ist. Ein negativer Wert l„t die Resource unver„ndert.

(!B)Hinweis:(!b) Es gibt keine Restriktionen beim Vergr”ern der
Begrenzungen. Jeder Prozess kann jede seiner Begrenzungen beliebig ver„ndern
oder sogar auf unbegrenzt setzen.

Speicherbegrenzungen kommen bei Pexec nicht zur Anwendung. Ist z.B. ein
Prozess auf 256Kbyte begrenzt, kann er dennoch mit (!nolink [Pexec]) einen
Tochterprozess starten, der mehr Speicher verbraucht. (!B)Achtung:(!b) Dies
gilt (!I)nicht(!i) in MagiC; hier werden Speicherbegrenzungen bei (!nolink [Pexec])
vererbt!

Speicherbegrenzungen sind nicht rckwirkend gltig. Besitzt ein Prozess z.B.
256Kbyte und ruft dann Psetlimit auf, um seinen Bedarf auf 128Kbyte zu
reduzieren, dann wird er zwar nicht beendet, aber er kann keinen Speicher
mehr allozieren, bis seine Gr”e unter die angegebenen 128Kbyte f„llt.

Begrenzungen der CPU-Zeit wirken hingegen rckwirkend. Verkrzt ein Prozess
seine CPU-Zeit unter den bisher gltigen Wert, dann empf„ngt er sofort ein
SIGXCPU-Signal.

(!B)Achtung:(!b) Ungltige Funktionsnummern und solche, die von MagiC nicht 
untersttzt werden, liefern EINVFN.

(!B)Hinweis zu (!nolink [MagiC]):(!b) Ist ein Programm mit dem Dienstprogramm LIMITMEM
modifiziert worden, hat diese Einstellung Vorrang vor dem Speicherlimit des
aufrufenden Prozesses. Psetlimit wird vom erweiterten shel_write()-Modus
untersttzt; damit k”nnen speicherbeschr„nkte Applikationen auch parallel
gestartet werden.
!item [Ergebnis:]
Die Funktion liefert den alten Begrenzungswert zurck.

!item [Verfgbar:] MagiC ab Version 4.0 (17.09.1996)

!item [Gruppe:]
Prozessfunktionen

!item [Querverweis:] (!link [Binding] [Bindings fr Psetlimit]) ~ Prusage ~ Signale
(!ende_liste)


!begin_node Bindings fr Psetlimit
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
int32_t Psetlimit ( int16_t lim, int32_t value );
!item [Assembler:]
!begin_verbatim
move.l    value,-(sp)  ; Offset 4
move.w    lim,-(sp)    ; Offset 2
move.w    #287,-(sp)   ; Offset 0
trap      #1           ; GEMDOS aufrufen
addq.l    #8,sp        ; Stack korrigieren
!end_verbatim
!ifdest [html]
!item [GFA-Basic]
!begin_raw
<A HREF="http://www.milanstation.de/at/gfahutil/gfau7gd.htm">GFA-H-Util GEMDOS</A>
!end_raw
!endif
(!ende_liste)
!end_node
!end_node

!endif
