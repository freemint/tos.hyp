!iflang [english]


!begin_node ct60_rw_parameter
(!begin_liste) [Availability]

!item [Name:]
¯ct60_rw_parameter® -Read or change a parameter inside the flash eprom.

!item [Opcode:]
50699 (0xc60b)

!item [Syntax:]
int32_t ct60_rw_parameter( int16_t mode, int32_t type_param, int16_t value );

!item [Description:]
This XBIOS-function read or change a parameter inside the flash eprom.
The function returns the value.
!begin_xlist [type_param]
!item [mode] 
          CT60_MODE_READ (0) (!nl)
          The value is read.
          
          CT60_MODE_WRITE (1) (!nl)
          The value is write.

!item [type_param]
          CT60_PARAM_TOSRAM (0) (!nl)
          If the value is set to 1, the TOS is copied inside the 
          SDRAM during boot (PMMU used and cookie PMMU created).
          If the value is set to 0, the TOS in flash eprom is used. 
          
          CT60_BLITTER_SPEED (1) (!nl)
          If the value is set to 0, the blitter runs a 8/10 MHz.
          If the value is set to 1, the blitter runs a 16/20 MHz.          

          CT60_CACHE_DELAY (2) (!nl)
          If the bit 0 of the value is cleared, the Pexec function is 
          normal (flushes cache). (!nl)
          If the bit 0 of the value is set, the caches are disabled
          for 5 seconds when a program is started under TOS with the
          Pexec function. (!nl)
          If the bit 1 of the value is set, there are an Fread test
          and maybe a copyback alert if the code begin by $601A. With
          this alert you can remove the cache during 5 seconds. (!nl)
          If the bit 1 of the value is cleared, there are no copyback
          alert.

          CT60_BOOT_ORDER (3) (!nl)
          If the value is set to 0, TOS boots from SCSI drives (0-7) 
          before IDE drives (0-1). (!nl)
          If the value is set to 1, TOS boots from IDE drives (0-1) 
          before SCSI drives (0-7). (!nl)
          If the value is set to 2, TOS boots from SCSI drives (7-0) 
          before IDE drives (1-0). (!nl)
          If the value is set to 3, TOS boots from IDE drives (1-0) 
          before SCSI drives (7-0). (!nl)
          
          CT60_CPU_FPU (4) (!nl)
          If the bit 0 of the value is cleared, the FPU is disabled.

          CT60_PARAM_OFFSET_TLV (10) (!nl)
          Value contains a signed offset in points. A point is equal 
          to 2.8 øC. 
!end_xlist

!item [(!nolink [Return]) Value:]
The value or return:
!begin_xlist !short [EUNDEV (-15)]
!item [EBADRQ (-5)] if the parameter is >=15.
!item [EWRITF (-10)] for a write fault.
!item [EUNDEV (-15)] if the flash device is not found.
!end_xlist

!item [Group:]
CT60-XBIOS-Erweiterung

!item [Availability:]
TOS 4.04 patched for CT60 hardware acceleration board.

!item [See Also:]
(!link [Binding] [Bindings fr ct60_rw_parameter])

(!ende_liste)


!begin_node Bindings fr ct60_rw_parameter
!ignore_index
(!link [Bindings fr ct60_rw_parameter] [Bindings fr ct60_rw_parameter])
(!begin_liste) [Assembler:]
!item [C:]
int32_t ct60_rw_parameter( int16_t mode, int32_t type_param, int16_t value );
!item [Assembler:]
!begin_verbatim
move.l    value,-(sp)     ; Offset 8
move.l    type_param,-(sp); Offset 4
move.w    mode,-(sp)      ; Offset 2
move.w    #$c60b,-(sp)    ; Offset 0
trap      #14             ; XBIOS aufrufen
addq.l    #12,sp          ; Stack korrigieren
!end_verbatim
(!ende_liste)
!end_node
!end_node


!else


!begin_node ct60_rw_parameter
(!begin_liste) [Beschreibung]

!item [Name:]
¯ct60_rw_parameter® - Lesen oder Schreiben eines Parameter im Flash Eprom.

!item [Xbiosnummer:]
50699 (0xc60b)

!item [Deklaration:]
int32_t ct60_rw_parameter( int16_t mode, int32_t type_param, int16_t value );

!item [Beschreibung:]
Diese XBIOS Funktion liest oder schreibt einen Parameter in das Flash Eprom.
Die Funktion liefert den Wert zurck.
!begin_xlist [type_param]
!item [mode] 
          CT60_MODE_READ (0) (!nl)
          Parameter lesen.
          
          CT60_MODE_WRITE (1) (!nl)
          Parameter schreiben.

!item [type_param]
          CT60_PARAM_TOSRAM (0) (!nl)
          Ist der Wert von value 1, wird das TOS in der Bootphase
          in das SDRAM kopiert (PMMU wird benutzt und Cookie PMMU
          angelegt). Ist der Wert von value 0, wird das TOS im
          Flash Eprom benutzt.
          
          CT60_BLITTER_SPEED (1) (!nl)
          Ist der Wert von value 0, l„uft der Blitter mit 8/10 MHz.
          Ist der Wert von value 1, l„uft der Blitter mit 16/20 MHz.

          CT60_CACHE_DELAY (2) (!nl)
          If the bit 0 of the value is cleared, the Pexec function is 
          normal (flushes cache). (!nl)
          If the bit 0 of the value is set, the caches are disabled
          for 5 seconds when a program is started under TOS with the
          Pexec function. (!nl)
          If the bit 1 of the value is set, there are an Fread test
          and maybe a copyback alert if the code begin by $601A. With
          this alert you can remove the cache during 5 seconds. (!nl)
          If the bit 1 of the value is cleared, there are no copyback
          alert.

          CT60_BOOT_ORDER (3) (!nl)
          Ist  der Wert von  (!I)value(!i) 0, dann bootet TOS von SCSI Ger„ten (0-7)
          vor IDE Ger„ten (0-1).  (!nl)
          Ist  der Wert von (!I)value(!i) 1, dann bootet TOS von IDE Ger„ten (0-1)
          vor SCSI Ger„ten (0-7).  (!nl)
          Ist  der Wert von (!I)value(!i) 2, dann bootet TOS von SCSI Ger„ten (7-0)
          vor IDE Ger„ten (1-0).  (!nl)
          Ist  der Wert von (!I)value(!i) 3, dann bootet TOS von IDE Ger„ten (1-0)
          vor SCSI Ger„ten (7-0).  (!nl)
          
          CT60_CPU_FPU (4) (!nl)
          Ist das Bit 0 von (!I)value(!i) gel”scht, dann ist die FPU 
          abgeschaltet.

          CT60_PARAM_OFFSET_TLV (10) (!nl)
          Der Wert Value enth„lt einen vorzeichenbehafteten Offset
          in Punkten. Ein Punkt entspricht 2.8 øC.
!end_xlist

!item [Ergebnis:]
Der Parameter oder:
!begin_xlist !short [EUNDEV (-15)]
!item [EBADRQ (-5)] wenn der Parameter >=15 ist.
!item [EWRITF (-10)] fr einen Schreibfehler.
!item [EUNDEV (-15)] wenn das Flash nicht gefunden wurde.
!end_xlist

!item [Gruppe:]
CT60-XBIOS-Erweiterung

!item [Verfgbar:]
TOS 4.04 mit Patch fr CT60 Beschleunigerboard.

!item [Querverweis:]
(!link [Binding] [Bindings fr ct60_rw_parameter])

(!ende_liste)


!begin_node Bindings fr ct60_rw_parameter
!ignore_index
(!begin_liste) [Assembler:]
!item [C:]
int32_t ct60_rw_parameter( int16_t mode, int32_t type_param, int16_t value );
!item [Assembler:]
!begin_verbatim
move.l    value,-(sp)     ; Offset 8
move.l    type_param,-(sp); Offset 4
move.w    mode,-(sp)      ; Offset 2
move.w    #$c60b,-(sp)    ; Offset 0
trap      #14             ; XBIOS aufrufen
addq.l    #12,sp          ; Stack korrigieren
!end_verbatim
(!ende_liste)
!end_node
!end_node


!endif